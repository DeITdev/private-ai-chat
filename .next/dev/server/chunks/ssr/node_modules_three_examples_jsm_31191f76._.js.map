{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/utils/BufferGeometryUtils.js"],"sourcesContent":["import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tInstancedBufferAttribute,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tVector3,\n} from 'three';\n\n/**\n * @module BufferGeometryUtils\n * @three_import import * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';\n */\n\n/**\n * Computes vertex tangents using the MikkTSpace algorithm. MikkTSpace generates the same tangents consistently,\n * and is used in most modelling tools and normal map bakers. Use MikkTSpace for materials with normal maps,\n * because inconsistent tangents may lead to subtle visual issues in the normal map, particularly around mirrored\n * UV seams.\n *\n * In comparison to this method, {@link BufferGeometry#computeTangents} (a custom algorithm) generates tangents that\n * probably will not match the tangents in other software. The custom algorithm is sufficient for general use with a\n * custom material, and may be faster than MikkTSpace.\n *\n * Returns the original BufferGeometry. Indexed geometries will be de-indexed. Requires position, normal, and uv attributes.\n *\n * @param {BufferGeometry} geometry - The geometry to compute tangents for.\n * @param {Object} MikkTSpace - Instance of `examples/jsm/libs/mikktspace.module.js`, or `mikktspace` npm package.\n * Await `MikkTSpace.ready` before use.\n * @param {boolean} [negateSign=true] - Whether to negate the sign component (.w) of each tangent.\n * Required for normal map conventions in some formats, including glTF.\n * @return {BufferGeometry} The updated geometry.\n */\nfunction computeMikkTSpaceTangents( geometry, MikkTSpace, negateSign = true ) {\n\n\tif ( ! MikkTSpace || ! MikkTSpace.isReady ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Initialized MikkTSpace library required.' );\n\n\t}\n\n\tif ( ! geometry.hasAttribute( 'position' ) || ! geometry.hasAttribute( 'normal' ) || ! geometry.hasAttribute( 'uv' ) ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Tangents require \"position\", \"normal\", and \"uv\" attributes.' );\n\n\t}\n\n\tfunction getAttributeArray( attribute ) {\n\n\t\tif ( attribute.normalized || attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst dstArray = new Float32Array( attribute.count * attribute.itemSize );\n\n\t\t\tfor ( let i = 0, j = 0; i < attribute.count; i ++ ) {\n\n\t\t\t\tdstArray[ j ++ ] = attribute.getX( i );\n\t\t\t\tdstArray[ j ++ ] = attribute.getY( i );\n\n\t\t\t\tif ( attribute.itemSize > 2 ) {\n\n\t\t\t\t\tdstArray[ j ++ ] = attribute.getZ( i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn dstArray;\n\n\t\t}\n\n\t\tif ( attribute.array instanceof Float32Array ) {\n\n\t\t\treturn attribute.array;\n\n\t\t}\n\n\t\treturn new Float32Array( attribute.array );\n\n\t}\n\n\t// MikkTSpace algorithm requires non-indexed input.\n\n\tconst _geometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\n\t// Compute vertex tangents.\n\n\tconst tangents = MikkTSpace.generateTangents(\n\n\t\tgetAttributeArray( _geometry.attributes.position ),\n\t\tgetAttributeArray( _geometry.attributes.normal ),\n\t\tgetAttributeArray( _geometry.attributes.uv )\n\n\t);\n\n\t// Texture coordinate convention of glTF differs from the apparent\n\t// default of the MikkTSpace library; .w component must be flipped.\n\n\tif ( negateSign ) {\n\n\t\tfor ( let i = 3; i < tangents.length; i += 4 ) {\n\n\t\t\ttangents[ i ] *= - 1;\n\n\t\t}\n\n\t}\n\n\t//\n\n\t_geometry.setAttribute( 'tangent', new BufferAttribute( tangents, 4 ) );\n\n\tif ( geometry !== _geometry ) {\n\n\t\tgeometry.copy( _geometry );\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * Merges a set of geometries into a single instance. All geometries must have compatible attributes.\n *\n * @param {Array<BufferGeometry>} geometries - The geometries to merge.\n * @param {boolean} [useGroups=false] - Whether to use groups or not.\n * @return {?BufferGeometry} The merged geometry. Returns `null` if the merge does not succeed.\n */\nfunction mergeGeometries( geometries, useGroups = false ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\tconst attributes = {};\n\tconst morphAttributes = {};\n\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\n\n\tconst mergedGeometry = new BufferGeometry();\n\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather morph attributes, exit early if they're different\n\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\n\tif ( isIndexed ) {\n\n\t\tlet indexOffset = 0;\n\t\tconst mergedIndex = [];\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tconst index = geometries[ i ].index;\n\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t}\n\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t}\n\n\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t}\n\n\t// merge attributes\n\n\tfor ( const name in attributes ) {\n\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\n\n\t\tif ( ! mergedAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\n\n\t}\n\n\t// merge morph attributes\n\n\tfor ( const name in morphAttributes ) {\n\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\tif ( numMorphTargets === 0 ) break;\n\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\tconst morphAttributesToMerge = [];\n\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t}\n\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\n\n\t\t\tif ( ! mergedMorphAttribute ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t}\n\n\t}\n\n\treturn mergedGeometry;\n\n}\n\n/**\n * Merges a set of attributes into a single instance. All attributes must have compatible properties and types.\n * Instances of {@link InterleavedBufferAttribute} are not supported.\n *\n * @param {Array<BufferAttribute>} attributes - The attributes to merge.\n * @return {?BufferAttribute} The merged attribute. Returns `null` if the merge does not succeed.\n */\nfunction mergeAttributes( attributes ) {\n\n\tlet TypedArray;\n\tlet itemSize;\n\tlet normalized;\n\tlet gpuType = - 1;\n\tlet arrayLength = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\tif ( itemSize !== attribute.itemSize ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\tif ( normalized !== attribute.normalized ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( gpuType === - 1 ) gpuType = attribute.gpuType;\n\t\tif ( gpuType !== attribute.gpuType ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.count * itemSize;\n\n\t}\n\n\tconst array = new TypedArray( arrayLength );\n\tconst result = new BufferAttribute( array, itemSize, normalized );\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst tupleOffset = offset / itemSize;\n\t\t\tfor ( let j = 0, l = attribute.count; j < l; j ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\t\tconst value = attribute.getComponent( j, c );\n\t\t\t\t\tresult.setComponent( j + tupleOffset, c, value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tarray.set( attribute.array, offset );\n\n\t\t}\n\n\t\toffset += attribute.count * itemSize;\n\n\t}\n\n\tif ( gpuType !== undefined ) {\n\n\t\tresult.gpuType = gpuType;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * Performs a deep clone of the given buffer attribute.\n *\n * @param {BufferAttribute} attribute - The attribute to clone.\n * @return {BufferAttribute} The cloned attribute.\n */\nfunction deepCloneAttribute( attribute ) {\n\n\tif ( attribute.isInstancedInterleavedBufferAttribute || attribute.isInterleavedBufferAttribute ) {\n\n\t\treturn deinterleaveAttribute( attribute );\n\n\t}\n\n\tif ( attribute.isInstancedBufferAttribute ) {\n\n\t\treturn new InstancedBufferAttribute().copy( attribute );\n\n\t}\n\n\treturn new BufferAttribute().copy( attribute );\n\n}\n\n/**\n * Interleaves a set of attributes and returns a new array of corresponding attributes that share a\n * single {@link InterleavedBuffer} instance. All attributes must have compatible types.\n *\n * @param {Array<BufferAttribute>} attributes - The attributes to interleave.\n * @return {?Array<InterleavedBufferAttribute>} An array of interleaved attributes. If interleave does not succeed, the method returns `null`.\n */\nfunction interleaveAttributes( attributes ) {\n\n\t// Interleaves the provided attributes into an InterleavedBuffer and returns\n\t// a set of InterleavedBufferAttributes for each attribute\n\tlet TypedArray;\n\tlet arrayLength = 0;\n\tlet stride = 0;\n\n\t// calculate the length and type of the interleavedBuffer\n\tfor ( let i = 0, l = attributes.length; i < l; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'AttributeBuffers of different types cannot be interleaved' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.array.length;\n\t\tstride += attribute.itemSize;\n\n\t}\n\n\t// Create the set of buffer attributes\n\tconst interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\n\tlet offset = 0;\n\tconst res = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\tfor ( let j = 0, l = attributes.length; j < l; j ++ ) {\n\n\t\tconst attribute = attributes[ j ];\n\t\tconst itemSize = attribute.itemSize;\n\t\tconst count = attribute.count;\n\t\tconst iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\n\t\tres.push( iba );\n\n\t\toffset += itemSize;\n\n\t\t// Move the data for each attribute into the new interleavedBuffer\n\t\t// at the appropriate offset\n\t\tfor ( let c = 0; c < count; c ++ ) {\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\tiba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\n/**\n * Returns a new, non-interleaved version of the given attribute.\n *\n * @param {InterleavedBufferAttribute} attribute - The interleaved attribute.\n * @return {BufferAttribute} The non-interleaved attribute.\n */\nfunction deinterleaveAttribute( attribute ) {\n\n\tconst cons = attribute.data.array.constructor;\n\tconst count = attribute.count;\n\tconst itemSize = attribute.itemSize;\n\tconst normalized = attribute.normalized;\n\n\tconst array = new cons( count * itemSize );\n\tlet newAttribute;\n\tif ( attribute.isInstancedInterleavedBufferAttribute ) {\n\n\t\tnewAttribute = new InstancedBufferAttribute( array, itemSize, normalized, attribute.meshPerAttribute );\n\n\t} else {\n\n\t\tnewAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\tnewAttribute.setX( i, attribute.getX( i ) );\n\n\t\tif ( itemSize >= 2 ) {\n\n\t\t\tnewAttribute.setY( i, attribute.getY( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 3 ) {\n\n\t\t\tnewAttribute.setZ( i, attribute.getZ( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 4 ) {\n\n\t\t\tnewAttribute.setW( i, attribute.getW( i ) );\n\n\t\t}\n\n\t}\n\n\treturn newAttribute;\n\n}\n\n/**\n * Deinterleaves all attributes on the given geometry.\n *\n * @param {BufferGeometry} geometry - The geometry to deinterleave.\n */\nfunction deinterleaveGeometry( geometry ) {\n\n\tconst attributes = geometry.attributes;\n\tconst morphTargets = geometry.morphTargets;\n\tconst attrMap = new Map();\n\n\tfor ( const key in attributes ) {\n\n\t\tconst attr = attributes[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tattributes[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n\tfor ( const key in morphTargets ) {\n\n\t\tconst attr = morphTargets[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tmorphTargets[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Returns the amount of bytes used by all attributes to represent the geometry.\n *\n * @param {BufferGeometry} geometry - The geometry.\n * @return {number} The estimate bytes used.\n */\nfunction estimateBytesUsed( geometry ) {\n\n\t// Return the estimated memory used by this geometry in bytes\n\t// Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n\t// for InterleavedBufferAttributes.\n\tlet mem = 0;\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst attr = geometry.getAttribute( name );\n\t\tmem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n\n\t}\n\n\tconst indices = geometry.getIndex();\n\tmem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n\treturn mem;\n\n}\n\n/**\n * Returns a new geometry with vertices for which all similar vertex attributes (within tolerance) are merged.\n *\n * @param {BufferGeometry} geometry - The geometry to merge vertices for.\n * @param {number} [tolerance=1e-4] - The tolerance value.\n * @return {BufferGeometry} - The new geometry with merged vertices.\n */\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\n\n\ttolerance = Math.max( tolerance, Number.EPSILON );\n\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\n\t// if it's already available.\n\tconst hashToIndex = {};\n\tconst indices = geometry.getIndex();\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst vertexCount = indices ? indices.count : positions.count;\n\n\t// next value for triangle indices\n\tlet nextIndex = 0;\n\n\t// attributes and new attribute arrays\n\tconst attributeNames = Object.keys( geometry.attributes );\n\tconst tmpAttributes = {};\n\tconst tmpMorphAttributes = {};\n\tconst newIndices = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\t// Initialize the arrays, allocating space conservatively. Extra\n\t// space will be trimmed in the last step.\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\n\n\t\tconst name = attributeNames[ i ];\n\t\tconst attr = geometry.attributes[ name ];\n\n\t\ttmpAttributes[ name ] = new attr.constructor(\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\n\t\t\tattr.itemSize,\n\t\t\tattr.normalized\n\t\t);\n\n\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\tif ( morphAttributes ) {\n\n\t\t\tif ( ! tmpMorphAttributes[ name ] ) tmpMorphAttributes[ name ] = [];\n\t\t\tmorphAttributes.forEach( ( morphAttr, i ) => {\n\n\t\t\t\tconst array = new morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize );\n\t\t\t\ttmpMorphAttributes[ name ][ i ] = new morphAttr.constructor( array, morphAttr.itemSize, morphAttr.normalized );\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t// convert the error tolerance to an amount of decimal places to truncate to\n\tconst halfTolerance = tolerance * 0.5;\n\tconst exponent = Math.log10( 1 / tolerance );\n\tconst hashMultiplier = Math.pow( 10, exponent );\n\tconst hashAdditive = halfTolerance * hashMultiplier;\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\tconst index = indices ? indices.getX( i ) : i;\n\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\n\t\tlet hash = '';\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\tconst name = attributeNames[ j ];\n\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t// double tilde truncates the decimal value\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add another reference to the vertex if it's already\n\t\t// used by another index\n\t\tif ( hash in hashToIndex ) {\n\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\n\n\t\t} else {\n\n\t\t\t// copy data to the new index in the temporary attributes\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\t\tconst name = attributeNames[ j ];\n\t\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\t\t\tconst itemSize = attribute.itemSize;\n\t\t\t\tconst newArray = tmpAttributes[ name ];\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\n\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t\tconst getterFunc = getters[ k ];\n\t\t\t\t\tconst setterFunc = setters[ k ];\n\t\t\t\t\tnewArray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\n\n\t\t\t\t\tif ( morphAttributes ) {\n\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttributes.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttributes[ m ][ getterFunc ]( index ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thashToIndex[ hash ] = nextIndex;\n\t\t\tnewIndices.push( nextIndex );\n\t\t\tnextIndex ++;\n\n\t\t}\n\n\t}\n\n\t// generate result BufferGeometry\n\tconst result = geometry.clone();\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst tmpAttribute = tmpAttributes[ name ];\n\n\t\tresult.setAttribute( name, new tmpAttribute.constructor(\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\n\t\t\ttmpAttribute.itemSize,\n\t\t\ttmpAttribute.normalized,\n\t\t) );\n\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\n\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\n\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\n\n\t\t\tresult.morphAttributes[ name ][ j ] = new tmpMorphAttribute.constructor(\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\n\t\t\t\ttmpMorphAttribute.itemSize,\n\t\t\t\ttmpMorphAttribute.normalized,\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tresult.setIndex( newIndices );\n\n\treturn result;\n\n}\n\n/**\n * Returns a new indexed geometry based on `TrianglesDrawMode` draw mode.\n * This mode corresponds to the `gl.TRIANGLES` primitive in WebGL.\n *\n * @param {BufferGeometry} geometry - The geometry to convert.\n * @param {number} drawMode - The current draw mode.\n * @return {BufferGeometry} The new geometry using `TrianglesDrawMode`.\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tif ( drawMode === TrianglesDrawMode ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\n\t\treturn geometry;\n\n\t}\n\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\n\n\t\tlet index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst numberOfTriangles = index.count - 2;\n\t\tconst newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tconst newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\t\tnewGeometry.clearGroups();\n\n\t\treturn newGeometry;\n\n\t} else {\n\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\n\t\treturn geometry;\n\n\t}\n\n}\n\n/**\n * Calculates the morphed attributes of a morphed/skinned BufferGeometry.\n *\n * Helpful for Raytracing or Decals (i.e. a `DecalGeometry` applied to a morphed Object with a `BufferGeometry`\n * will use the original `BufferGeometry`, not the morphed/skinned one, generating an incorrect result.\n * Using this function to create a shadow `Object3`D the `DecalGeometry` can be correctly generated).\n *\n * @param {Mesh|Line|Points} object - The 3D object to compute morph attributes for.\n * @return {Object} An object with original position/normal attributes and morphed ones.\n */\nfunction computeMorphedAttributes( object ) {\n\n\tconst _vA = new Vector3();\n\tconst _vB = new Vector3();\n\tconst _vC = new Vector3();\n\n\tconst _tempA = new Vector3();\n\tconst _tempB = new Vector3();\n\tconst _tempC = new Vector3();\n\n\tconst _morphA = new Vector3();\n\tconst _morphB = new Vector3();\n\tconst _morphC = new Vector3();\n\n\tfunction _calculateMorphedAttributeData(\n\t\tobject,\n\t\tattribute,\n\t\tmorphAttribute,\n\t\tmorphTargetsRelative,\n\t\ta,\n\t\tb,\n\t\tc,\n\t\tmodifiedAttributeArray\n\t) {\n\n\t\t_vA.fromBufferAttribute( attribute, a );\n\t\t_vB.fromBufferAttribute( attribute, b );\n\t\t_vC.fromBufferAttribute( attribute, c );\n\n\t\tconst morphInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphAttribute && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\t\t\t_morphB.set( 0, 0, 0 );\n\t\t\t_morphC.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morph = morphAttribute[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morph, a );\n\t\t\t\t_tempB.fromBufferAttribute( morph, b );\n\t\t\t\t_tempC.fromBufferAttribute( morph, c );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_vA.add( _morphA );\n\t\t\t_vB.add( _morphB );\n\t\t\t_vC.add( _morphC );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tobject.applyBoneTransform( a, _vA );\n\t\t\tobject.applyBoneTransform( b, _vB );\n\t\t\tobject.applyBoneTransform( c, _vC );\n\n\t\t}\n\n\t\tmodifiedAttributeArray[ a * 3 + 0 ] = _vA.x;\n\t\tmodifiedAttributeArray[ a * 3 + 1 ] = _vA.y;\n\t\tmodifiedAttributeArray[ a * 3 + 2 ] = _vA.z;\n\t\tmodifiedAttributeArray[ b * 3 + 0 ] = _vB.x;\n\t\tmodifiedAttributeArray[ b * 3 + 1 ] = _vB.y;\n\t\tmodifiedAttributeArray[ b * 3 + 2 ] = _vB.z;\n\t\tmodifiedAttributeArray[ c * 3 + 0 ] = _vC.x;\n\t\tmodifiedAttributeArray[ c * 3 + 1 ] = _vC.y;\n\t\tmodifiedAttributeArray[ c * 3 + 2 ] = _vC.z;\n\n\t}\n\n\tconst geometry = object.geometry;\n\tconst material = object.material;\n\n\tlet a, b, c;\n\tconst index = geometry.index;\n\tconst positionAttribute = geometry.attributes.position;\n\tconst morphPosition = geometry.morphAttributes.position;\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\tconst normalAttribute = geometry.attributes.normal;\n\tconst morphNormal = geometry.morphAttributes.position;\n\n\tconst groups = geometry.groups;\n\tconst drawRange = geometry.drawRange;\n\tlet i, j, il, jl;\n\tlet group;\n\tlet start, end;\n\n\tconst modifiedPosition = new Float32Array( positionAttribute.count * positionAttribute.itemSize );\n\tconst modifiedNormal = new Float32Array( normalAttribute.count * normalAttribute.itemSize );\n\n\tif ( index !== null ) {\n\n\t\t// indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = index.getX( i );\n\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// non-indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = j;\n\t\t\t\t\tb = j + 1;\n\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = i;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tconst morphedPositionAttribute = new Float32BufferAttribute( modifiedPosition, 3 );\n\tconst morphedNormalAttribute = new Float32BufferAttribute( modifiedNormal, 3 );\n\n\treturn {\n\n\t\tpositionAttribute: positionAttribute,\n\t\tnormalAttribute: normalAttribute,\n\t\tmorphedPositionAttribute: morphedPositionAttribute,\n\t\tmorphedNormalAttribute: morphedNormalAttribute\n\n\t};\n\n}\n\n/**\n * Merges the {@link BufferGeometry#groups} for the given geometry.\n *\n * @param {BufferGeometry} geometry - The geometry to modify.\n * @return {BufferGeometry} - The updated geometry\n */\nfunction mergeGroups( geometry ) {\n\n\tif ( geometry.groups.length === 0 ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge.' );\n\t\treturn geometry;\n\n\t}\n\n\tlet groups = geometry.groups;\n\n\t// sort groups by material index\n\n\tgroups = groups.sort( ( a, b ) => {\n\n\t\tif ( a.materialIndex !== b.materialIndex ) return a.materialIndex - b.materialIndex;\n\n\t\treturn a.start - b.start;\n\n\t} );\n\n\t// create index for non-indexed geometries\n\n\tif ( geometry.getIndex() === null ) {\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\t\tconst indices = [];\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\tindices.push( i, i + 1, i + 2 );\n\n\t\t}\n\n\t\tgeometry.setIndex( indices );\n\n\t}\n\n\t// sort index\n\n\tconst index = geometry.getIndex();\n\n\tconst newIndices = [];\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tconst groupStart = group.start;\n\t\tconst groupLength = groupStart + group.count;\n\n\t\tfor ( let j = groupStart; j < groupLength; j ++ ) {\n\n\t\t\tnewIndices.push( index.getX( j ) );\n\n\t\t}\n\n\t}\n\n\tgeometry.dispose(); // Required to force buffer recreation\n\tgeometry.setIndex( newIndices );\n\n\t// update groups indices\n\n\tlet start = 0;\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tgroup.start = start;\n\t\tstart += group.count;\n\n\t}\n\n\t// merge groups\n\n\tlet currentGroup = groups[ 0 ];\n\n\tgeometry.groups = [ currentGroup ];\n\n\tfor ( let i = 1; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tif ( currentGroup.materialIndex === group.materialIndex ) {\n\n\t\t\tcurrentGroup.count += group.count;\n\n\t\t} else {\n\n\t\t\tcurrentGroup = group;\n\t\t\tgeometry.groups.push( currentGroup );\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * Modifies the supplied geometry if it is non-indexed, otherwise creates a new,\n * non-indexed geometry. Returns the geometry with smooth normals everywhere except\n * faces that meet at an angle greater than the crease angle.\n *\n * @param {BufferGeometry} geometry - The geometry to modify.\n * @param {number} [creaseAngle=Math.PI/3] - The crease angle in radians.\n * @return {BufferGeometry} - The updated geometry\n */\nfunction toCreasedNormals( geometry, creaseAngle = Math.PI / 3 /* 60 degrees */ ) {\n\n\tconst creaseDot = Math.cos( creaseAngle );\n\tconst hashMultiplier = ( 1 + 1e-10 ) * 1e2;\n\n\t// reusable vectors\n\tconst verts = [ new Vector3(), new Vector3(), new Vector3() ];\n\tconst tempVec1 = new Vector3();\n\tconst tempVec2 = new Vector3();\n\tconst tempNorm = new Vector3();\n\tconst tempNorm2 = new Vector3();\n\n\t// hashes a vector\n\tfunction hashVertex( v ) {\n\n\t\tconst x = ~ ~ ( v.x * hashMultiplier );\n\t\tconst y = ~ ~ ( v.y * hashMultiplier );\n\t\tconst z = ~ ~ ( v.z * hashMultiplier );\n\t\treturn `${x},${y},${z}`;\n\n\t}\n\n\t// BufferGeometry.toNonIndexed() warns if the geometry is non-indexed\n\t// and returns the original geometry\n\tconst resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\tconst posAttr = resultGeometry.attributes.position;\n\tconst vertexMap = {};\n\n\t// find all the normals shared by commonly located vertices\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\t// add the normal to the map for all vertices\n\t\tconst normal = new Vector3().crossVectors( tempVec1, tempVec2 ).normalize();\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tif ( ! ( hash in vertexMap ) ) {\n\n\t\t\t\tvertexMap[ hash ] = [];\n\n\t\t\t}\n\n\t\t\tvertexMap[ hash ].push( normal );\n\n\t\t}\n\n\t}\n\n\t// average normals from all vertices that share a common location if they are within the\n\t// provided crease threshold\n\tconst normalArray = new Float32Array( posAttr.count * 3 );\n\tconst normAttr = new BufferAttribute( normalArray, 3, false );\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\t// get the face normal for this vertex\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\ttempNorm.crossVectors( tempVec1, tempVec2 ).normalize();\n\n\t\t// average all normals that meet the threshold and set the normal value\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tconst otherNormals = vertexMap[ hash ];\n\t\t\ttempNorm2.set( 0, 0, 0 );\n\n\t\t\tfor ( let k = 0, lk = otherNormals.length; k < lk; k ++ ) {\n\n\t\t\t\tconst otherNorm = otherNormals[ k ];\n\t\t\t\tif ( tempNorm.dot( otherNorm ) > creaseDot ) {\n\n\t\t\t\t\ttempNorm2.add( otherNorm );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttempNorm2.normalize();\n\t\t\tnormAttr.setXYZ( i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z );\n\n\t\t}\n\n\t}\n\n\tresultGeometry.setAttribute( 'normal', normAttr );\n\treturn resultGeometry;\n\n}\n\nexport {\n\tcomputeMikkTSpaceTangents,\n\tmergeGeometries,\n\tmergeAttributes,\n\tdeepCloneAttribute,\n\tdeinterleaveAttribute,\n\tdeinterleaveGeometry,\n\tinterleaveAttributes,\n\testimateBytesUsed,\n\tmergeVertices,\n\ttoTrianglesDrawMode,\n\tcomputeMorphedAttributes,\n\tmergeGroups,\n\ttoCreasedNormals\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 878, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/loaders/GLTFLoader.js"],"sourcesContent":["import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tColorManagement,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInstancedMesh,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tSRGBColorSpace,\n\tInstancedBufferAttribute\n} from 'three';\nimport { toTrianglesDrawMode } from '../utils/BufferGeometryUtils.js';\n\n/**\n * A loader for the glTF 2.0 format.\n *\n * [glTF](https://www.khronos.org/gltf/} (GL Transmission Format) is an [open format specification]{@link https://github.com/KhronosGroup/glTF/tree/main/specification/2.0)\n * for efficient delivery and loading of 3D content. Assets may be provided either in JSON (.gltf) or binary (.glb)\n * format. External files store textures (.jpg, .png) and additional binary data (.bin). A glTF asset may deliver\n * one or more scenes, including meshes, materials, textures, skins, skeletons, morph targets, animations, lights,\n * and/or cameras.\n *\n * `GLTFLoader` uses {@link ImageBitmapLoader} whenever possible. Be advised that image bitmaps are not\n * automatically GC-collected when they are no longer referenced, and they require special handling during\n * the disposal process.\n *\n * `GLTFLoader` supports the following glTF 2.0 extensions:\n * - KHR_draco_mesh_compression\n * - KHR_materials_clearcoat\n * - KHR_materials_dispersion\n * - KHR_materials_ior\n * - KHR_materials_specular\n * - KHR_materials_transmission\n * - KHR_materials_iridescence\n * - KHR_materials_unlit\n * - KHR_materials_volume\n * - KHR_mesh_quantization\n * - KHR_lights_punctual\n * - KHR_texture_basisu\n * - KHR_texture_transform\n * - EXT_texture_webp\n * - EXT_meshopt_compression\n * - EXT_mesh_gpu_instancing\n *\n * The following glTF 2.0 extension is supported by an external user plugin:\n * - [KHR_materials_variants](https://github.com/takahirox/three-gltf-extensions)\n * - [MSFT_texture_dds](https://github.com/takahirox/three-gltf-extensions)\n * - [KHR_animation_pointer](https://github.com/needle-tools/three-animation-pointer)\n * - [NEEDLE_progressive](https://github.com/needle-tools/gltf-progressive)\n *\n * ```js\n * const loader = new GLTFLoader();\n *\n * // Optional: Provide a DRACOLoader instance to decode compressed mesh data\n * const dracoLoader = new DRACOLoader();\n * dracoLoader.setDecoderPath( '/examples/jsm/libs/draco/' );\n * loader.setDRACOLoader( dracoLoader );\n *\n * const gltf = await loader.loadAsync( 'models/gltf/duck/duck.gltf' );\n * scene.add( gltf.scene );\n * ```\n *\n * @augments Loader\n * @three_import import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\n */\nclass GLTFLoader extends Loader {\n\n\t/**\n\t * Constructs a new glTF loader.\n\t *\n\t * @param {LoadingManager} [manager] - The loading manager.\n\t */\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsDispersionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Starts loading from the given URL and passes the loaded glTF asset\n\t * to the `onLoad()` callback.\n\t *\n\t * @param {string} url - The path/URL of the file to be loaded. This can also be a data URI.\n\t * @param {function(GLTFLoader~LoadObject)} onLoad - Executed when the loading process has been finished.\n\t * @param {onProgressCallback} onProgress - Executed while the loading is in progress.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\t/**\n\t * Sets the given Draco loader to this loader. Required for decoding assets\n\t * compressed with the `KHR_draco_mesh_compression` extension.\n\t *\n\t * @param {DRACOLoader} dracoLoader - The Draco loader to set.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the given KTX2 loader to this loader. Required for loading KTX2\n\t * compressed textures.\n\t *\n\t * @param {KTX2Loader} ktx2Loader - The KTX2 loader to set.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the given meshopt decoder. Required for decoding assets\n\t * compressed with the `EXT_meshopt_compression` extension.\n\t *\n\t * @param {Object} meshoptDecoder - The meshopt decoder to set.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Registers a plugin callback. This API is internally used to implement the various\n\t * glTF extensions but can also used by third-party code to add additional logic\n\t * to the loader.\n\t *\n\t * @param {function(parser:GLTFParser)} callback - The callback function to register.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Unregisters a plugin callback.\n\t *\n\t * @param {Function} callback - The callback function to unregister.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parses the given FBX data and returns the resulting group.\n\t *\n\t * @param {string|ArrayBuffer} data - The raw glTF data.\n\t * @param {string} path - The URL base path.\n\t * @param {function(GLTFLoader~LoadObject)} onLoad - Executed when the loading process has been finished.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\n\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\t/**\n\t * Async version of {@link GLTFLoader#parse}.\n\t *\n\t * @async\n\t * @param {string|ArrayBuffer} data - The raw glTF data.\n\t * @param {string} path - The URL base path.\n\t * @return {Promise<GLTFLoader~LoadObject>} A Promise that resolves with the loaded glTF when the parsing has been finished.\n\t */\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n *\n * @private\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n *\n * @private\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n *\n * @private\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n *\n * @private\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials dispersion Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_dispersion\n *\n * @private\n */\nclass GLTFMaterialsDispersionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_DISPERSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.dispersion = extension.dispersion !== undefined ? extension.dispersion : 0;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n *\n * @private\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n *\n * @private\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tconst colorFactor = extension.sheenColorFactor;\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n *\n * @private\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n *\n * @private\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n *\n * @private\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n *\n * @private\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n *\n * @private\n */\nclass GLTFMaterialsBumpExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\n\n\t\tif ( extension.bumpTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials anisotropy Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\n *\n * @private\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.anisotropyStrength !== undefined ) {\n\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\n\n\t\t}\n\n\t\tif ( extension.anisotropyRotation !== undefined ) {\n\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\n\n\t\t}\n\n\t\tif ( extension.anisotropyTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n *\n * @private\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n *\n * @private\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n *\n * @private\n */\nclass GLTFTextureAVIFExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n *\n * @private\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n * @private\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\n\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\n\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tthis.header = {\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n *\n * @private\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n *\n * @private\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\n\t\t\t&& transform.offset === undefined\n\t\t\t&& transform.rotation === undefined\n\t\t\t&& transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\ttexture.channel = transform.texCoord;\n\n\t\t}\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n *\n * @private\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _quaternion = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_quaternion.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv1',\n\tTEXCOORD_2: 'uv2',\n\tTEXCOORD_3: 'uv3',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n *\n * @private\n * @param {Object<string, Material>} cache\n * @return {Material}\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n *\n * @private\n * @param {Object3D|Material|BufferGeometry|Object|AnimationClip} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @private\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n *\n * @private\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tlet geometryKey;\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\tif ( primitiveDef.targets !== undefined ) {\n\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\n\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\n\n\t\t}\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\tif ( uri.search( /\\.ktx2($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/ktx2/ ) === 0 ) return 'image/ktx2';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Node cache\n\t\tthis.nodeCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tlet isSafari = false;\n\t\tlet safariVersion = - 1;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = - 1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tconst userAgent = navigator.userAgent;\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( userAgent ) === true;\n\t\t\tconst safariMatch = userAgent.match( /Version\\/(\\d+)/ );\n\t\t\tsafariVersion = isSafari && safariMatch ? parseInt( safariMatch[ 1 ], 10 ) : - 1;\n\n\t\t\tisFirefox = userAgent.indexOf( 'Firefox' ) > - 1;\n\t\t\tfirefoxVersion = isFirefox ? userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || ( isSafari && safariVersion < 17 ) || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\t\tthis.nodeCache = {};\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tfor ( const scene of result.scenes ) {\n\n\t\t\t\t\tscene.updateMatrixWorld();\n\n\t\t\t\t}\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t *\n\t * @private\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t *\n\t * @private\n\t * @param {Object} cache\n\t * @param {Object3D} index\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/**\n\t * Returns a reference to a shared resource, cloning it if necessary.\n\t *\n\t * @private\n\t * @param {Object} cache\n\t * @param {number} index\n\t * @param {Object} object\n\t * @return {Object}\n\t */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t *\n\t * @private\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t *\n\t * @private\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t *\n\t * @private\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t *\n\t * @private\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t *\n\t * @private\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\t// Ignore normalized since we copy from sparse\n\t\t\t\tbufferAttribute.normalized = false;\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute.normalized = normalized;\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t *\n\t * @private\n\t * @param {number} textureIndex\n\t * @return {Promise<?Texture>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\n\n\t\t\t\ttexture.name = sourceDef.uri;\n\n\t\t\t}\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\t\t\ttexture.generateMipmaps = ! texture.isCompressedTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( texture, sourceDef );\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t *\n\t * @private\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @param {string} [colorSpace]\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\n\n\t\t\t\ttexture = texture.clone();\n\t\t\t\ttexture.channel = mapDef.texCoord;\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = colorSpace;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t *\n\t * @private\n\t * @param {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\tlineMaterial.map = material.map;\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t *\n\t * @private\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * When Object3D instances are targeted by animation, they need unique names.\n\t *\n\t * @private\n\t * @param {string} originalName\n\t * @return {string}\n\t */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\n\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\n\n\t\t} else {\n\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\n\n\t\t\treturn sanitizedName;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @private\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t *\n\t * @private\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh|Line|Points>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t *\n\t * @private\n\t * @param {number} cameraIndex\n\t * @return {Promise<Camera>|undefined}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t *\n\t * @private\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\t// Note that bones (joint nodes) may or may not be in the\n\t\t\t// scene graph at this time.\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t *\n\t * @private\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tif ( target.node === undefined ) continue;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tif ( node.updateMatrix ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\n\n\t\t\t\tif ( createdTracks ) {\n\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\n\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst animation = new AnimationClip( animationName, undefined, tracks );\n\n\t\t\tassignExtrasToUserData( animation, animationDef );\n\n\t\t\treturn animation;\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t *\n\t * @private\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\n\n\t\tconst childPending = [];\n\t\tconst childrenDef = nodeDef.children || [];\n\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t}\n\n\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t? Promise.resolve( null )\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\treturn Promise.all( [\n\t\t\tnodePending,\n\t\t\tPromise.all( childPending ),\n\t\t\tskeletonPending\n\t\t] ).then( function ( results ) {\n\n\t\t\tconst node = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t// ._loadNodeShallow() parses a single node.\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\t_loadNodeShallow( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\t// This method is called from .loadNode() and .loadSkin().\n\t\t// Cache a node to avoid duplication.\n\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\n\n\t\t\treturn this.nodeCache[ nodeIndex ];\n\n\t\t}\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\tconst pending = [];\n\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t} );\n\n\t\tif ( meshPromise ) {\n\n\t\t\tpending.push( meshPromise );\n\n\t\t}\n\n\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t} ).forEach( function ( promise ) {\n\n\t\t\tpending.push( promise );\n\n\t\t} );\n\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t} else if ( nodeDef.mesh !== undefined && parser.meshCache.refs[ nodeDef.mesh ] > 1 ) {\n\n\t\t\t\tconst mapping = parser.associations.get( node );\n\t\t\t\tparser.associations.set( node, { ...mapping } );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t\treturn this.nodeCache[ nodeIndex ];\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t *\n\t * @private\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\n\n\t\tconst tracks = [];\n\n\t\tconst targetName = node.name ? node.name : node.uuid;\n\t\tconst targetNames = [];\n\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\ttargetNames.push( targetName );\n\n\t\t}\n\n\t\tlet TypedKeyframeTrack;\n\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.translation:\n\t\t\tcase PATH_PROPERTIES.scale:\n\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\n\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\tinputAccessor.array,\n\t\t\t\toutputArray,\n\t\t\t\tinterpolation\n\t\t\t);\n\n\t\t\t// Override interpolation with custom factory method.\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\n\n\t\t\t}\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\t_getArrayFromAccessor( accessor ) {\n\n\t\tlet outputArray = accessor.array;\n\n\t\tif ( accessor.normalized ) {\n\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t}\n\n\t\t\toutputArray = scaled;\n\n\t\t}\n\n\t\treturn outputArray;\n\n\t}\n\n\t_createCubicSplineTrackInterpolant( track ) {\n\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t};\n\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t}\n\n}\n\n/**\n *\n * @private\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n *\n * @private\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\n\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * Loader result of `GLTFLoader`.\n *\n * @typedef {Object} GLTFLoader~LoadObject\n * @property {Array<AnimationClip>} animations - An array of animation clips.\n * @property {Object} asset - Meta data about the loaded asset.\n * @property {Array<Camera>} cameras - An array of cameras.\n * @property {GLTFParser} parser - A reference to the internal parser.\n * @property {Group} scene - The default scene.\n * @property {Array<Group>} scenes - glTF assets might define multiple scenes.\n * @property {Object} userData - Additional data.\n **/\n\nexport { GLTFLoader };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3783, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/controls/OrbitControls.js"],"sourcesContent":["import {\n\tControls,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3,\n\tPlane,\n\tRay,\n\tMathUtils\n} from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event OrbitControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event OrbitControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event OrbitControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst _TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nconst _v = new Vector3();\nconst _twoPI = 2 * Math.PI;\n\nconst _STATE = {\n\tNONE: - 1,\n\tROTATE: 0,\n\tDOLLY: 1,\n\tPAN: 2,\n\tTOUCH_ROTATE: 3,\n\tTOUCH_PAN: 4,\n\tTOUCH_DOLLY_PAN: 5,\n\tTOUCH_DOLLY_ROTATE: 6\n};\nconst _EPS = 0.000001;\n\n\n/**\n * Orbit controls allow the camera to orbit around a target.\n *\n * OrbitControls performs orbiting, dollying (zooming), and panning. Unlike {@link TrackballControls},\n * it maintains the \"up\" direction `object.up` (+Y by default).\n *\n * - Orbit: Left mouse / touch: one-finger move.\n * - Zoom: Middle mouse, or mousewheel / touch: two-finger spread or squish.\n * - Pan: Right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move.\n *\n * ```js\n * const controls = new OrbitControls( camera, renderer.domElement );\n *\n * // controls.update() must be called after any manual changes to the camera's transform\n * camera.position.set( 0, 20, 100 );\n * controls.update();\n *\n * function animate() {\n *\n * \t// required if controls.enableDamping or controls.autoRotate are set to true\n * \tcontrols.update();\n *\n * \trenderer.render( scene, camera );\n *\n * }\n * ```\n *\n * @augments Controls\n * @three_import import { OrbitControls } from 'three/addons/controls/OrbitControls.js';\n */\nclass OrbitControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.state = _STATE.NONE;\n\n\t\t/**\n\t\t * The focus point of the controls, the `object` orbits around this.\n\t\t * It can be updated manually at any point to change the focus of the controls.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\n\t\t/**\n\t\t * The focus point of the `minTargetRadius` and `maxTargetRadius` limits.\n\t\t * It can be updated manually at any point to change the center of interest\n\t\t * for the `target`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.cursor = new Vector3();\n\n\t\t/**\n\t\t * How far you can dolly in (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t/**\n\t\t * How close you can get the target to the 3D `cursor`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minTargetRadius = 0;\n\n\t\t/**\n\t\t * How far you can move the target from the 3D `cursor`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxTargetRadius = Infinity;\n\n\t\t/**\n\t\t * How far you can orbit vertically, lower limit. Range is `[0, Math.PI]` radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minPolarAngle = 0;\n\n\t\t/**\n\t\t * How far you can orbit vertically, upper limit. Range is `[0, Math.PI]` radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Math.PI\n\t\t */\n\t\tthis.maxPolarAngle = Math.PI;\n\n\t\t/**\n\t\t * How far you can orbit horizontally, lower limit. If set, the interval `[ min, max ]`\n\t\t * must be a sub-interval of `[ - 2 PI, 2 PI ]`, with `( max - min < 2 PI )`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tthis.minAzimuthAngle = - Infinity;\n\n\t\t/**\n\t\t * How far you can orbit horizontally, upper limit. If set, the interval `[ min, max ]`\n\t\t * must be a sub-interval of `[ - 2 PI, 2 PI ]`, with `( max - min < 2 PI )`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tthis.maxAzimuthAngle = Infinity;\n\n\t\t/**\n\t\t * Set to `true` to enable damping (inertia), which can be used to give a sense of weight\n\t\t * to the controls. Note that if this is enabled, you must call `update()` in your animation\n\t\t * loop.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.enableDamping = false;\n\n\t\t/**\n\t\t * The damping inertia used if `enableDamping` is set to `true`.\n\t\t *\n\t\t * Note that for this to work, you must call `update()` in your animation loop.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.05\n\t\t */\n\t\tthis.dampingFactor = 0.05;\n\n\t\t/**\n\t\t * Enable or disable zooming (dollying) of the camera.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableZoom = true;\n\n\t\t/**\n\t\t * Speed of zooming / dollying.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t/**\n\t\t * Enable or disable horizontal and vertical rotation of the camera.\n\t\t *\n\t\t * Note that it is possible to disable a single axis by setting the min and max of the\n\t\t * `minPolarAngle` or `minAzimuthAngle` to the same value, which will cause the vertical\n\t\t * or horizontal rotation to be fixed at that value.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableRotate = true;\n\n\t\t/**\n\t\t * Speed of rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t/**\n\t\t * How fast to rotate the camera when the keyboard is used.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.keyRotateSpeed = 1.0;\n\n\t\t/**\n\t\t * Enable or disable camera panning.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enablePan = true;\n\n\t\t/**\n\t\t * Speed of panning.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.panSpeed = 1.0;\n\n\t\t/**\n\t\t * Defines how the camera's position is translated when panning. If `true`, the camera pans\n\t\t * in screen space. Otherwise, the camera pans in the plane orthogonal to the camera's up\n\t\t * direction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.screenSpacePanning = true;\n\n\t\t/**\n\t\t * How fast to pan the camera when the keyboard is used in\n\t\t * pixels per keypress.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 7\n\t\t */\n\t\tthis.keyPanSpeed = 7.0;\n\n\t\t/**\n\t\t * Setting this property to `true` allows to zoom to the cursor's position.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.zoomToCursor = false;\n\n\t\t/**\n\t\t * Set to true to automatically rotate around the target\n\t\t *\n\t\t * Note that if this is enabled, you must call `update()` in your animation loop.\n\t\t * If you want the auto-rotate speed to be independent of the frame rate (the refresh\n\t\t * rate of the display), you must pass the time `deltaTime`, in seconds, to `update()`.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.autoRotate = false;\n\n\t\t/**\n\t\t * How fast to rotate around the target if `autoRotate` is `true`. The default  equates to 30 seconds\n\t\t * per orbit at 60fps.\n\t\t *\n\t\t * Note that if `autoRotate` is enabled, you must call `update()` in your animation loop.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 2\n\t\t */\n\t\tthis.autoRotateSpeed = 2.0;\n\n\t\t/**\n\t\t * This object contains references to the keycodes for controlling camera panning.\n\t\t *\n\t\t * ```js\n\t\t * controls.keys = {\n\t\t * \tLEFT: 'ArrowLeft', //left arrow\n\t\t * \tUP: 'ArrowUp', // up arrow\n\t\t * \tRIGHT: 'ArrowRight', // right arrow\n\t\t * \tBOTTOM: 'ArrowDown' // down arrow\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.ROTATE,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t/**\n\t\t * This object contains references to the touch actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tONE: THREE.TOUCH.ROTATE,\n\t\t * \tTWO: THREE.TOUCH.DOLLY_PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target0 = this.target.clone();\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.position0 = this.object.position.clone();\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t// internals\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastQuaternion = new Quaternion();\n\t\tthis._lastTargetPosition = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tthis._quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tthis._quatInverse = this._quat.clone().invert();\n\n\t\t// current position in spherical coordinates\n\t\tthis._spherical = new Spherical();\n\t\tthis._sphericalDelta = new Spherical();\n\n\t\tthis._scale = 1;\n\t\tthis._panOffset = new Vector3();\n\n\t\tthis._rotateStart = new Vector2();\n\t\tthis._rotateEnd = new Vector2();\n\t\tthis._rotateDelta = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\t\tthis._panDelta = new Vector2();\n\n\t\tthis._dollyStart = new Vector2();\n\t\tthis._dollyEnd = new Vector2();\n\t\tthis._dollyDelta = new Vector2();\n\n\t\tthis._dollyDirection = new Vector3();\n\t\tthis._mouse = new Vector2();\n\t\tthis._performCursorZoom = false;\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\tthis._controlActive = false;\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\n\t\tthis._interceptControlDown = interceptControlDown.bind( this );\n\t\tthis._interceptControlUp = interceptControlUp.bind( this );\n\n\t\t//\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect( this.domElement );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.addEventListener( 'keydown', this._interceptControlDown, { passive: true, capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.stopListenToKeyEvents();\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.removeEventListener( 'keydown', this._interceptControlDown, { capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Get the current vertical rotation, in radians.\n\t *\n\t * @return {number} The current vertical rotation, in radians.\n\t */\n\tgetPolarAngle() {\n\n\t\treturn this._spherical.phi;\n\n\t}\n\n\t/**\n\t * Get the current horizontal rotation, in radians.\n\t *\n\t * @return {number} The current horizontal rotation, in radians.\n\t */\n\tgetAzimuthalAngle() {\n\n\t\treturn this._spherical.theta;\n\n\t}\n\n\t/**\n\t * Returns the distance from the camera to the target.\n\t *\n\t * @return {number} The distance from the camera to the target.\n\t */\n\tgetDistance() {\n\n\t\treturn this.object.position.distanceTo( this.target );\n\n\t}\n\n\t/**\n\t * Adds key event listeners to the given DOM element.\n\t * `window` is a recommended argument for using this method.\n\t *\n\t * @param {HTMLElement} domElement - The DOM element\n\t */\n\tlistenToKeyEvents( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', this._onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t}\n\n\t/**\n\t * Removes the key event listener previously defined with `listenToKeyEvents()`.\n\t */\n\tstopListenToKeyEvents() {\n\n\t\tif ( this._domElementKeyEvents !== null ) {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', this._onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Save the current state of the controls. This can later be recovered with `reset()`.\n\t */\n\tsaveState() {\n\n\t\tthis.target0.copy( this.target );\n\t\tthis.position0.copy( this.object.position );\n\t\tthis.zoom0 = this.object.zoom;\n\n\t}\n\n\t/**\n\t * Reset the controls to their state from either the last time the `saveState()`\n\t * was called, or the initial state.\n\t */\n\treset() {\n\n\t\tthis.target.copy( this.target0 );\n\t\tthis.object.position.copy( this.position0 );\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis.update();\n\n\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tupdate( deltaTime = null ) {\n\n\t\tconst position = this.object.position;\n\n\t\t_v.copy( position ).sub( this.target );\n\n\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t_v.applyQuaternion( this._quat );\n\n\t\t// angle from z-axis around y-axis\n\t\tthis._spherical.setFromVector3( _v );\n\n\t\tif ( this.autoRotate && this.state === _STATE.NONE ) {\n\n\t\t\tthis._rotateLeft( this._getAutoRotationAngle( deltaTime ) );\n\n\t\t}\n\n\t\tif ( this.enableDamping ) {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta * this.dampingFactor;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi * this.dampingFactor;\n\n\t\t} else {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi;\n\n\t\t}\n\n\t\t// restrict theta to be between desired limits\n\n\t\tlet min = this.minAzimuthAngle;\n\t\tlet max = this.maxAzimuthAngle;\n\n\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\tif ( min < - Math.PI ) min += _twoPI; else if ( min > Math.PI ) min -= _twoPI;\n\n\t\t\tif ( max < - Math.PI ) max += _twoPI; else if ( max > Math.PI ) max -= _twoPI;\n\n\t\t\tif ( min <= max ) {\n\n\t\t\t\tthis._spherical.theta = Math.max( min, Math.min( max, this._spherical.theta ) );\n\n\t\t\t} else {\n\n\t\t\t\tthis._spherical.theta = ( this._spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\tMath.max( min, this._spherical.theta ) :\n\t\t\t\t\tMath.min( max, this._spherical.theta );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restrict phi to be between desired limits\n\t\tthis._spherical.phi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, this._spherical.phi ) );\n\n\t\tthis._spherical.makeSafe();\n\n\n\t\t// move target to panned location\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis.target.addScaledVector( this._panOffset, this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis.target.add( this._panOffset );\n\n\t\t}\n\n\t\t// Limit the target distance from the cursor to create a sphere around the center of interest\n\t\tthis.target.sub( this.cursor );\n\t\tthis.target.clampLength( this.minTargetRadius, this.maxTargetRadius );\n\t\tthis.target.add( this.cursor );\n\n\t\tlet zoomChanged = false;\n\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t// we adjust zoom later in these cases\n\t\tif ( this.zoomToCursor && this._performCursorZoom || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius );\n\n\t\t} else {\n\n\t\t\tconst prevRadius = this._spherical.radius;\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius * this._scale );\n\t\t\tzoomChanged = prevRadius != this._spherical.radius;\n\n\t\t}\n\n\t\t_v.setFromSpherical( this._spherical );\n\n\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t_v.applyQuaternion( this._quatInverse );\n\n\t\tposition.copy( this.target ).add( _v );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis._sphericalDelta.theta *= ( 1 - this.dampingFactor );\n\t\t\tthis._sphericalDelta.phi *= ( 1 - this.dampingFactor );\n\n\t\t\tthis._panOffset.multiplyScalar( 1 - this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis._sphericalDelta.set( 0, 0, 0 );\n\n\t\t\tthis._panOffset.set( 0, 0, 0 );\n\n\t\t}\n\n\t\t// adjust camera position\n\t\tif ( this.zoomToCursor && this._performCursorZoom ) {\n\n\t\t\tlet newRadius = null;\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t// this method avoids floating point error\n\t\t\t\tconst prevRadius = _v.length();\n\t\t\t\tnewRadius = this._clampDistance( prevRadius * this._scale );\n\n\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\tthis.object.position.addScaledVector( this._dollyDirection, radiusDelta );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tzoomChanged = !! radiusDelta;\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\tconst mouseBefore = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseBefore.unproject( this.object );\n\n\t\t\t\tconst prevZoom = this.object.zoom;\n\t\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\tzoomChanged = prevZoom !== this.object.zoom;\n\n\t\t\t\tconst mouseAfter = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseAfter.unproject( this.object );\n\n\t\t\t\tthis.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tnewRadius = _v.length();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\tthis.zoomToCursor = false;\n\n\t\t\t}\n\n\t\t\t// handle the placement of the target\n\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\tthis.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t.transformDirection( this.object.matrix )\n\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t.add( this.object.position );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t_ray.origin.copy( this.object.position );\n\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( this.object.matrix );\n\n\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t// extremely large values\n\t\t\t\t\tif ( Math.abs( this.object.up.dot( _ray.direction ) ) < _TILT_LIMIT ) {\n\n\t\t\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( this.object.up, this.target );\n\t\t\t\t\t\t_ray.intersectPlane( _plane, this.target );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tconst prevZoom = this.object.zoom;\n\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\n\t\t\tif ( prevZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._scale = 1;\n\t\tthis._performCursorZoom = false;\n\n\t\t// update condition is:\n\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\tif ( zoomChanged ||\n\t\t\tthis._lastPosition.distanceToSquared( this.object.position ) > _EPS ||\n\t\t\t8 * ( 1 - this._lastQuaternion.dot( this.object.quaternion ) ) > _EPS ||\n\t\t\tthis._lastTargetPosition.distanceToSquared( this.target ) > _EPS ) {\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\tthis._lastQuaternion.copy( this.object.quaternion );\n\t\t\tthis._lastTargetPosition.copy( this.target );\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_getAutoRotationAngle( deltaTime ) {\n\n\t\tif ( deltaTime !== null ) {\n\n\t\t\treturn ( _twoPI / 60 * this.autoRotateSpeed ) * deltaTime;\n\n\t\t} else {\n\n\t\t\treturn _twoPI / 60 / 60 * this.autoRotateSpeed;\n\n\t\t}\n\n\t}\n\n\t_getZoomScale( delta ) {\n\n\t\tconst normalizedDelta = Math.abs( delta * 0.01 );\n\t\treturn Math.pow( 0.95, this.zoomSpeed * normalizedDelta );\n\n\t}\n\n\t_rotateLeft( angle ) {\n\n\t\tthis._sphericalDelta.theta -= angle;\n\n\t}\n\n\t_rotateUp( angle ) {\n\n\t\tthis._sphericalDelta.phi -= angle;\n\n\t}\n\n\t_panLeft( distance, objectMatrix ) {\n\n\t\t_v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t_v.multiplyScalar( - distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t_panUp( distance, objectMatrix ) {\n\n\t\tif ( this.screenSpacePanning === true ) {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t} else {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t_v.crossVectors( this.object.up, _v );\n\n\t\t}\n\n\t\t_v.multiplyScalar( distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\t_pan( deltaX, deltaY ) {\n\n\t\tconst element = this.domElement;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t// perspective\n\t\t\tconst position = this.object.position;\n\t\t\t_v.copy( position ).sub( this.target );\n\t\t\tlet targetDistance = _v.length();\n\n\t\t\t// half of the fov is center to top of screen\n\t\t\ttargetDistance *= Math.tan( ( this.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\tthis._panLeft( 2 * deltaX * targetDistance / element.clientHeight, this.object.matrix );\n\t\t\tthis._panUp( 2 * deltaY * targetDistance / element.clientHeight, this.object.matrix );\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t// orthographic\n\t\t\tthis._panLeft( deltaX * ( this.object.right - this.object.left ) / this.object.zoom / element.clientWidth, this.object.matrix );\n\t\t\tthis._panUp( deltaY * ( this.object.top - this.object.bottom ) / this.object.zoom / element.clientHeight, this.object.matrix );\n\n\t\t} else {\n\n\t\t\t// camera neither orthographic nor perspective\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\tthis.enablePan = false;\n\n\t\t}\n\n\t}\n\n\t_dollyOut( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale /= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_dollyIn( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale *= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_updateZoomParameters( x, y ) {\n\n\t\tif ( ! this.zoomToCursor ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._performCursorZoom = true;\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\t\tconst dx = x - rect.left;\n\t\tconst dy = y - rect.top;\n\t\tconst w = rect.width;\n\t\tconst h = rect.height;\n\n\t\tthis._mouse.x = ( dx / w ) * 2 - 1;\n\t\tthis._mouse.y = - ( dy / h ) * 2 + 1;\n\n\t\tthis._dollyDirection.set( this._mouse.x, this._mouse.y, 1 ).unproject( this.object ).sub( this.object.position ).normalize();\n\n\t}\n\n\t_clampDistance( dist ) {\n\n\t\treturn Math.max( this.minDistance, Math.min( this.maxDistance, dist ) );\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\t_handleMouseDownRotate( event ) {\n\n\t\tthis._rotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownDolly( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientX );\n\t\tthis._dollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownPan( event ) {\n\n\t\tthis._panStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseMoveRotate( event ) {\n\n\t\tthis._rotateEnd.set( event.clientX, event.clientY );\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMoveDolly( event ) {\n\n\t\tthis._dollyEnd.set( event.clientX, event.clientY );\n\n\t\tthis._dollyDelta.subVectors( this._dollyEnd, this._dollyStart );\n\n\t\tif ( this._dollyDelta.y > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t} else if ( this._dollyDelta.y < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t}\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMovePan( event ) {\n\n\t\tthis._panEnd.set( event.clientX, event.clientY );\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseWheel( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientY );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( event.deltaY ) );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( event.deltaY ) );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\t_handleKeyDown( event ) {\n\n\t\tlet needsUpdate = false;\n\n\t\tswitch ( event.code ) {\n\n\t\t\tcase this.keys.UP:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateUp( _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( 0, this.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.BOTTOM:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateUp( - _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( 0, - this.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateLeft( _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( this.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.RIGHT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateLeft( - _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( - this.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.update();\n\n\t\t}\n\n\n\t}\n\n\t_handleTouchStartRotate( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._rotateStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartPan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyStart.set( 0, distance );\n\n\t}\n\n\t_handleTouchStartDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchStartPan( event );\n\n\t}\n\n\t_handleTouchStartDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchStartRotate( event );\n\n\t}\n\n\t_handleTouchMoveRotate( event ) {\n\n\t\tif ( this._pointers.length == 1 ) {\n\n\t\t\tthis._rotateEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t}\n\n\t_handleTouchMovePan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t}\n\n\t_handleTouchMoveDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyEnd.set( 0, distance );\n\n\t\tthis._dollyDelta.set( 0, Math.pow( this._dollyEnd.y / this._dollyStart.y, this.zoomSpeed ) );\n\n\t\tthis._dollyOut( this._dollyDelta.y );\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tconst centerX = ( event.pageX + position.x ) * 0.5;\n\t\tconst centerY = ( event.pageY + position.y ) * 0.5;\n\n\t\tthis._updateZoomParameters( centerX, centerY );\n\n\t}\n\n\t_handleTouchMoveDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchMovePan( event );\n\n\t}\n\n\t_handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchMoveRotate( event );\n\n\t}\n\n\t// pointers\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event.pointerId );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_isTrackingPointer( event ) {\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointerId = ( event.pointerId === this._pointers[ 0 ] ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointerId ];\n\n\t}\n\n\t//\n\n\t_customWheelEvent( event ) {\n\n\t\tconst mode = event.deltaMode;\n\n\t\t// minimal wheel event altered to meet delta-zoom demand\n\t\tconst newEvent = {\n\t\t\tclientX: event.clientX,\n\t\t\tclientY: event.clientY,\n\t\t\tdeltaY: event.deltaY,\n\t\t};\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 1: // LINE_MODE\n\t\t\t\tnewEvent.deltaY *= 16;\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // PAGE_MODE\n\t\t\t\tnewEvent.deltaY *= 100;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// detect if event was triggered by pinching\n\t\tif ( event.ctrlKey && ! this._controlActive ) {\n\n\t\t\tnewEvent.deltaY *= 10;\n\n\t\t}\n\n\t\treturn newEvent;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tif ( this._isTrackingPointer( event ) ) return;\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tthis._removePointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\n\t\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tconst pointerId = this._pointers[ 0 ];\n\t\t\tconst position = this._pointerPositions[ pointerId ];\n\n\t\t\t// minimal placeholder event - allows state correction on pointer-up\n\t\t\tthis._onTouchStart( { pointerId: pointerId, pageX: position.x, pageY: position.y } );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseDownDolly( event );\n\n\t\t\tthis.state = _STATE.DOLLY;\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onMouseMove( event ) {\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleMouseMoveRotate( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseMoveDolly( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleMouseMovePan( event );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false || this.enableZoom === false || this.state !== _STATE.NONE ) return;\n\n\tevent.preventDefault();\n\n\tthis.dispatchEvent( _startEvent );\n\n\tthis._handleMouseWheel( this._customWheelEvent( event ) );\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tthis._handleKeyDown( event );\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\n\t\t\tswitch ( this.touches.ONE ) {\n\n\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tswitch ( this.touches.TWO ) {\n\n\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.TOUCH_ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMovePan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_PAN:\n\n\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyPan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction interceptControlDown( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = true;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.addEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nfunction interceptControlUp( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = false;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.removeEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nexport { OrbitControls };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4937, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/libs/fflate.module.js"],"sourcesContent":["/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\nversion 0.8.2\n*/\n\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7712, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/curves/NURBSUtils.js"],"sourcesContent":["import {\n\tVector3,\n\tVector4\n} from 'three';\n\n/**\n * @module NURBSUtils\n * @three_import import * as NURBSUtils from 'three/addons/curves/NURBSUtils.js';\n */\n\n/**\n * Finds knot vector span.\n *\n * @param {number} p - The degree.\n * @param {number} u - The parametric value.\n * @param {Array<number>} U - The knot vector.\n * @return {number} The span.\n */\nfunction findSpan( p, u, U ) {\n\n\tconst n = U.length - p - 1;\n\n\tif ( u >= U[ n ] ) {\n\n\t\treturn n - 1;\n\n\t}\n\n\tif ( u <= U[ p ] ) {\n\n\t\treturn p;\n\n\t}\n\n\tlet low = p;\n\tlet high = n;\n\tlet mid = Math.floor( ( low + high ) / 2 );\n\n\twhile ( u < U[ mid ] || u >= U[ mid + 1 ] ) {\n\n\t\tif ( u < U[ mid ] ) {\n\n\t\t\thigh = mid;\n\n\t\t} else {\n\n\t\t\tlow = mid;\n\n\t\t}\n\n\t\tmid = Math.floor( ( low + high ) / 2 );\n\n\t}\n\n\treturn mid;\n\n}\n\n/**\n * Calculates basis functions. See The NURBS Book, page 70, algorithm A2.2.\n *\n * @param {number} span - The span in which `u` lies.\n * @param {number} u - The parametric value.\n * @param {number} p - The degree.\n * @param {Array<number>} U - The knot vector.\n * @return {Array<number>} Array[p+1] with basis functions values.\n */\nfunction calcBasisFunctions( span, u, p, U ) {\n\n\tconst N = [];\n\tconst left = [];\n\tconst right = [];\n\tN[ 0 ] = 1.0;\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tconst temp = N[ r ] / ( rv + lv );\n\t\t\tN[ r ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tN[ j ] = saved;\n\n\t}\n\n\treturn N;\n\n}\n\n/**\n * Calculates B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n *\n * @param {number} p - The degree of the B-Spline.\n * @param {Array<number>} U - The knot vector.\n * @param {Array<Vector4>} P - The control points\n * @param {number} u - The parametric point.\n * @return {Vector4} The point for given `u`.\n */\nfunction calcBSplinePoint( p, U, P, u ) {\n\n\tconst span = findSpan( p, u, U );\n\tconst N = calcBasisFunctions( span, u, p, U );\n\tconst C = new Vector4( 0, 0, 0, 0 );\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tconst point = P[ span - p + j ];\n\t\tconst Nj = N[ j ];\n\t\tconst wNj = point.w * Nj;\n\t\tC.x += point.x * wNj;\n\t\tC.y += point.y * wNj;\n\t\tC.z += point.z * wNj;\n\t\tC.w += point.w * Nj;\n\n\t}\n\n\treturn C;\n\n}\n\n/**\n * Calculates basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n *\n * @param {number} span - The span in which `u` lies.\n * @param {number} u - The parametric point.\n * @param {number} p - The degree.\n * @param {number} n - number of derivatives to calculate\n * @param {Array<number>} U - The knot vector.\n * @return {Array<Array<number>>} An array[n+1][p+1] with basis functions derivatives.\n */\nfunction calcBasisFunctionDerivatives( span, u, p, n, U ) {\n\n\tconst zeroArr = [];\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tzeroArr[ i ] = 0.0;\n\n\tconst ders = [];\n\n\tfor ( let i = 0; i <= n; ++ i )\n\t\tders[ i ] = zeroArr.slice( 0 );\n\n\tconst ndu = [];\n\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tndu[ i ] = zeroArr.slice( 0 );\n\n\tndu[ 0 ][ 0 ] = 1.0;\n\n\tconst left = zeroArr.slice( 0 );\n\tconst right = zeroArr.slice( 0 );\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tndu[ j ][ r ] = rv + lv;\n\n\t\t\tconst temp = ndu[ r ][ j - 1 ] / ndu[ j ][ r ];\n\t\t\tndu[ r ][ j ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tndu[ j ][ j ] = saved;\n\n\t}\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tders[ 0 ][ j ] = ndu[ j ][ p ];\n\n\t}\n\n\tfor ( let r = 0; r <= p; ++ r ) {\n\n\t\tlet s1 = 0;\n\t\tlet s2 = 1;\n\n\t\tconst a = [];\n\t\tfor ( let i = 0; i <= p; ++ i ) {\n\n\t\t\ta[ i ] = zeroArr.slice( 0 );\n\n\t\t}\n\n\t\ta[ 0 ][ 0 ] = 1.0;\n\n\t\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\t\tlet d = 0.0;\n\t\t\tconst rk = r - k;\n\t\t\tconst pk = p - k;\n\n\t\t\tif ( r >= k ) {\n\n\t\t\t\ta[ s2 ][ 0 ] = a[ s1 ][ 0 ] / ndu[ pk + 1 ][ rk ];\n\t\t\t\td = a[ s2 ][ 0 ] * ndu[ rk ][ pk ];\n\n\t\t\t}\n\n\t\t\tconst j1 = ( rk >= - 1 ) ? 1 : - rk;\n\t\t\tconst j2 = ( r - 1 <= pk ) ? k - 1 : p - r;\n\n\t\t\tfor ( let j = j1; j <= j2; ++ j ) {\n\n\t\t\t\ta[ s2 ][ j ] = ( a[ s1 ][ j ] - a[ s1 ][ j - 1 ] ) / ndu[ pk + 1 ][ rk + j ];\n\t\t\t\td += a[ s2 ][ j ] * ndu[ rk + j ][ pk ];\n\n\t\t\t}\n\n\t\t\tif ( r <= pk ) {\n\n\t\t\t\ta[ s2 ][ k ] = - a[ s1 ][ k - 1 ] / ndu[ pk + 1 ][ r ];\n\t\t\t\td += a[ s2 ][ k ] * ndu[ r ][ pk ];\n\n\t\t\t}\n\n\t\t\tders[ k ][ r ] = d;\n\n\t\t\tconst j = s1;\n\t\t\ts1 = s2;\n\t\t\ts2 = j;\n\n\t\t}\n\n\t}\n\n\tlet r = p;\n\n\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\t\tders[ k ][ j ] *= r;\n\n\t\t}\n\n\t\tr *= p - k;\n\n\t}\n\n\treturn ders;\n\n}\n\n/**\n * Calculates derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n *\n * @param {number} p - The degree.\n * @param {Array<number>} U - The knot vector.\n * @param {Array<Vector4>} P - The control points\n * @param {number} u - The parametric point.\n * @param {number} nd - The number of derivatives.\n * @return {Array<Vector4>} An array[d+1] with derivatives.\n */\nfunction calcBSplineDerivatives( p, U, P, u, nd ) {\n\n\tconst du = nd < p ? nd : p;\n\tconst CK = [];\n\tconst span = findSpan( p, u, U );\n\tconst nders = calcBasisFunctionDerivatives( span, u, p, du, U );\n\tconst Pw = [];\n\n\tfor ( let i = 0; i < P.length; ++ i ) {\n\n\t\tconst point = P[ i ].clone();\n\t\tconst w = point.w;\n\n\t\tpoint.x *= w;\n\t\tpoint.y *= w;\n\t\tpoint.z *= w;\n\n\t\tPw[ i ] = point;\n\n\t}\n\n\tfor ( let k = 0; k <= du; ++ k ) {\n\n\t\tconst point = Pw[ span - p ].clone().multiplyScalar( nders[ k ][ 0 ] );\n\n\t\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\t\tpoint.add( Pw[ span - p + j ].clone().multiplyScalar( nders[ k ][ j ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = point;\n\n\t}\n\n\tfor ( let k = du + 1; k <= nd + 1; ++ k ) {\n\n\t\tCK[ k ] = new Vector4( 0, 0, 0 );\n\n\t}\n\n\treturn CK;\n\n}\n\n/**\n * Calculates \"K over I\".\n *\n * @param {number} k - The K value.\n * @param {number} i - The I value.\n * @return {number} k!/(i!(k-i)!)\n */\nfunction calcKoverI( k, i ) {\n\n\tlet nom = 1;\n\n\tfor ( let j = 2; j <= k; ++ j ) {\n\n\t\tnom *= j;\n\n\t}\n\n\tlet denom = 1;\n\n\tfor ( let j = 2; j <= i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\tfor ( let j = 2; j <= k - i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\treturn nom / denom;\n\n}\n\n/**\n * Calculates derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n *\n * @param {Array<Vector4>} Pders - Array with derivatives.\n * @return {Array<Vector3>} An array with derivatives for rational curve.\n */\nfunction calcRationalCurveDerivatives( Pders ) {\n\n\tconst nd = Pders.length;\n\tconst Aders = [];\n\tconst wders = [];\n\n\tfor ( let i = 0; i < nd; ++ i ) {\n\n\t\tconst point = Pders[ i ];\n\t\tAders[ i ] = new Vector3( point.x, point.y, point.z );\n\t\twders[ i ] = point.w;\n\n\t}\n\n\tconst CK = [];\n\n\tfor ( let k = 0; k < nd; ++ k ) {\n\n\t\tconst v = Aders[ k ].clone();\n\n\t\tfor ( let i = 1; i <= k; ++ i ) {\n\n\t\t\tv.sub( CK[ k - i ].clone().multiplyScalar( calcKoverI( k, i ) * wders[ i ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = v.divideScalar( wders[ 0 ] );\n\n\t}\n\n\treturn CK;\n\n}\n\n/**\n * Calculates NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n *\n * @param {number} p - The degree.\n * @param {Array<number>} U - The knot vector.\n * @param {Array<Vector4>} P - The control points in homogeneous space.\n * @param {number} u - The parametric point.\n * @param {number} nd - The number of derivatives.\n * @return {Array<Vector3>} array with derivatives for rational curve.\n */\nfunction calcNURBSDerivatives( p, U, P, u, nd ) {\n\n\tconst Pders = calcBSplineDerivatives( p, U, P, u, nd );\n\treturn calcRationalCurveDerivatives( Pders );\n\n}\n\n/**\n * Calculates a rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n *\n * @param {number} p - The first degree of B-Spline surface.\n * @param {number} q - The second degree of B-Spline surface.\n * @param {Array<number>} U - The first knot vector.\n * @param {Array<number>} V - The second knot vector.\n * @param {Array<Array<Vector4>>} P - The control points in homogeneous space.\n * @param {number} u - The first parametric point.\n * @param {number} v - The second parametric point.\n * @param {Vector3} target - The target vector.\n */\nfunction calcSurfacePoint( p, q, U, V, P, u, v, target ) {\n\n\tconst uspan = findSpan( p, u, U );\n\tconst vspan = findSpan( q, v, V );\n\tconst Nu = calcBasisFunctions( uspan, u, p, U );\n\tconst Nv = calcBasisFunctions( vspan, v, q, V );\n\tconst temp = [];\n\n\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\ttemp[ l ] = new Vector4( 0, 0, 0, 0 );\n\t\tfor ( let k = 0; k <= p; ++ k ) {\n\n\t\t\tconst point = P[ uspan - p + k ][ vspan - q + l ].clone();\n\t\t\tconst w = point.w;\n\t\t\tpoint.x *= w;\n\t\t\tpoint.y *= w;\n\t\t\tpoint.z *= w;\n\t\t\ttemp[ l ].add( point.multiplyScalar( Nu[ k ] ) );\n\n\t\t}\n\n\t}\n\n\tconst Sw = new Vector4( 0, 0, 0, 0 );\n\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\tSw.add( temp[ l ].multiplyScalar( Nv[ l ] ) );\n\n\t}\n\n\tSw.divideScalar( Sw.w );\n\ttarget.set( Sw.x, Sw.y, Sw.z );\n\n}\n\n/**\n * Calculates a rational B-Spline volume point. See The NURBS Book, page 134, algorithm A4.3.\n *\n * @param {number} p - The first degree of B-Spline surface.\n * @param {number} q - The second degree of B-Spline surface.\n * @param {number} r - The third degree of B-Spline surface.\n * @param {Array<number>} U - The first knot vector.\n * @param {Array<number>} V - The second knot vector.\n * @param {Array<number>} W - The third knot vector.\n * @param {Array<Array<Array<Vector4>>>} P - The control points in homogeneous space.\n * @param {number} u - The first parametric point.\n * @param {number} v - The second parametric point.\n * @param {number} w - The third parametric point.\n * @param {Vector3} target - The target vector.\n */\nfunction calcVolumePoint( p, q, r, U, V, W, P, u, v, w, target ) {\n\n\tconst uspan = findSpan( p, u, U );\n\tconst vspan = findSpan( q, v, V );\n\tconst wspan = findSpan( r, w, W );\n\tconst Nu = calcBasisFunctions( uspan, u, p, U );\n\tconst Nv = calcBasisFunctions( vspan, v, q, V );\n\tconst Nw = calcBasisFunctions( wspan, w, r, W );\n\tconst temp = [];\n\n\tfor ( let m = 0; m <= r; ++ m ) {\n\n\t\ttemp[ m ] = [];\n\n\t\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\t\ttemp[ m ][ l ] = new Vector4( 0, 0, 0, 0 );\n\t\t\tfor ( let k = 0; k <= p; ++ k ) {\n\n\t\t\t\tconst point = P[ uspan - p + k ][ vspan - q + l ][ wspan - r + m ].clone();\n\t\t\t\tconst w = point.w;\n\t\t\t\tpoint.x *= w;\n\t\t\t\tpoint.y *= w;\n\t\t\t\tpoint.z *= w;\n\t\t\t\ttemp[ m ][ l ].add( point.multiplyScalar( Nu[ k ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tconst Sw = new Vector4( 0, 0, 0, 0 );\n\tfor ( let m = 0; m <= r; ++ m ) {\n\n\t\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\t\tSw.add( temp[ m ][ l ].multiplyScalar( Nw[ m ] ).multiplyScalar( Nv[ l ] ) );\n\n\t\t}\n\n\t}\n\n\tSw.divideScalar( Sw.w );\n\ttarget.set( Sw.x, Sw.y, Sw.z );\n\n}\n\nexport {\n\tfindSpan,\n\tcalcBasisFunctions,\n\tcalcBSplinePoint,\n\tcalcBasisFunctionDerivatives,\n\tcalcBSplineDerivatives,\n\tcalcKoverI,\n\tcalcRationalCurveDerivatives,\n\tcalcNURBSDerivatives,\n\tcalcSurfacePoint,\n\tcalcVolumePoint,\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8072, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/curves/NURBSCurve.js"],"sourcesContent":["import {\n\tCurve,\n\tVector3,\n\tVector4\n} from 'three';\nimport * as NURBSUtils from '../curves/NURBSUtils.js';\n\n/**\n * This class represents a NURBS curve.\n *\n * Implementation is based on `(x, y [, z=0 [, w=1]])` control points with `w=weight`.\n *\n * @augments Curve\n * @three_import import { NURBSCurve } from 'three/addons/curves/NURBSCurve.js';\n */\nclass NURBSCurve extends Curve {\n\n\t/**\n\t * Constructs a new NURBS curve.\n\t *\n\t * @param {number} degree - The NURBS degree.\n\t * @param {Array<number>} knots - The knots as a flat array of numbers.\n\t * @param {Array<Vector2|Vector3|Vector4>} controlPoints - An array holding control points.\n\t * @param {number} [startKnot] - Index of the start knot into the `knots` array.\n\t * @param {number} [endKnot] - Index of the end knot into the `knots` array.\n\t */\n\tconstructor( degree, knots, controlPoints, startKnot, endKnot ) {\n\n\t\tsuper();\n\n\t\tconst knotsLength = knots ? knots.length - 1 : 0;\n\t\tconst pointsLength = controlPoints ? controlPoints.length : 0;\n\n\t\t/**\n\t\t * The NURBS degree.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.degree = degree;\n\n\t\t/**\n\t\t * The knots as a flat array of numbers.\n\t\t *\n\t\t * @type {Array<number>}\n\t\t */\n\t\tthis.knots = knots;\n\n\t\t/**\n\t\t * An array of control points.\n\t\t *\n\t\t * @type {Array<Vector4>}\n\t\t */\n\t\tthis.controlPoints = [];\n\n\t\t/**\n\t\t * Index of the start knot into the `knots` array.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.startKnot = startKnot || 0;\n\n\t\t/**\n\t\t * Index of the end knot into the `knots` array.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.endKnot = endKnot || knotsLength;\n\n\t\tfor ( let i = 0; i < pointsLength; ++ i ) {\n\n\t\t\t// ensure Vector4 for control points\n\t\t\tconst point = controlPoints[ i ];\n\t\t\tthis.controlPoints[ i ] = new Vector4( point.x, point.y, point.z, point.w );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * This method returns a vector in 3D space for the given interpolation factor.\n\t *\n\t * @param {number} t - A interpolation factor representing a position on the curve. Must be in the range `[0,1]`.\n\t * @param {Vector3} [optionalTarget] - The optional target vector the result is written to.\n\t * @return {Vector3} The position on the curve.\n\t */\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst u = this.knots[ this.startKnot ] + t * ( this.knots[ this.endKnot ] - this.knots[ this.startKnot ] ); // linear mapping t->u\n\n\t\t// following results in (wx, wy, wz, w) homogeneous point\n\t\tconst hpoint = NURBSUtils.calcBSplinePoint( this.degree, this.knots, this.controlPoints, u );\n\n\t\tif ( hpoint.w !== 1.0 ) {\n\n\t\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n\t\t\thpoint.divideScalar( hpoint.w );\n\n\t\t}\n\n\t\treturn point.set( hpoint.x, hpoint.y, hpoint.z );\n\n\t}\n\n\t/**\n\t * Returns a unit vector tangent for the given interpolation factor.\n\t *\n\t * @param {number} t - The interpolation factor.\n\t * @param {Vector3} [optionalTarget] - The optional target vector the result is written to.\n\t * @return {Vector3} The tangent vector.\n\t */\n\tgetTangent( t, optionalTarget = new Vector3() ) {\n\n\t\tconst tangent = optionalTarget;\n\n\t\tconst u = this.knots[ 0 ] + t * ( this.knots[ this.knots.length - 1 ] - this.knots[ 0 ] );\n\t\tconst ders = NURBSUtils.calcNURBSDerivatives( this.degree, this.knots, this.controlPoints, u, 1 );\n\t\ttangent.copy( ders[ 1 ] ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.degree = this.degree;\n\t\tdata.knots = [ ...this.knots ];\n\t\tdata.controlPoints = this.controlPoints.map( p => p.toArray() );\n\t\tdata.startKnot = this.startKnot;\n\t\tdata.endKnot = this.endKnot;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.degree = json.degree;\n\t\tthis.knots = [ ...json.knots ];\n\t\tthis.controlPoints = json.controlPoints.map( p => new Vector4( p[ 0 ], p[ 1 ], p[ 2 ], p[ 3 ] ) );\n\t\tthis.startKnot = json.startKnot;\n\t\tthis.endKnot = json.endKnot;\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { NURBSCurve };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8189, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/loaders/FBXLoader.js"],"sourcesContent":["import {\n\tAmbientLight,\n\tAnimationClip,\n\tBone,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tColorManagement,\n\tDirectionalLight,\n\tEquirectangularReflectionMapping,\n\tEuler,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLine,\n\tLineBasicMaterial,\n\tLoader,\n\tLoaderUtils,\n\tMathUtils,\n\tMatrix3,\n\tMatrix4,\n\tMesh,\n\tMeshLambertMaterial,\n\tMeshPhongMaterial,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tPerspectiveCamera,\n\tPointLight,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSRGBColorSpace,\n\tShapeUtils,\n\tSkeleton,\n\tSkinnedMesh,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tUint16BufferAttribute,\n\tVector2,\n\tVector3,\n\tVector4,\n\tVectorKeyframeTrack\n} from 'three';\n\nimport * as fflate from '../libs/fflate.module.js';\nimport { NURBSCurve } from '../curves/NURBSCurve.js';\n\nlet fbxTree;\nlet connections;\nlet sceneGraph;\n\n/**\n * A loader for the FBX format.\n *\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format.\n * Versions lower than this may load but will probably have errors.\n *\n * Needs Support:\n * - Morph normals / blend shape normals\n *\n * FBX format references:\n * - [C++ SDK reference](https://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html)\n *\n * Binary format specification:\n * - [FBX binary file format specification](https://code.blender.org/2013/08/fbx-binary-file-format-specification/)\n *\n * ```js\n * const loader = new FBXLoader();\n * const object = await loader.loadAsync( 'models/fbx/stanford-bunny.fbx' );\n * scene.add( object );\n * ```\n *\n * @augments Loader\n * @three_import import { FBXLoader } from 'three/addons/loaders/FBXLoader.js';\n */\nclass FBXLoader extends Loader {\n\n\t/**\n\t * Constructs a new FBX loader.\n\t *\n\t * @param {LoadingManager} [manager] - The loading manager.\n\t */\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\t/**\n\t * Starts loading from the given URL and passes the loaded FBX asset\n\t * to the `onLoad()` callback.\n\t *\n\t * @param {string} url - The path/URL of the file to be loaded. This can also be a data URI.\n\t * @param {function(Group)} onLoad - Executed when the loading process has been finished.\n\t * @param {onProgressCallback} onProgress - Executed while the loading is in progress.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( scope.path === '' ) ? LoaderUtils.extractUrlBase( url ) : scope.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( buffer, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/**\n\t * Parses the given FBX data and returns the resulting group.\n\t *\n\t * @param {ArrayBuffer} FBXBuffer - The raw FBX data as an array buffer.\n\t * @param {string} path - The URL base path.\n\t * @return {Group} An object representing the parsed asset.\n\t */\n\tparse( FBXBuffer, path ) {\n\n\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t} else {\n\n\t\t\tconst FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t}\n\n\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t}\n\n\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t}\n\n\t\t// console.log( fbxTree );\n\n\t\tconst textureLoader = new TextureLoader( this.manager ).setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\treturn new FBXTreeParser( textureLoader, this.manager ).parse( fbxTree );\n\n\t}\n\n}\n\n// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\nclass FBXTreeParser {\n\n\tconstructor( textureLoader, manager ) {\n\n\t\tthis.textureLoader = textureLoader;\n\t\tthis.manager = manager;\n\n\t}\n\n\tparse() {\n\n\t\tconnections = this.parseConnections();\n\n\t\tconst images = this.parseImages();\n\t\tconst textures = this.parseTextures( images );\n\t\tconst materials = this.parseMaterials( textures );\n\t\tconst deformers = this.parseDeformers();\n\t\tconst geometryMap = new GeometryParser().parse( deformers );\n\n\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\treturn sceneGraph;\n\n\t}\n\n\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t// and details the connection type\n\tparseConnections() {\n\n\t\tconst connectionMap = new Map();\n\n\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\tconst rawConnections = fbxTree.Connections.connections;\n\n\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\tconst fromID = rawConnection[ 0 ];\n\t\t\t\tconst toID = rawConnection[ 1 ];\n\t\t\t\tconst relationship = rawConnection[ 2 ];\n\n\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn connectionMap;\n\n\t}\n\n\t// Parse FBXTree.Objects.Video for embedded image data\n\t// These images are connected to textures in FBXTree.Objects.Textures\n\t// via FBXTree.Connections.\n\tparseImages() {\n\n\t\tconst images = {};\n\t\tconst blobs = {};\n\n\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\tconst videoNodes = fbxTree.Objects.Video;\n\n\t\t\tfor ( const nodeID in videoNodes ) {\n\n\t\t\t\tconst videoNode = videoNodes[ nodeID ];\n\n\t\t\t\tconst id = parseInt( nodeID );\n\n\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\tconst arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\tconst base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\tconst image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( const id in images ) {\n\n\t\t\tconst filename = images[ id ];\n\n\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\t// Parse embedded image data in FBXTree.Video.Content\n\tparseImage( videoNode ) {\n\n\t\tconst content = videoNode.Content;\n\t\tconst fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\tconst extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\tlet type;\n\n\t\tswitch ( extension ) {\n\n\t\t\tcase 'bmp':\n\n\t\t\t\ttype = 'image/bmp';\n\t\t\t\tbreak;\n\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\n\t\t\t\ttype = 'image/jpeg';\n\t\t\t\tbreak;\n\n\t\t\tcase 'png':\n\n\t\t\t\ttype = 'image/png';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tif':\n\n\t\t\t\ttype = 'image/tiff';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tga':\n\n\t\t\t\tif ( this.manager.getHandler( '.tga' ) === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, skipping ', fileName );\n\n\t\t\t\t}\n\n\t\t\t\ttype = 'image/tga';\n\t\t\t\tbreak;\n\n\t\t\tcase 'webp':\n\n\t\t\t\ttype = 'image/webp';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t} else { // Binary Format\n\n\t\t\tconst array = new Uint8Array( content );\n\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t}\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Texture\n\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t// to images in FBXTree.Objects.Video\n\tparseTextures( images ) {\n\n\t\tconst textureMap = new Map();\n\n\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\tconst textureNodes = fbxTree.Objects.Texture;\n\t\t\tfor ( const nodeID in textureNodes ) {\n\n\t\t\t\tconst texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textureMap;\n\n\t}\n\n\t// Parse individual node in FBXTree.Objects.Texture\n\tparseTexture( textureNode, images ) {\n\n\t\tconst texture = this.loadTexture( textureNode, images );\n\n\t\ttexture.ID = textureNode.id;\n\n\t\ttexture.name = textureNode.attrName;\n\n\t\tconst wrapModeU = textureNode.WrapModeU;\n\t\tconst wrapModeV = textureNode.WrapModeV;\n\n\t\tconst valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\tconst valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t// 0: repeat(default), 1: clamp\n\n\t\ttexture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\t\ttexture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\n\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\tconst values = textureNode.Scaling.value;\n\n\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t}\n\n\t\tif ( 'Translation' in textureNode ) {\n\n\t\t\tconst values = textureNode.Translation.value;\n\n\t\t\ttexture.offset.x = values[ 0 ];\n\t\t\ttexture.offset.y = values[ 1 ];\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t// load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n\tloadTexture( textureNode, images ) {\n\n\t\tconst extension = textureNode.FileName.split( '.' ).pop().toLowerCase();\n\n\t\tlet loader = this.manager.getHandler( `.${extension}` );\n\t\tif ( loader === null ) loader = this.textureLoader;\n\n\t\tconst loaderPath = loader.path;\n\n\t\tif ( ! loaderPath ) {\n\n\t\t\tloader.setPath( this.textureLoader.path );\n\n\t\t}\n\n\t\tconst children = connections.get( textureNode.id ).children;\n\n\t\tlet fileName;\n\n\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\tloader.setPath( undefined );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( fileName === undefined ) {\n\n\t\t\tconsole.warn( 'FBXLoader: Undefined filename, creating placeholder texture.' );\n\t\t\treturn new Texture();\n\n\t\t}\n\n\t\tconst texture = loader.load( fileName );\n\n\t\t// revert to initial path\n\t\tloader.setPath( loaderPath );\n\n\t\treturn texture;\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Material\n\tparseMaterials( textureMap ) {\n\n\t\tconst materialMap = new Map();\n\n\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\tconst materialNodes = fbxTree.Objects.Material;\n\n\t\t\tfor ( const nodeID in materialNodes ) {\n\n\t\t\t\tconst material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materialMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Material\n\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t// FBX format currently only supports Lambert and Phong shading models\n\tparseMaterial( materialNode, textureMap ) {\n\n\t\tconst ID = materialNode.id;\n\t\tconst name = materialNode.attrName;\n\t\tlet type = materialNode.ShadingModel;\n\n\t\t// Case where FBX wraps shading model in property object.\n\t\tif ( typeof type === 'object' ) {\n\n\t\t\ttype = type.value;\n\n\t\t}\n\n\t\t// Ignore unused materials which don't have any connections.\n\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\tconst parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\tlet material;\n\n\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\tcase 'phong':\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\t\t\tcase 'lambert':\n\t\t\t\tmaterial = new MeshLambertMaterial();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tmaterial.setValues( parameters );\n\t\tmaterial.name = name;\n\n\t\treturn material;\n\n\t}\n\n\t// Parse FBX material and return parameters suitable for a three.js material\n\t// Also parse the texture map and return any textures associated with the material\n\tparseParameters( materialNode, textureMap, ID ) {\n\n\t\tconst parameters = {};\n\n\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Diffuse ) {\n\n\t\t\tparameters.color = ColorManagement.colorSpaceToWorking( new Color().fromArray( materialNode.Diffuse.value ), SRGBColorSpace );\n\n\t\t} else if ( materialNode.DiffuseColor && ( materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\tparameters.color = ColorManagement.colorSpaceToWorking( new Color().fromArray( materialNode.DiffuseColor.value ), SRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Emissive ) {\n\n\t\t\tparameters.emissive = ColorManagement.colorSpaceToWorking( new Color().fromArray( materialNode.Emissive.value ), SRGBColorSpace );\n\n\t\t} else if ( materialNode.EmissiveColor && ( materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\tparameters.emissive = ColorManagement.colorSpaceToWorking( new Color().fromArray( materialNode.EmissiveColor.value ), SRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t}\n\n\t\t// the transparency handling is implemented based on Blender/Unity's approach: https://github.com/sobotka/blender-addons/blob/7d80f2f97161fc8e353a657b179b9aa1f8e5280b/io_scene_fbx/import_fbx.py#L1444-L1459\n\n\t\tparameters.opacity = 1 - ( materialNode.TransparencyFactor ? parseFloat( materialNode.TransparencyFactor.value ) : 0 );\n\n\t\tif ( parameters.opacity === 1 || parameters.opacity === 0 ) {\n\n\t\t\tparameters.opacity = ( materialNode.Opacity ? parseFloat( materialNode.Opacity.value ) : null );\n\n\t\t\tif ( parameters.opacity === null ) {\n\n\t\t\t\tparameters.opacity = 1 - ( materialNode.TransparentColor ? parseFloat( materialNode.TransparentColor.value[ 0 ] ) : 0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\tparameters.transparent = true;\n\n\t\t}\n\n\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Shininess ) {\n\n\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t}\n\n\t\tif ( materialNode.Specular ) {\n\n\t\t\tparameters.specular = ColorManagement.colorSpaceToWorking( new Color().fromArray( materialNode.Specular.value ), SRGBColorSpace );\n\n\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\tparameters.specular = ColorManagement.colorSpaceToWorking( new Color().fromArray( materialNode.SpecularColor.value ), SRGBColorSpace );\n\n\t\t}\n\n\t\tconst scope = this;\n\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\tconst type = child.relationship;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'Bump':\n\t\t\t\t\tparameters.bumpMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Maya|TEX_ao_map':\n\t\t\t\t\tparameters.aoMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DiffuseColor':\n\t\t\t\tcase 'Maya|TEX_color_map':\n\t\t\t\t\tparameters.map = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.map !== undefined ) {\n\n\t\t\t\t\t\tparameters.map.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\tparameters.displacementMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\tparameters.emissiveMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.emissiveMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.emissiveMap.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NormalMap':\n\t\t\t\tcase 'Maya|TEX_normal_map':\n\t\t\t\t\tparameters.normalMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\tparameters.envMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.envMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.envMap.mapping = EquirectangularReflectionMapping;\n\t\t\t\t\t\tparameters.envMap.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\tparameters.specularMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.specularMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.specularMap.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'TransparentColor':\n\t\t\t\tcase 'TransparencyFactor':\n\t\t\t\t\tparameters.alphaMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientColor':\n\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn parameters;\n\n\t}\n\n\t// get a texture from the textureMap for use by a material.\n\tgetTexture( textureMap, id ) {\n\n\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t}\n\n\t\treturn textureMap.get( id );\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Deformer\n\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\tparseDeformers() {\n\n\t\tconst skeletons = {};\n\t\tconst morphTargets = {};\n\n\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\tconst DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\tfor ( const nodeID in DeformerNodes ) {\n\n\t\t\t\tconst deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\tconst skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\tconst morphTarget = {\n\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t};\n\n\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tskeletons: skeletons,\n\t\t\tmorphTargets: morphTargets,\n\n\t\t};\n\n\t}\n\n\t// Parse single nodes in FBXTree.Objects.Deformer\n\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t// Each skin node represents a skeleton and each cluster node represents a bone\n\tparseSkeleton( relationships, deformerNodes ) {\n\n\t\tconst rawBones = [];\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst boneNode = deformerNodes[ child.ID ];\n\n\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\tconst rawBone = {\n\n\t\t\t\tID: child.ID,\n\t\t\t\tindices: [],\n\t\t\t\tweights: [],\n\t\t\t\ttransformLink: new Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t// transform: new Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t// linkMode: boneNode.Mode,\n\n\t\t\t};\n\n\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t}\n\n\t\t\trawBones.push( rawBone );\n\n\t\t} );\n\n\t\treturn {\n\n\t\t\trawBones: rawBones,\n\t\t\tbones: []\n\n\t\t};\n\n\t}\n\n\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\tparseMorphTargets( relationships, deformerNodes ) {\n\n\t\tconst rawMorphTargets = [];\n\n\t\tfor ( let i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\tconst child = relationships.children[ i ];\n\n\t\t\tconst morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\tconst rawMorphTarget = {\n\n\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\tid: morphTargetNode.id,\n\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t};\n\n\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\trawMorphTarget.geoID = connections.get( parseInt( child.ID ) ).children.filter( function ( child ) {\n\n\t\t\t\treturn child.relationship === undefined;\n\n\t\t\t} )[ 0 ].ID;\n\n\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t}\n\n\t\treturn rawMorphTargets;\n\n\t}\n\n\t// create the main Group() to be returned by the loader\n\tparseScene( deformers, geometryMap, materialMap ) {\n\n\t\tsceneGraph = new Group();\n\n\t\tconst modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tconst scope = this;\n\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\tconst modelNode = modelNodes[ model.ID ];\n\t\t\tscope.setLookAtProperties( model, modelNode );\n\n\t\t\tconst parentConnections = connections.get( model.ID ).parents;\n\n\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\tconst parent = modelMap.get( connection.ID );\n\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t} );\n\n\t\t\tif ( model.parent === null ) {\n\n\t\t\t\tsceneGraph.add( model );\n\n\t\t\t}\n\n\n\t\t} );\n\n\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\tthis.addGlobalSceneSettings();\n\n\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\tif ( node.userData.transformData ) {\n\n\t\t\t\tif ( node.parent ) {\n\n\t\t\t\t\tnode.userData.transformData.parentMatrix = node.parent.matrix;\n\t\t\t\t\tnode.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\n\n\t\t\t\t}\n\n\t\t\t\tconst transform = generateTransform( node.userData.transformData );\n\n\t\t\t\tnode.applyMatrix4( transform );\n\t\t\t\tnode.updateWorldMatrix();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tconst animations = new AnimationParser().parse();\n\n\t\t// if all the models where already combined in a single group, just return that\n\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t}\n\n\t\tsceneGraph.animations = animations;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.Model\n\tparseModels( skeletons, geometryMap, materialMap ) {\n\n\t\tconst modelMap = new Map();\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tfor ( const nodeID in modelNodes ) {\n\n\t\t\tconst id = parseInt( nodeID );\n\t\t\tconst node = modelNodes[ nodeID ];\n\t\t\tconst relationships = connections.get( id );\n\n\t\t\tlet model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\tif ( ! model ) {\n\n\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'LimbNode':\n\t\t\t\t\tcase 'Root':\n\t\t\t\t\t\tmodel = new Bone();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Null':\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmodel = new Group();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tmodel.name = node.attrName ? PropertyBinding.sanitizeNodeName( node.attrName ) : '';\n\t\t\t\tmodel.userData.originalName = node.attrName;\n\n\t\t\t\tmodel.ID = id;\n\n\t\t\t}\n\n\t\t\tthis.getTransformData( model, node );\n\t\t\tmodelMap.set( id, model );\n\n\t\t}\n\n\t\treturn modelMap;\n\n\t}\n\n\tbuildSkeleton( relationships, skeletons, id, name ) {\n\n\t\tlet bone = null;\n\n\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\tfor ( const ID in skeletons ) {\n\n\t\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\tconst subBone = bone;\n\t\t\t\t\t\tbone = new Bone();\n\n\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n\t\t\t\t\t\tbone.name = name ? PropertyBinding.sanitizeNodeName( name ) : '';\n\t\t\t\t\t\tbone.userData.originalName = name;\n\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t// duplicate the bone here and add it as a child of the first bone\n\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn bone;\n\n\t}\n\n\t// create a PerspectiveCamera or OrthographicCamera\n\tcreateCamera( relationships ) {\n\n\t\tlet model;\n\t\tlet cameraAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tcameraAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type = 0;\n\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\ttype = 1;\n\n\t\t\t}\n\n\t\t\tlet nearClippingPlane = 1;\n\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t}\n\n\t\t\tlet farClippingPlane = 1000;\n\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t}\n\n\n\t\t\tlet width = window.innerWidth;\n\t\t\tlet height = window.innerHeight;\n\n\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t}\n\n\t\t\tconst aspect = width / height;\n\n\t\t\tlet fov = 45;\n\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t}\n\n\t\t\tconst focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Perspective\n\t\t\t\t\tmodel = new PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Orthographic cameras not supported yet.' );\n\t\t\t\t\tmodel = new Object3D();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\tmodel = new Object3D();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\t// Create a DirectionalLight, PointLight or SpotLight\n\tcreateLight( relationships ) {\n\n\t\tlet model;\n\t\tlet lightAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tlightAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( lightAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type;\n\n\t\t\t// LightType can be undefined for Point lights\n\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\ttype = 0;\n\n\t\t\t} else {\n\n\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t}\n\n\t\t\tlet color = 0xffffff;\n\n\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\tcolor = ColorManagement.colorSpaceToWorking( new Color().fromArray( lightAttribute.Color.value ), SRGBColorSpace );\n\n\t\t\t}\n\n\t\t\tlet intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t// light disabled\n\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\tintensity = 0;\n\n\t\t\t}\n\n\t\t\tlet distance = 0;\n\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\tdistance = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\tconst decay = 1;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Point\n\t\t\t\t\tmodel = new PointLight( color, intensity, distance, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Directional\n\t\t\t\t\tmodel = new DirectionalLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // Spot\n\t\t\t\t\tlet angle = Math.PI / 3;\n\n\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\tangle = MathUtils.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet penumbra = 0;\n\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\tpenumbra = MathUtils.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel = new SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.' );\n\t\t\t\t\tmodel = new PointLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\tmodel.castShadow = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateMesh( relationships, geometryMap, materialMap ) {\n\n\t\tlet model;\n\t\tlet geometry = null;\n\t\tlet material = null;\n\t\tconst materials = [];\n\n\t\t// get geometry and materials(s) from connections\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t}\n\n\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( materials.length > 1 ) {\n\n\t\t\tmaterial = materials;\n\n\t\t} else if ( materials.length > 0 ) {\n\n\t\t\tmaterial = materials[ 0 ];\n\n\t\t} else {\n\n\t\t\tmaterial = new MeshPhongMaterial( {\n\t\t\t\tname: Loader.DEFAULT_MATERIAL_NAME,\n\t\t\t\tcolor: 0xcccccc\n\t\t\t} );\n\t\t\tmaterials.push( material );\n\n\t\t}\n\n\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t\t// Sanitization: If geometry has groups, then it must match the provided material array.\n\t\t// If not, we need to clean up the `group.materialIndex` properties inside the groups and point at a (new) default material.\n\t\t// This isn't well defined; Unity creates default material, while Blender implicitly uses the previous material in the list.\n\t\tif ( geometry.groups.length > 0 ) {\n\n\t\t\tlet needsDefaultMaterial = false;\n\n\t\t\tfor ( let i = 0, il = geometry.groups.length; i < il; i ++ ) {\n\n\t\t\t\tconst group = geometry.groups[ i ];\n\n\t\t\t\tif ( group.materialIndex < 0 || group.materialIndex >= materials.length ) {\n\n\t\t\t\t\tgroup.materialIndex = materials.length;\n\t\t\t\t\tneedsDefaultMaterial = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( needsDefaultMaterial ) {\n\n\t\t\t\tconst defaultMaterial = new MeshPhongMaterial();\n\t\t\t\tmaterials.push( defaultMaterial );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\tmodel = new SkinnedMesh( geometry, material );\n\t\t\tmodel.normalizeSkinWeights();\n\n\t\t} else {\n\n\t\t\tmodel = new Mesh( geometry, material );\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateCurve( relationships, geometryMap ) {\n\n\t\tconst geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\treturn geo;\n\n\t\t}, null );\n\n\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\tconst material = new LineBasicMaterial( {\n\t\t\tname: Loader.DEFAULT_MATERIAL_NAME,\n\t\t\tcolor: 0x3300ff,\n\t\t\tlinewidth: 1\n\t\t} );\n\t\treturn new Line( geometry, material );\n\n\t}\n\n\t// parse the model node for transform data\n\tgetTransformData( model, modelNode ) {\n\n\t\tconst transformData = {};\n\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\telse transformData.eulerOrder = getEulerOrder( 0 );\n\n\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\n\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\tif ( 'ScalingOffset' in modelNode ) transformData.scalingOffset = modelNode.ScalingOffset.value;\n\t\tif ( 'ScalingPivot' in modelNode ) transformData.scalingPivot = modelNode.ScalingPivot.value;\n\n\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\tif ( 'RotationPivot' in modelNode ) transformData.rotationPivot = modelNode.RotationPivot.value;\n\n\t\tmodel.userData.transformData = transformData;\n\n\t}\n\n\tsetLookAtProperties( model, modelNode ) {\n\n\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\tconst children = connections.get( model.ID ).children;\n\n\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\tconst lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\tconst pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\tmodel.lookAt( new Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tbindSkeleton( skeletons, geometryMap, modelMap ) {\n\n\t\tconst bindMatrices = this.parsePoseNodes();\n\n\t\tfor ( const ID in skeletons ) {\n\n\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\tconst parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\tconst geoID = parent.ID;\n\t\t\t\t\tconst geoRelationships = connections.get( geoID );\n\n\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\tconst model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\tmodel.bind( new Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tparsePoseNodes() {\n\n\t\tconst bindMatrices = {};\n\n\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\tconst BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\tfor ( const nodeID in BindPoseNode ) {\n\n\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' && BindPoseNode[ nodeID ].NbPoseNodes > 0 ) {\n\n\t\t\t\t\tconst poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bindMatrices;\n\n\t}\n\n\taddGlobalSceneSettings() {\n\n\t\tif ( 'GlobalSettings' in fbxTree ) {\n\n\t\t\tif ( 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\t// Parse ambient color - if it's not set to black (default), create an ambient light\n\n\t\t\t\tconst ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\t\tconst r = ambientColor[ 0 ];\n\t\t\t\tconst g = ambientColor[ 1 ];\n\t\t\t\tconst b = ambientColor[ 2 ];\n\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\t\tconst color = new Color().setRGB( r, g, b, SRGBColorSpace );\n\t\t\t\t\tsceneGraph.add( new AmbientLight( color, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( 'UnitScaleFactor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\tsceneGraph.userData.unitScaleFactor = fbxTree.GlobalSettings.UnitScaleFactor.value;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// parse Geometry data from FBXTree and return map of BufferGeometries\nclass GeometryParser {\n\n\tconstructor() {\n\n\t\tthis.negativeMaterialIndices = false;\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Geometry\n\tparse( deformers ) {\n\n\t\tconst geometryMap = new Map();\n\n\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\tconst geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\tfor ( const nodeID in geoNodes ) {\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\tconst geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// report warnings\n\n\t\tif ( this.negativeMaterialIndices === true ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected.' );\n\n\t\t}\n\n\t\treturn geometryMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Geometry\n\tparseGeometry( relationships, geoNode, deformers ) {\n\n\t\tswitch ( geoNode.attrType ) {\n\n\t\t\tcase 'Mesh':\n\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\tbreak;\n\n\t\t\tcase 'NurbsCurve':\n\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\tparseMeshGeometry( relationships, geoNode, deformers ) {\n\n\t\tconst skeletons = deformers.skeletons;\n\t\tconst morphTargets = [];\n\n\t\tconst modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t} );\n\n\t\t// don't create geometry if it is not associated with any models\n\t\tif ( modelNodes.length === 0 ) return;\n\n\t\tconst skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\treturn skeleton;\n\n\t\t}, null );\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( deformers.morphTargets[ child.ID ] !== undefined ) {\n\n\t\t\t\tmorphTargets.push( deformers.morphTargets[ child.ID ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\t// Assume one model and get the preRotation from that\n\t\t// if there is more than one model associated with the geometry this may cause problems\n\t\tconst modelNode = modelNodes[ 0 ];\n\n\t\tconst transformData = {};\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\tconst transform = generateTransform( transformData );\n\n\t\treturn this.genGeometry( geoNode, skeleton, morphTargets, transform );\n\n\t}\n\n\t// Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n\tgenGeometry( geoNode, skeleton, morphTargets, preTransform ) {\n\n\t\tconst geo = new BufferGeometry();\n\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\tconst geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\tconst buffers = this.genBuffers( geoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tgeo.setAttribute( 'position', positionAttribute );\n\n\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\tgeo.setAttribute( 'color', new Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t}\n\n\t\tif ( skeleton ) {\n\n\t\t\tgeo.setAttribute( 'skinIndex', new Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\tgeo.setAttribute( 'skinWeight', new Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t// used later to bind the skeleton to the model\n\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t}\n\n\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( preTransform );\n\n\t\t\tconst normalAttribute = new Float32BufferAttribute( buffers.normal, 3 );\n\t\t\tnormalAttribute.applyNormalMatrix( normalMatrix );\n\n\t\t\tgeo.setAttribute( 'normal', normalAttribute );\n\n\t\t}\n\n\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\tconst name = i === 0 ? 'uv' : `uv${ i }`;\n\n\t\t\tgeo.setAttribute( name, new Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t} );\n\n\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\tlet prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\tlet startIndex = 0;\n\n\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\tconst lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\tconst lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t// using one of them\n\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.addMorphTargets( geo, geoNode, morphTargets, preTransform );\n\n\t\treturn geo;\n\n\t}\n\n\tparseGeoNode( geoNode, skeleton ) {\n\n\t\tconst geoInfo = {};\n\n\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\tif ( geoNode.LayerElementColor && geoNode.LayerElementColor[ 0 ].Colors ) {\n\n\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\tgeoInfo.uv = [];\n\n\t\t\tlet i = 0;\n\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\tif ( geoNode.LayerElementUV[ i ].UV ) {\n\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeoInfo.weightTable = {};\n\n\t\tif ( skeleton !== null ) {\n\n\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\tid: i,\n\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn geoInfo;\n\n\t}\n\n\tgenBuffers( geoInfo ) {\n\n\t\tconst buffers = {\n\t\t\tvertex: [],\n\t\t\tnormal: [],\n\t\t\tcolors: [],\n\t\t\tuvs: [],\n\t\t\tmaterialIndex: [],\n\t\t\tvertexWeights: [],\n\t\t\tweightsIndices: [],\n\t\t};\n\n\t\tlet polygonIndex = 0;\n\t\tlet faceLength = 0;\n\t\tlet displayedWeightsWarning = false;\n\n\t\t// these will hold data for a single face\n\t\tlet facePositionIndexes = [];\n\t\tlet faceNormals = [];\n\t\tlet faceColors = [];\n\t\tlet faceUVs = [];\n\t\tlet faceWeights = [];\n\t\tlet faceWeightIndices = [];\n\n\t\tconst scope = this;\n\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\tlet materialIndex;\n\t\t\tlet endOfFace = false;\n\n\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t// A cube with quad faces looks like this:\n\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t//  }\n\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\tendOfFace = true;\n\n\t\t\t}\n\n\t\t\tlet weightIndices = [];\n\t\t\tlet weights = [];\n\n\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t} );\n\n\n\t\t\t\t}\n\n\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\tconst Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\tlet currentWeight = weight;\n\t\t\t\t\t\tlet currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\tconst tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\tweights = Weight;\n\n\t\t\t\t}\n\n\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tmaterialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t\tif ( materialIndex < 0 ) {\n\n\t\t\t\t\tscope.negativeMaterialIndices = true;\n\t\t\t\t\tmaterialIndex = 0; // fallback\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfaceLength ++;\n\n\t\t\tif ( endOfFace ) {\n\n\t\t\t\tscope.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\tpolygonIndex ++;\n\t\t\t\tfaceLength = 0;\n\n\t\t\t\t// reset arrays for the next face\n\t\t\t\tfacePositionIndexes = [];\n\t\t\t\tfaceNormals = [];\n\t\t\t\tfaceColors = [];\n\t\t\t\tfaceUVs = [];\n\t\t\t\tfaceWeights = [];\n\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn buffers;\n\n\t}\n\n\t// See https://www.khronos.org/opengl/wiki/Calculating_a_Surface_Normal\n\tgetNormalNewell( vertices ) {\n\n\t\tconst normal = new Vector3( 0.0, 0.0, 0.0 );\n\n\t\tfor ( let i = 0; i < vertices.length; i ++ ) {\n\n\t\t\tconst current = vertices[ i ];\n\t\t\tconst next = vertices[ ( i + 1 ) % vertices.length ];\n\n\t\t\tnormal.x += ( current.y - next.y ) * ( current.z + next.z );\n\t\t\tnormal.y += ( current.z - next.z ) * ( current.x + next.x );\n\t\t\tnormal.z += ( current.x - next.x ) * ( current.y + next.y );\n\n\t\t}\n\n\t\tnormal.normalize();\n\n\t\treturn normal;\n\n\t}\n\n\tgetNormalTangentAndBitangent( vertices ) {\n\n\t\tconst normalVector = this.getNormalNewell( vertices );\n\t\t// Avoid up being equal or almost equal to normalVector\n\t\tconst up = Math.abs( normalVector.z ) > 0.5 ? new Vector3( 0.0, 1.0, 0.0 ) : new Vector3( 0.0, 0.0, 1.0 );\n\t\tconst tangent = up.cross( normalVector ).normalize();\n\t\tconst bitangent = normalVector.clone().cross( tangent ).normalize();\n\n\t\treturn {\n\t\t\tnormal: normalVector,\n\t\t\ttangent: tangent,\n\t\t\tbitangent: bitangent\n\t\t};\n\n\t}\n\n\tflattenVertex( vertex, normalTangent, normalBitangent ) {\n\n\t\treturn new Vector2(\n\t\t\tvertex.dot( normalTangent ),\n\t\t\tvertex.dot( normalBitangent )\n\t\t);\n\n\t}\n\n\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\tgenFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\tlet triangles;\n\n\t\tif ( faceLength > 3 ) {\n\n\t\t\t// Triangulate n-gon using earcut\n\n\t\t\tconst vertices = [];\n\t\t\t// in morphing scenario vertexPositions represent morphPositions\n\t\t\t// while baseVertexPositions represent the original geometry's positions\n\t\t\tconst positions = geoInfo.baseVertexPositions || geoInfo.vertexPositions;\n\t\t\tfor ( let i = 0; i < facePositionIndexes.length; i += 3 ) {\n\n\t\t\t\tvertices.push(\n\t\t\t\t\tnew Vector3(\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i ] ],\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i + 1 ] ],\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i + 2 ] ]\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tconst { tangent, bitangent } = this.getNormalTangentAndBitangent( vertices );\n\t\t\tconst triangulationInput = [];\n\n\t\t\tfor ( const vertex of vertices ) {\n\n\t\t\t\ttriangulationInput.push( this.flattenVertex( vertex, tangent, bitangent ) );\n\n\t\t\t}\n\n\t\t\t// When vertices is an array of [0,0,0] elements (which is the case for vertices not participating in morph)\n\t\t\t// the triangulationInput will be an array of [0,0] elements\n\t\t\t// resulting in an array of 0 triangles being returned from ShapeUtils.triangulateShape\n\t\t\t// leading to not pushing into buffers.vertex the redundant vertices (the vertices that are not morphed).\n\t\t\t// That's why, in order to support morphing scenario, \"positions\" is looking first for baseVertexPositions,\n\t\t\t// so that we don't end up with an array of 0 triangles for the faces not participating in morph.\n\t\t\ttriangles = ShapeUtils.triangulateShape( triangulationInput, [] );\n\n\t\t} else {\n\n\t\t\t// Regular triangle, skip earcut triangulation step\n\t\t\ttriangles = [[ 0, 1, 2 ]];\n\n\t\t}\n\n\t\tfor ( const [ i0, i1, i2 ] of triangles ) {\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 + 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 + 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 + 2 ] ] );\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 3 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 + 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 + 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 + 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 + 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i0 * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i0 * 2 + 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i1 * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i1 * 2 + 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i2 * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i2 * 2 + 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\taddMorphTargets( parentGeo, parentGeoNode, morphTargets, preTransform ) {\n\n\t\tif ( morphTargets.length === 0 ) return;\n\n\t\tparentGeo.morphTargetsRelative = true;\n\n\t\tparentGeo.morphAttributes.position = [];\n\t\t// parentGeo.morphAttributes.normal = []; // not implemented\n\n\t\tconst scope = this;\n\t\tmorphTargets.forEach( function ( morphTarget ) {\n\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\tconst morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\tscope.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\tgenMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, name ) {\n\n\t\tconst basePositions = parentGeoNode.Vertices !== undefined ? parentGeoNode.Vertices.a : [];\n\t\tconst baseIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\tconst morphPositionsSparse = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : [];\n\t\tconst morphIndices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : [];\n\n\t\tconst length = parentGeo.attributes.position.count * 3;\n\t\tconst morphPositions = new Float32Array( length );\n\n\t\tfor ( let i = 0; i < morphIndices.length; i ++ ) {\n\n\t\t\tconst morphIndex = morphIndices[ i ] * 3;\n\n\t\t\tmorphPositions[ morphIndex ] = morphPositionsSparse[ i * 3 ];\n\t\t\tmorphPositions[ morphIndex + 1 ] = morphPositionsSparse[ i * 3 + 1 ];\n\t\t\tmorphPositions[ morphIndex + 2 ] = morphPositionsSparse[ i * 3 + 2 ];\n\n\t\t}\n\n\t\t// TODO: add morph normal support\n\t\tconst morphGeoInfo = {\n\t\t\tvertexIndices: baseIndices,\n\t\t\tvertexPositions: morphPositions,\n\t\t\tbaseVertexPositions: basePositions\n\t\t};\n\n\t\tconst morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\tpositionAttribute.name = name || morphGeoNode.attrName;\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t}\n\n\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\tparseNormals( NormalNode ) {\n\n\t\tconst mappingType = NormalNode.MappingInformationType;\n\t\tconst referenceType = NormalNode.ReferenceInformationType;\n\t\tconst buffer = NormalNode.Normals.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 3,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\tparseUVs( UVNode ) {\n\n\t\tconst mappingType = UVNode.MappingInformationType;\n\t\tconst referenceType = UVNode.ReferenceInformationType;\n\t\tconst buffer = UVNode.UV.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 2,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\tparseVertexColors( ColorNode ) {\n\n\t\tconst mappingType = ColorNode.MappingInformationType;\n\t\tconst referenceType = ColorNode.ReferenceInformationType;\n\t\tconst buffer = ColorNode.Colors.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t}\n\n\t\tfor ( let i = 0, c = new Color(); i < buffer.length; i += 4 ) {\n\n\t\t\tc.fromArray( buffer, i );\n\t\t\tColorManagement.colorSpaceToWorking( c, SRGBColorSpace );\n\t\t\tc.toArray( buffer, i );\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 4,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\tparseMaterialIndices( MaterialNode ) {\n\n\t\tconst mappingType = MaterialNode.MappingInformationType;\n\t\tconst referenceType = MaterialNode.ReferenceInformationType;\n\n\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: [ 0 ],\n\t\t\t\tindices: [ 0 ],\n\t\t\t\tmappingType: 'AllSame',\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t}\n\n\t\tconst materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t// for conforming with the other functions we've written for other data.\n\t\tconst materialIndices = [];\n\n\t\tfor ( let i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\tmaterialIndices.push( i );\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 1,\n\t\t\tbuffer: materialIndexBuffer,\n\t\t\tindices: materialIndices,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\tparseNurbsGeometry( geoNode ) {\n\n\t\tconst order = parseInt( geoNode.Order );\n\n\t\tif ( isNaN( order ) ) {\n\n\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\treturn new BufferGeometry();\n\n\t\t}\n\n\t\tconst degree = order - 1;\n\n\t\tconst knots = geoNode.KnotVector.a;\n\t\tconst controlPoints = [];\n\t\tconst pointsValues = geoNode.Points.a;\n\n\t\tfor ( let i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\tcontrolPoints.push( new Vector4().fromArray( pointsValues, i ) );\n\n\t\t}\n\n\t\tlet startKnot, endKnot;\n\n\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\tstartKnot = degree;\n\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\tfor ( let i = 0; i < degree; ++ i ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst curve = new NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\tconst points = curve.getPoints( controlPoints.length * 12 );\n\n\t\treturn new BufferGeometry().setFromPoints( points );\n\n\t}\n\n}\n\n// parse animation data from FBXTree\nclass AnimationParser {\n\n\t// take raw animation clips and turn them into three.js animation clips\n\tparse() {\n\n\t\tconst animationClips = [];\n\n\t\tconst rawClips = this.parseClips();\n\n\t\tif ( rawClips !== undefined ) {\n\n\t\t\tfor ( const key in rawClips ) {\n\n\t\t\t\tconst rawClip = rawClips[ key ];\n\n\t\t\t\tconst clip = this.addClip( rawClip );\n\n\t\t\t\tanimationClips.push( clip );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animationClips;\n\n\t}\n\n\tparseClips() {\n\n\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t// if this is undefined we can safely assume there are no animations\n\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\tconst curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\tconst layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\tconst rawClips = this.parseAnimStacks( layersMap );\n\n\t\treturn rawClips;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t// and is referenced by an AnimationLayer\n\tparseAnimationCurveNodes() {\n\n\t\tconst rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\tconst curveNodesMap = new Map();\n\n\t\tfor ( const nodeID in rawCurveNodes ) {\n\n\t\t\tconst rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\tconst curveNode = {\n\n\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\tcurves: {},\n\n\t\t\t\t};\n\n\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn curveNodesMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t// axis ( e.g. times and values of x rotation)\n\tparseAnimationCurves( curveNodesMap ) {\n\n\t\tconst rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t// clearly, this should be optimised to\n\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\tfor ( const nodeID in rawCurves ) {\n\n\t\t\tconst animationCurve = {\n\n\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t};\n\n\t\t\tconst relationships = connections.get( animationCurve.id );\n\n\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\tconst animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\tconst animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\tparseAnimationLayers( curveNodesMap ) {\n\n\t\tconst rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\tconst layersMap = new Map();\n\n\t\tfor ( const nodeID in rawLayers ) {\n\n\t\t\tconst layerCurveNodes = [];\n\n\t\t\tconst connection = connections.get( parseInt( nodeID ) );\n\n\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\tconst children = connection.children;\n\n\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\tconst curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst modelID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tif ( modelID !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\tif ( rawModel === undefined ) {\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered a unused curve.', child );\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\tID: rawModel.id,\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( child.ID === rawModel.id ) {\n\n\t\t\t\t\t\t\t\t\t\t\tnode.transform = child.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\tif ( child.userData.transformData ) node.eulerOrder = child.userData.transformData.eulerOrder;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tif ( ! node.transform ) node.transform = new Matrix4();\n\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotation = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotation = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] ) layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst deformerID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\tconst geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\tconst modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn layersMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t// hierarchy. Each Stack node will be used to create an AnimationClip\n\tparseAnimStacks( layersMap ) {\n\n\t\tconst rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t// connect the stacks (clips) up to the layers\n\t\tconst rawClips = {};\n\n\t\tfor ( const nodeID in rawStacks ) {\n\n\t\t\tconst children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t}\n\n\t\t\tconst layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\tlayer: layer,\n\n\t\t\t};\n\n\t\t}\n\n\t\treturn rawClips;\n\n\t}\n\n\taddClip( rawClip ) {\n\n\t\tlet tracks = [];\n\n\t\tconst scope = this;\n\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\ttracks = tracks.concat( scope.generateTracks( rawTracks ) );\n\n\t\t} );\n\n\t\treturn new AnimationClip( rawClip.name, - 1, tracks );\n\n\t}\n\n\tgenerateTracks( rawTracks ) {\n\n\t\tconst tracks = [];\n\n\t\tlet initialPosition = new Vector3();\n\t\tlet initialScale = new Vector3();\n\n\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, new Quaternion(), initialScale );\n\n\t\tinitialPosition = initialPosition.toArray();\n\t\tinitialScale = initialScale.toArray();\n\n\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\tconst positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\tconst rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder );\n\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\tconst scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\tconst morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\tgenerateVectorTrack( modelName, curves, initialValue, type ) {\n\n\t\tconst times = this.getTimesForAllAxes( curves );\n\t\tconst values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\treturn new VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t}\n\n\tgenerateRotationTrack( modelName, curves, preRotation, postRotation, eulerOrder ) {\n\n\t\tlet times;\n\t\tlet values;\n\n\t\tif ( curves.x !== undefined && curves.y !== undefined && curves.z !== undefined ) {\n\n\t\t\tconst result = this.interpolateRotations( curves.x, curves.y, curves.z, eulerOrder );\n\n\t\t\ttimes = result[ 0 ];\n\t\t\tvalues = result[ 1 ];\n\n\t\t}\n\n\t\t// For Maya models using \"Joint Orient\", Euler order only applies to rotation, not pre/post-rotations\n\t\tconst defaultEulerOrder = getEulerOrder( 0 );\n\n\t\tif ( preRotation !== undefined ) {\n\n\t\t\tpreRotation = preRotation.map( MathUtils.degToRad );\n\t\t\tpreRotation.push( defaultEulerOrder );\n\n\t\t\tpreRotation = new Euler().fromArray( preRotation );\n\t\t\tpreRotation = new Quaternion().setFromEuler( preRotation );\n\n\t\t}\n\n\t\tif ( postRotation !== undefined ) {\n\n\t\t\tpostRotation = postRotation.map( MathUtils.degToRad );\n\t\t\tpostRotation.push( defaultEulerOrder );\n\n\t\t\tpostRotation = new Euler().fromArray( postRotation );\n\t\t\tpostRotation = new Quaternion().setFromEuler( postRotation ).invert();\n\n\t\t}\n\n\t\tconst quaternion = new Quaternion();\n\t\tconst euler = new Euler();\n\n\t\tconst quaternionValues = [];\n\n\t\tif ( ! values || ! times ) return new QuaternionKeyframeTrack( modelName + '.quaternion', [ 0 ], [ 0 ] );\n\n\t\tfor ( let i = 0; i < values.length; i += 3 ) {\n\n\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], eulerOrder );\n\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\tif ( preRotation !== undefined ) quaternion.premultiply( preRotation );\n\t\t\tif ( postRotation !== undefined ) quaternion.multiply( postRotation );\n\n\t\t\t// Check unroll\n\t\t\tif ( i > 2 ) {\n\n\t\t\t\tconst prevQuat = new Quaternion().fromArray(\n\t\t\t\t\tquaternionValues,\n\t\t\t\t\t( ( i - 3 ) / 3 ) * 4\n\t\t\t\t);\n\n\t\t\t\tif ( prevQuat.dot( quaternion ) < 0 ) {\n\n\t\t\t\t\tquaternion.set( - quaternion.x, - quaternion.y, - quaternion.z, - quaternion.w );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t}\n\n\t\treturn new QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t}\n\n\tgenerateMorphTrack( rawTracks ) {\n\n\t\tconst curves = rawTracks.DeformPercent.curves.morph;\n\t\tconst values = curves.values.map( function ( val ) {\n\n\t\t\treturn val / 100;\n\n\t\t} );\n\n\t\tconst morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\treturn new NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t}\n\n\t// For all animated objects, times are defined separately for each axis\n\t// Here we'll combine the times into one sorted array without duplicates\n\tgetTimesForAllAxes( curves ) {\n\n\t\tlet times = [];\n\n\t\t// first join together the times for each axis, if defined\n\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t// then sort them\n\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\treturn a - b;\n\n\t\t} );\n\n\t\t// and remove duplicates\n\t\tif ( times.length > 1 ) {\n\n\t\t\tlet targetIndex = 1;\n\t\t\tlet lastValue = times[ 0 ];\n\t\t\tfor ( let i = 1; i < times.length; i ++ ) {\n\n\t\t\t\tconst currentValue = times[ i ];\n\t\t\t\tif ( currentValue !== lastValue ) {\n\n\t\t\t\t\ttimes[ targetIndex ] = currentValue;\n\t\t\t\t\tlastValue = currentValue;\n\t\t\t\t\ttargetIndex ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttimes = times.slice( 0, targetIndex );\n\n\t\t}\n\n\t\treturn times;\n\n\t}\n\n\tgetKeyframeTrackValues( times, curves, initialValue ) {\n\n\t\tconst prevValue = initialValue;\n\n\t\tconst values = [];\n\n\t\tlet xIndex = - 1;\n\t\tlet yIndex = - 1;\n\t\tlet zIndex = - 1;\n\n\t\ttimes.forEach( function ( time ) {\n\n\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t// if there is an x value defined for this frame, use that\n\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\tconst xValue = curves.x.values[ xIndex ];\n\t\t\t\tvalues.push( xValue );\n\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t} else {\n\n\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\tconst yValue = curves.y.values[ yIndex ];\n\t\t\t\tvalues.push( yValue );\n\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t}\n\n\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\tconst zValue = curves.z.values[ zIndex ];\n\t\t\t\tvalues.push( zValue );\n\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn values;\n\n\t}\n\n\t// Rotations are defined as Euler angles which can have values  of any size\n\t// These will be converted to quaternions which don't support values greater than\n\t// PI, so we'll interpolate large rotations\n\tinterpolateRotations( curvex, curvey, curvez, eulerOrder ) {\n\n\t\tconst times = [];\n\t\tconst values = [];\n\n\t\t// Add first frame\n\t\ttimes.push( curvex.times[ 0 ] );\n\t\tvalues.push( MathUtils.degToRad( curvex.values[ 0 ] ) );\n\t\tvalues.push( MathUtils.degToRad( curvey.values[ 0 ] ) );\n\t\tvalues.push( MathUtils.degToRad( curvez.values[ 0 ] ) );\n\n\t\tfor ( let i = 1; i < curvex.values.length; i ++ ) {\n\n\t\t\tconst initialValue = [\n\t\t\t\tcurvex.values[ i - 1 ],\n\t\t\t\tcurvey.values[ i - 1 ],\n\t\t\t\tcurvez.values[ i - 1 ],\n\t\t\t];\n\n\t\t\tif ( isNaN( initialValue[ 0 ] ) || isNaN( initialValue[ 1 ] ) || isNaN( initialValue[ 2 ] ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst initialValueRad = initialValue.map( MathUtils.degToRad );\n\n\t\t\tconst currentValue = [\n\t\t\t\tcurvex.values[ i ],\n\t\t\t\tcurvey.values[ i ],\n\t\t\t\tcurvez.values[ i ],\n\t\t\t];\n\n\t\t\tif ( isNaN( currentValue[ 0 ] ) || isNaN( currentValue[ 1 ] ) || isNaN( currentValue[ 2 ] ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValueRad = currentValue.map( MathUtils.degToRad );\n\n\t\t\tconst valuesSpan = [\n\t\t\t\tcurrentValue[ 0 ] - initialValue[ 0 ],\n\t\t\t\tcurrentValue[ 1 ] - initialValue[ 1 ],\n\t\t\t\tcurrentValue[ 2 ] - initialValue[ 2 ],\n\t\t\t];\n\n\t\t\tconst absoluteSpan = [\n\t\t\t\tMath.abs( valuesSpan[ 0 ] ),\n\t\t\t\tMath.abs( valuesSpan[ 1 ] ),\n\t\t\t\tMath.abs( valuesSpan[ 2 ] ),\n\t\t\t];\n\n\t\t\tif ( absoluteSpan[ 0 ] >= 180 || absoluteSpan[ 1 ] >= 180 || absoluteSpan[ 2 ] >= 180 ) {\n\n\t\t\t\tconst maxAbsSpan = Math.max( ...absoluteSpan );\n\n\t\t\t\tconst numSubIntervals = maxAbsSpan / 180;\n\n\t\t\t\tconst E1 = new Euler( ...initialValueRad, eulerOrder );\n\t\t\t\tconst E2 = new Euler( ...currentValueRad, eulerOrder );\n\n\t\t\t\tconst Q1 = new Quaternion().setFromEuler( E1 );\n\t\t\t\tconst Q2 = new Quaternion().setFromEuler( E2 );\n\n\t\t\t\t// Check unroll\n\t\t\t\tif ( Q1.dot( Q2 ) ) {\n\n\t\t\t\t\tQ2.set( - Q2.x, - Q2.y, - Q2.z, - Q2.w );\n\n\t\t\t\t}\n\n\t\t\t\t// Interpolate\n\t\t\t\tconst initialTime = curvex.times[ i - 1 ];\n\t\t\t\tconst timeSpan = curvex.times[ i ] - initialTime;\n\n\t\t\t\tconst Q = new Quaternion();\n\t\t\t\tconst E = new Euler();\n\t\t\t\tfor ( let t = 0; t < 1; t += 1 / numSubIntervals ) {\n\n\t\t\t\t\tQ.copy( Q1.clone().slerp( Q2.clone(), t ) );\n\n\t\t\t\t\ttimes.push( initialTime + t * timeSpan );\n\t\t\t\t\tE.setFromQuaternion( Q, eulerOrder );\n\n\t\t\t\t\tvalues.push( E.x );\n\t\t\t\t\tvalues.push( E.y );\n\t\t\t\t\tvalues.push( E.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttimes.push( curvex.times[ i ] );\n\t\t\t\tvalues.push( MathUtils.degToRad( curvex.values[ i ] ) );\n\t\t\t\tvalues.push( MathUtils.degToRad( curvey.values[ i ] ) );\n\t\t\t\tvalues.push( MathUtils.degToRad( curvez.values[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn [ times, values ];\n\n\t}\n\n}\n\n// parse an FBX file in ASCII format\nclass TextParser {\n\n\tgetPrevNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t}\n\n\tgetCurrentNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t}\n\n\tgetCurrentProp() {\n\n\t\treturn this.currentProp;\n\n\t}\n\n\tpushStack( node ) {\n\n\t\tthis.nodeStack.push( node );\n\t\tthis.currentIndent += 1;\n\n\t}\n\n\tpopStack() {\n\n\t\tthis.nodeStack.pop();\n\t\tthis.currentIndent -= 1;\n\n\t}\n\n\tsetCurrentProp( val, name ) {\n\n\t\tthis.currentProp = val;\n\t\tthis.currentPropName = name;\n\n\t}\n\n\tparse( text ) {\n\n\t\tthis.currentIndent = 0;\n\n\t\tthis.allNodes = new FBXTree();\n\t\tthis.nodeStack = [];\n\t\tthis.currentProp = [];\n\t\tthis.currentPropName = '';\n\n\t\tconst scope = this;\n\n\t\tconst split = text.split( /[\\r\\n]+/ );\n\n\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\tconst matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\tconst matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\tconst matchBeginning = line.match( '^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\tconst matchProperty = line.match( '^\\\\t{' + ( scope.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\tconst matchEnd = line.match( '^\\\\t{' + ( scope.currentIndent - 1 ) + '}}' );\n\n\t\t\tif ( matchBeginning ) {\n\n\t\t\t\tscope.parseNodeBegin( line, matchBeginning );\n\n\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\tscope.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\tscope.popStack();\n\n\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\tscope.parseNodePropertyContinued( line );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this.allNodes;\n\n\t}\n\n\tparseNodeBegin( line, property ) {\n\n\t\tconst nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\tconst nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t} );\n\n\t\tconst node = { name: nodeName };\n\t\tconst attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\t// a top node\n\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t} else { // a subnode\n\n\t\t\t// if the subnode already exists, append it\n\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\tthis.pushStack( node );\n\n\t}\n\n\tparseNodeAttr( attrs ) {\n\n\t\tlet id = attrs[ 0 ];\n\n\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet name = '', type = '';\n\n\t\tif ( attrs.length > 1 ) {\n\n\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\ttype = attrs[ 2 ];\n\n\t\t}\n\n\t\treturn { id: id, name: name, type: type };\n\n\t}\n\n\tparseNodeProperty( line, property, contentLine ) {\n\n\t\tlet propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\tlet propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t//\tContent: ,\n\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t}\n\n\t\tconst currentNode = this.getCurrentNode();\n\t\tconst parentName = currentNode.name;\n\n\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Connections\n\t\tif ( propName === 'C' ) {\n\n\t\t\tconst connProps = propValue.split( ',' ).slice( 1 );\n\t\t\tconst from = parseInt( connProps[ 0 ] );\n\t\t\tconst to = parseInt( connProps[ 1 ] );\n\n\t\t\tlet rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t} );\n\n\t\t\tpropName = 'connections';\n\t\t\tpropValue = [ from, to ];\n\t\t\tappend( propValue, rest );\n\n\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Node\n\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t// connections\n\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t} else {\n\n\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\telse currentNode.a = propValue;\n\n\t\t}\n\n\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t}\n\n\t}\n\n\tparseNodePropertyContinued( line ) {\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\tcurrentNode.a += line;\n\n\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t// so convert the string to an array\n\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t}\n\n\t}\n\n\t// parse \"Property70\"\n\tparseNodeSpecialProperty( line, propName, propValue ) {\n\n\t\t// split this\n\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t// into array like below\n\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\tconst props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t} );\n\n\t\tconst innerPropName = props[ 0 ];\n\t\tconst innerPropType1 = props[ 1 ];\n\t\tconst innerPropType2 = props[ 2 ];\n\t\tconst innerPropFlag = props[ 3 ];\n\t\tlet innerPropValue = props[ 4 ];\n\n\t\t// cast values where needed, otherwise leave as strings\n\t\tswitch ( innerPropType1 ) {\n\n\t\t\tcase 'int':\n\t\t\tcase 'enum':\n\t\t\tcase 'bool':\n\t\t\tcase 'ULongLong':\n\t\t\tcase 'double':\n\t\t\tcase 'Number':\n\t\t\tcase 'FieldOfView':\n\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t\tcase 'Color':\n\t\t\tcase 'ColorRGB':\n\t\t\tcase 'Vector3D':\n\t\t\tcase 'Lcl_Translation':\n\t\t\tcase 'Lcl_Rotation':\n\t\t\tcase 'Lcl_Scaling':\n\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// CAUTION: these props must append to parent's parent\n\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t'type': innerPropType1,\n\t\t\t'type2': innerPropType2,\n\t\t\t'flag': innerPropFlag,\n\t\t\t'value': innerPropValue\n\n\t\t};\n\n\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t}\n\n}\n\n// Parse an FBX file in Binary format\nclass BinaryParser {\n\n\tparse( buffer ) {\n\n\t\tconst reader = new BinaryReader( buffer );\n\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\tconst version = reader.getUint32();\n\n\t\tif ( version < 6400 ) {\n\n\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + version );\n\n\t\t}\n\n\t\tconst allNodes = new FBXTree();\n\n\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\tconst node = this.parseNode( reader, version );\n\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t}\n\n\t\treturn allNodes;\n\n\t}\n\n\t// Check if reader has reached the end of content.\n\tendOfContent( reader ) {\n\n\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t// - 16bytes: magic\n\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t// - 4bytes: magic\n\t\t// - 4bytes: version\n\t\t// - 120bytes: zero\n\t\t// - 16bytes: magic\n\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t} else {\n\n\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t}\n\n\t}\n\n\t// recursively parse nodes until the end of the file is reached\n\tparseNode( reader, version ) {\n\n\t\tconst node = {};\n\n\t\t// The first three data sizes depends on version.\n\t\tconst endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\tconst numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t( version >= 7500 ) ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\n\n\t\tconst nameLen = reader.getUint8();\n\t\tconst name = reader.getString( nameLen );\n\n\t\t// Regards this node as NULL-record if endOffset is zero\n\t\tif ( endOffset === 0 ) return null;\n\n\t\tconst propertyList = [];\n\n\t\tfor ( let i = 0; i < numProperties; i ++ ) {\n\n\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t}\n\n\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\tconst id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\tconst attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\tconst attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t// check if this node represents just a single property\n\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\tconst subNode = this.parseNode( reader, version );\n\n\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t}\n\n\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\tif ( typeof id === 'number' ) node.id = id;\n\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\tif ( name !== '' ) node.name = name;\n\n\t\treturn node;\n\n\t}\n\n\tparseSubNode( name, node, subNode ) {\n\n\t\t// special case: child node is single property\n\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\tconst value = subNode.propertyList[ 0 ];\n\n\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\tsubNode.a = value;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t}\n\n\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\tconst array = [];\n\n\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t} );\n\n\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\tnode.connections = [];\n\n\t\t\t}\n\n\t\t\tnode.connections.push( array );\n\n\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\tconst keys = Object.keys( subNode );\n\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t} );\n\n\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\tlet innerPropName = subNode.propertyList[ 0 ];\n\t\t\tlet innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\tconst innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\tconst innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\tlet innerPropValue;\n\n\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\tinnerPropValue = [\n\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t];\n\n\t\t\t} else {\n\n\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t}\n\n\t\t\t// this will be copied to parent, see above\n\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t}\n\n\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tparseProperty( reader ) {\n\n\t\tconst type = reader.getString( 1 );\n\t\tlet length;\n\n\t\tswitch ( type ) {\n\n\t\t\tcase 'C':\n\t\t\t\treturn reader.getBoolean();\n\n\t\t\tcase 'D':\n\t\t\t\treturn reader.getFloat64();\n\n\t\t\tcase 'F':\n\t\t\t\treturn reader.getFloat32();\n\n\t\t\tcase 'I':\n\t\t\t\treturn reader.getInt32();\n\n\t\t\tcase 'L':\n\t\t\t\treturn reader.getInt64();\n\n\t\t\tcase 'R':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\tcase 'S':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getString( length );\n\n\t\t\tcase 'Y':\n\t\t\t\treturn reader.getInt16();\n\n\t\t\tcase 'b':\n\t\t\tcase 'c':\n\t\t\tcase 'd':\n\t\t\tcase 'f':\n\t\t\tcase 'i':\n\t\t\tcase 'l':\n\n\t\t\t\tconst arrayLength = reader.getUint32();\n\t\t\t\tconst encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\tconst compressedLength = reader.getUint32();\n\n\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst data = fflate.unzlibSync( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) );\n\t\t\t\tconst reader2 = new BinaryReader( data.buffer );\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'b':\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\tcase 'i':\n\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t}\n\n\t\t\t\tbreak; // cannot happen but is required by the DeepScan\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t}\n\n\t}\n\n}\n\nclass BinaryReader {\n\n\tconstructor( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\t\tthis._textDecoder = new TextDecoder();\n\n\t}\n\n\tgetOffset() {\n\n\t\treturn this.offset;\n\n\t}\n\n\tsize() {\n\n\t\treturn this.dv.buffer.byteLength;\n\n\t}\n\n\tskip( length ) {\n\n\t\tthis.offset += length;\n\n\t}\n\n\t// seems like true/false representation depends on exporter.\n\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t// then sees LSB.\n\tgetBoolean() {\n\n\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t}\n\n\tgetBooleanArray( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getBoolean() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint8() {\n\n\t\tconst value = this.dv.getUint8( this.offset );\n\t\tthis.offset += 1;\n\t\treturn value;\n\n\t}\n\n\tgetInt16() {\n\n\t\tconst value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\tthis.offset += 2;\n\t\treturn value;\n\n\t}\n\n\tgetInt32() {\n\n\t\tconst value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetInt32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint32() {\n\n\t\tconst value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t// There's a possibility that this method returns wrong value if the value\n\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t// TODO: safely handle 64-bit integer\n\tgetInt64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\t// calculate negative value\n\t\tif ( high & 0x80000000 ) {\n\n\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetInt64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// Note: see getInt64() comment\n\tgetUint64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetFloat32() {\n\n\t\tconst value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetFloat32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetFloat64() {\n\n\t\tconst value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\tthis.offset += 8;\n\t\treturn value;\n\n\t}\n\n\tgetFloat64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetArrayBuffer( size ) {\n\n\t\tconst value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\tthis.offset += size;\n\t\treturn value;\n\n\t}\n\n\tgetString( size ) {\n\n\t\tconst start = this.offset;\n\t\tlet a = new Uint8Array( this.dv.buffer, start, size );\n\n\t\tthis.skip( size );\n\n\t\tconst nullByte = a.indexOf( 0 );\n\t\tif ( nullByte >= 0 ) a = new Uint8Array( this.dv.buffer, start, nullByte );\n\n\t\treturn this._textDecoder.decode( a );\n\n\t}\n\n}\n\n// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n// and BinaryParser( FBX Binary format)\nclass FBXTree {\n\n\tadd( key, val ) {\n\n\t\tthis[ key ] = val;\n\n\t}\n\n}\n\n// ************** UTILITY FUNCTIONS **************\n\nfunction isFbxFormatBinary( buffer ) {\n\n\tconst CORRECT = 'Kaydara\\u0020FBX\\u0020Binary\\u0020\\u0020\\0';\n\n\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n}\n\nfunction isFbxFormatASCII( text ) {\n\n\tconst CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\tlet cursor = 0;\n\n\tfunction read( offset ) {\n\n\t\tconst result = text[ offset - 1 ];\n\t\ttext = text.slice( cursor + offset );\n\t\tcursor ++;\n\t\treturn result;\n\n\t}\n\n\tfor ( let i = 0; i < CORRECT.length; ++ i ) {\n\n\t\tconst num = read( 1 );\n\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nfunction getFbxVersion( text ) {\n\n\tconst versionRegExp = /FBXVersion: (\\d+)/;\n\tconst match = text.match( versionRegExp );\n\n\tif ( match ) {\n\n\t\tconst version = parseInt( match[ 1 ] );\n\t\treturn version;\n\n\t}\n\n\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n}\n\n// Converts FBX ticks into real time seconds.\nfunction convertFBXTimeToSeconds( time ) {\n\n\treturn time / 46186158000;\n\n}\n\nconst dataArray = [];\n\n// extracts the data from the correct position in the FBX array based on indexing type\nfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\tlet index;\n\n\tswitch ( infoObject.mappingType ) {\n\n\t\tcase 'ByPolygonVertex' :\n\t\t\tindex = polygonVertexIndex;\n\t\t\tbreak;\n\t\tcase 'ByPolygon' :\n\t\t\tindex = polygonIndex;\n\t\t\tbreak;\n\t\tcase 'ByVertice' :\n\t\t\tindex = vertexIndex;\n\t\t\tbreak;\n\t\tcase 'AllSame' :\n\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\tbreak;\n\t\tdefault :\n\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t}\n\n\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\tconst from = index * infoObject.dataSize;\n\tconst to = from + infoObject.dataSize;\n\n\treturn slice( dataArray, infoObject.buffer, from, to );\n\n}\n\nconst tempEuler = new Euler();\nconst tempVec = new Vector3();\n\n// generate transformation from FBX transform data\n// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\nfunction generateTransform( transformData ) {\n\n\tconst lTranslationM = new Matrix4();\n\tconst lPreRotationM = new Matrix4();\n\tconst lRotationM = new Matrix4();\n\tconst lPostRotationM = new Matrix4();\n\n\tconst lScalingM = new Matrix4();\n\tconst lScalingPivotM = new Matrix4();\n\tconst lScalingOffsetM = new Matrix4();\n\tconst lRotationOffsetM = new Matrix4();\n\tconst lRotationPivotM = new Matrix4();\n\n\tconst lParentGX = new Matrix4();\n\tconst lParentLX = new Matrix4();\n\tconst lGlobalT = new Matrix4();\n\n\tconst inheritType = ( transformData.inheritType ) ? transformData.inheritType : 0;\n\n\tif ( transformData.translation ) lTranslationM.setPosition( tempVec.fromArray( transformData.translation ) );\n\n\t// For Maya models using \"Joint Orient\", Euler order only applies to rotation, not pre/post-rotations\n\tconst defaultEulerOrder = getEulerOrder( 0 );\n\n\tif ( transformData.preRotation ) {\n\n\t\tconst array = transformData.preRotation.map( MathUtils.degToRad );\n\t\tarray.push( defaultEulerOrder );\n\t\tlPreRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.rotation ) {\n\n\t\tconst array = transformData.rotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder || defaultEulerOrder );\n\t\tlRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.postRotation ) {\n\n\t\tconst array = transformData.postRotation.map( MathUtils.degToRad );\n\t\tarray.push( defaultEulerOrder );\n\t\tlPostRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\t\tlPostRotationM.invert();\n\n\t}\n\n\tif ( transformData.scale ) lScalingM.scale( tempVec.fromArray( transformData.scale ) );\n\n\t// Pivots and offsets\n\tif ( transformData.scalingOffset ) lScalingOffsetM.setPosition( tempVec.fromArray( transformData.scalingOffset ) );\n\tif ( transformData.scalingPivot ) lScalingPivotM.setPosition( tempVec.fromArray( transformData.scalingPivot ) );\n\tif ( transformData.rotationOffset ) lRotationOffsetM.setPosition( tempVec.fromArray( transformData.rotationOffset ) );\n\tif ( transformData.rotationPivot ) lRotationPivotM.setPosition( tempVec.fromArray( transformData.rotationPivot ) );\n\n\t// parent transform\n\tif ( transformData.parentMatrixWorld ) {\n\n\t\tlParentLX.copy( transformData.parentMatrix );\n\t\tlParentGX.copy( transformData.parentMatrixWorld );\n\n\t}\n\n\tconst lLRM = lPreRotationM.clone().multiply( lRotationM ).multiply( lPostRotationM );\n\t// Global Rotation\n\tconst lParentGRM = new Matrix4();\n\tlParentGRM.extractRotation( lParentGX );\n\n\t// Global Shear*Scaling\n\tconst lParentTM = new Matrix4();\n\tlParentTM.copyPosition( lParentGX );\n\n\tconst lParentGRSM = lParentTM.clone().invert().multiply( lParentGX );\n\tconst lParentGSM = lParentGRM.clone().invert().multiply( lParentGRSM );\n\tconst lLSM = lScalingM;\n\n\tconst lGlobalRS = new Matrix4();\n\n\tif ( inheritType === 0 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM ).multiply( lLSM );\n\n\t} else if ( inheritType === 1 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lParentGSM ).multiply( lLRM ).multiply( lLSM );\n\n\t} else {\n\n\t\tconst lParentLSM = new Matrix4().scale( new Vector3().setFromMatrixScale( lParentLX ) );\n\t\tconst lParentLSM_inv = lParentLSM.clone().invert();\n\t\tconst lParentGSM_noLocal = lParentGSM.clone().multiply( lParentLSM_inv );\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM_noLocal ).multiply( lLSM );\n\n\t}\n\n\tconst lRotationPivotM_inv = lRotationPivotM.clone().invert();\n\tconst lScalingPivotM_inv = lScalingPivotM.clone().invert();\n\t// Calculate the local transform matrix\n\tlet lTransform = lTranslationM.clone().multiply( lRotationOffsetM ).multiply( lRotationPivotM ).multiply( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM ).multiply( lRotationPivotM_inv ).multiply( lScalingOffsetM ).multiply( lScalingPivotM ).multiply( lScalingM ).multiply( lScalingPivotM_inv );\n\n\tconst lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition( lTransform );\n\n\tconst lGlobalTranslation = lParentGX.clone().multiply( lLocalTWithAllPivotAndOffsetInfo );\n\tlGlobalT.copyPosition( lGlobalTranslation );\n\n\tlTransform = lGlobalT.clone().multiply( lGlobalRS );\n\n\t// from global to local\n\tlTransform.premultiply( lParentGX.invert() );\n\n\treturn lTransform;\n\n}\n\n// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\nfunction getEulerOrder( order ) {\n\n\torder = order || 0;\n\n\tconst enums = [\n\t\t'ZYX', // -> XYZ extrinsic\n\t\t'YZX', // -> XZY extrinsic\n\t\t'XZY', // -> YZX extrinsic\n\t\t'ZXY', // -> YXZ extrinsic\n\t\t'YXZ', // -> ZXY extrinsic\n\t\t'XYZ', // -> ZYX extrinsic\n\t\t//'SphericXYZ', // not possible to support\n\t];\n\n\tif ( order === 6 ) {\n\n\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\treturn enums[ 0 ];\n\n\t}\n\n\treturn enums[ order ];\n\n}\n\n// Parses comma separated list of numbers and returns them an array.\n// Used internally by the TextParser\nfunction parseNumberArray( value ) {\n\n\tconst array = value.split( ',' ).map( function ( val ) {\n\n\t\treturn parseFloat( val );\n\n\t} );\n\n\treturn array;\n\n}\n\nfunction convertArrayBufferToString( buffer, from, to ) {\n\n\tif ( from === undefined ) from = 0;\n\tif ( to === undefined ) to = buffer.byteLength;\n\n\treturn new TextDecoder().decode( new Uint8Array( buffer, from, to ) );\n\n}\n\nfunction append( a, b ) {\n\n\tfor ( let i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n}\n\nfunction slice( a, b, from, to ) {\n\n\tfor ( let i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n\treturn a;\n\n}\n\n\nexport { FBXLoader };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10885, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/node_modules/three/examples/jsm/controls/TransformControls.js"],"sourcesContent":["import {\n\tBoxGeometry,\n\tBufferGeometry,\n\tControls,\n\tCylinderGeometry,\n\tDoubleSide,\n\tEuler,\n\tFloat32BufferAttribute,\n\tLine,\n\tLineBasicMaterial,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tOctahedronGeometry,\n\tPlaneGeometry,\n\tQuaternion,\n\tRaycaster,\n\tSphereGeometry,\n\tTorusGeometry,\n\tVector3\n} from 'three';\n\nconst _raycaster = new Raycaster();\n\nconst _tempVector = new Vector3();\nconst _tempVector2 = new Vector3();\nconst _tempQuaternion = new Quaternion();\nconst _unit = {\n\tX: new Vector3( 1, 0, 0 ),\n\tY: new Vector3( 0, 1, 0 ),\n\tZ: new Vector3( 0, 0, 1 )\n};\n\n/**\n * Fires if any type of change (object or property change) is performed. Property changes\n * are separate events you can add event listeners to. The event type is \"propertyname-changed\".\n *\n * @event TransformControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires if a pointer (mouse/touch) becomes active.\n *\n * @event TransformControls#mouseDown\n * @type {Object}\n */\nconst _mouseDownEvent = { type: 'mouseDown', mode: null };\n\n/**\n * Fires if a pointer (mouse/touch) is no longer active.\n *\n * @event TransformControls#mouseUp\n * @type {Object}\n */\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\n\n/**\n * Fires if the controlled 3D object is changed.\n *\n * @event TransformControls#objectChange\n * @type {Object}\n */\nconst _objectChangeEvent = { type: 'objectChange' };\n\n/**\n * This class can be used to transform objects in 3D space by adapting a similar interaction model\n * of DCC tools like Blender. Unlike other controls, it is not intended to transform the scene's camera.\n *\n * `TransformControls` expects that its attached 3D object is part of the scene graph.\n *\n * @augments Controls\n * @three_import import { TransformControls } from 'three/addons/controls/TransformControls.js';\n */\nclass TransformControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera of the rendered scene.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( camera, domElement = null ) {\n\n\t\tsuper( undefined, domElement );\n\n\t\tconst root = new TransformControlsRoot( this );\n\t\tthis._root = root;\n\n\t\tconst gizmo = new TransformControlsGizmo();\n\t\tthis._gizmo = gizmo;\n\t\troot.add( gizmo );\n\n\t\tconst plane = new TransformControlsPlane();\n\t\tthis._plane = plane;\n\t\troot.add( plane );\n\n\t\tconst scope = this;\n\n\t\t// Defined getter, setter and store for a property\n\t\tfunction defineProperty( propName, defaultValue ) {\n\n\t\t\tlet propValue = defaultValue;\n\n\t\t\tObject.defineProperty( scope, propName, {\n\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tif ( propValue !== value ) {\n\n\t\t\t\t\t\tpropValue = value;\n\t\t\t\t\t\tplane[ propName ] = value;\n\t\t\t\t\t\tgizmo[ propName ] = value;\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: propName + '-changed', value: value } );\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tscope[ propName ] = defaultValue;\n\t\t\tplane[ propName ] = defaultValue;\n\t\t\tgizmo[ propName ] = defaultValue;\n\n\t\t}\n\n\t\t// Define properties with getters/setter\n\t\t// Setting the defined property will automatically trigger change event\n\t\t// Defined properties are passed down to gizmo and plane\n\n\t\t/**\n\t\t * The camera of the rendered scene.\n\t\t *\n\t\t * @name TransformControls#camera\n\t\t * @type {Camera}\n\t\t */\n\t\tdefineProperty( 'camera', camera );\n\t\tdefineProperty( 'object', undefined );\n\t\tdefineProperty( 'enabled', true );\n\n\t\t/**\n\t\t * The current transformation axis.\n\t\t *\n\t\t * @name TransformControls#axis\n\t\t * @type {string}\n\t\t */\n\t\tdefineProperty( 'axis', null );\n\n\t\t/**\n\t\t * The current transformation axis.\n\t\t *\n\t\t * @name TransformControls#mode\n\t\t * @type {('translate'|'rotate'|'scale')}\n\t\t * @default 'translate'\n\t\t */\n\t\tdefineProperty( 'mode', 'translate' );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously translated. If you set this property to a numeric\n\t\t * value (world units), you can define in which steps the 3D object should be translated.\n\t\t *\n\t\t * @name TransformControls#translationSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'translationSnap', null );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously rotated. If you set this property to a numeric\n\t\t * value (radians), you can define in which steps the 3D object should be rotated.\n\t\t *\n\t\t * @name TransformControls#rotationSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'rotationSnap', null );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously scaled. If you set this property to a numeric\n\t\t * value, you can define in which steps the 3D object should be scaled.\n\t\t *\n\t\t * @name TransformControls#scaleSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'scaleSnap', null );\n\n\t\t/**\n\t\t * Defines in which coordinate space transformations should be performed.\n\t\t *\n\t\t * @name TransformControls#space\n\t\t * @type {('world'|'local')}\n\t\t * @default 'world'\n\t\t */\n\t\tdefineProperty( 'space', 'world' );\n\n\t\t/**\n\t\t * The size of the helper UI (axes/planes).\n\t\t *\n\t\t * @name TransformControls#size\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tdefineProperty( 'size', 1 );\n\n\t\t/**\n\t\t * Whether dragging is currently performed or not.\n\t\t *\n\t\t * @name TransformControls#dragging\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default false\n\t\t */\n\t\tdefineProperty( 'dragging', false );\n\n\t\t/**\n\t\t * Whether the x-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showX\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showX', true );\n\n\t\t/**\n\t\t * Whether the y-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showY\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showY', true );\n\n\t\t/**\n\t\t * Whether the z-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showZ\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showZ', true );\n\n\t\t/**\n\t\t * The minimum allowed X position during translation.\n\t\t *\n\t\t * @name TransformControls#minX\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minX', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed X position during translation.\n\t\t *\n\t\t * @name TransformControls#maxX\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxX', Infinity );\n\n\t\t/**\n\t\t * The minimum allowed y position during translation.\n\t\t *\n\t\t * @name TransformControls#minY\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minY', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed Y position during translation.\n\t\t *\n\t\t * @name TransformControls#maxY\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxY', Infinity );\n\n\t\t/**\n\t\t * The minimum allowed z position during translation.\n\t\t *\n\t\t * @name TransformControls#minZ\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minZ', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed Z position during translation.\n\t\t *\n\t\t * @name TransformControls#maxZ\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxZ', Infinity );\n\n\t\t// Reusable utility variables\n\n\t\tconst worldPosition = new Vector3();\n\t\tconst worldPositionStart = new Vector3();\n\t\tconst worldQuaternion = new Quaternion();\n\t\tconst worldQuaternionStart = new Quaternion();\n\t\tconst cameraPosition = new Vector3();\n\t\tconst cameraQuaternion = new Quaternion();\n\t\tconst pointStart = new Vector3();\n\t\tconst pointEnd = new Vector3();\n\t\tconst rotationAxis = new Vector3();\n\t\tconst rotationAngle = 0;\n\t\tconst eye = new Vector3();\n\n\t\t// TODO: remove properties unused in plane and gizmo\n\n\t\tdefineProperty( 'worldPosition', worldPosition );\n\t\tdefineProperty( 'worldPositionStart', worldPositionStart );\n\t\tdefineProperty( 'worldQuaternion', worldQuaternion );\n\t\tdefineProperty( 'worldQuaternionStart', worldQuaternionStart );\n\t\tdefineProperty( 'cameraPosition', cameraPosition );\n\t\tdefineProperty( 'cameraQuaternion', cameraQuaternion );\n\t\tdefineProperty( 'pointStart', pointStart );\n\t\tdefineProperty( 'pointEnd', pointEnd );\n\t\tdefineProperty( 'rotationAxis', rotationAxis );\n\t\tdefineProperty( 'rotationAngle', rotationAngle );\n\t\tdefineProperty( 'eye', eye );\n\n\t\tthis._offset = new Vector3();\n\t\tthis._startNorm = new Vector3();\n\t\tthis._endNorm = new Vector3();\n\t\tthis._cameraScale = new Vector3();\n\n\t\tthis._parentPosition = new Vector3();\n\t\tthis._parentQuaternion = new Quaternion();\n\t\tthis._parentQuaternionInv = new Quaternion();\n\t\tthis._parentScale = new Vector3();\n\n\t\tthis._worldScaleStart = new Vector3();\n\t\tthis._worldQuaternionInv = new Quaternion();\n\t\tthis._worldScale = new Vector3();\n\n\t\tthis._positionStart = new Vector3();\n\t\tthis._quaternionStart = new Quaternion();\n\t\tthis._scaleStart = new Vector3();\n\n\t\tthis._getPointer = getPointer.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerHover = onPointerHover.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\t/**\n\t * Returns the visual representation of the controls. Add the helper to your scene to\n\t * visually transform the attached  3D object.\n\t *\n\t * @return {TransformControlsRoot} The helper.\n\t */\n\tgetHelper() {\n\n\t\treturn this._root;\n\n\t}\n\n\tpointerHover( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true ) return;\n\n\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst intersect = intersectObjectWithRay( this._gizmo.picker[ this.mode ], _raycaster );\n\n\t\tif ( intersect ) {\n\n\t\t\tthis.axis = intersect.object.name;\n\n\t\t} else {\n\n\t\t\tthis.axis = null;\n\n\t\t}\n\n\t}\n\n\tpointerDown( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer != null && pointer.button !== 0 ) ) return;\n\n\t\tif ( this.axis !== null ) {\n\n\t\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\t\tif ( planeIntersect ) {\n\n\t\t\t\tthis.object.updateMatrixWorld();\n\t\t\t\tthis.object.parent.updateMatrixWorld();\n\n\t\t\t\tthis._positionStart.copy( this.object.position );\n\t\t\t\tthis._quaternionStart.copy( this.object.quaternion );\n\t\t\t\tthis._scaleStart.copy( this.object.scale );\n\n\t\t\t\tthis.object.matrixWorld.decompose( this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart );\n\n\t\t\t\tthis.pointStart.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\t\t}\n\n\t\t\tthis.dragging = true;\n\t\t\t_mouseDownEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseDownEvent );\n\n\t\t}\n\n\t}\n\n\tpointerMove( pointer ) {\n\n\t\tconst axis = this.axis;\n\t\tconst mode = this.mode;\n\t\tconst object = this.object;\n\t\tlet space = this.space;\n\n\t\tif ( mode === 'scale' ) {\n\n\t\t\tspace = 'local';\n\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\n\n\t\t\tspace = 'world';\n\n\t\t}\n\n\t\tif ( object === undefined || axis === null || this.dragging === false || ( pointer !== null && pointer.button !== - 1 ) ) return;\n\n\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\tif ( ! planeIntersect ) return;\n\n\t\tthis.pointEnd.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\tif ( mode === 'translate' ) {\n\n\t\t\t// Apply translate\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t}\n\n\t\t\tif ( axis.indexOf( 'X' ) === - 1 ) this._offset.x = 0;\n\t\t\tif ( axis.indexOf( 'Y' ) === - 1 ) this._offset.y = 0;\n\t\t\tif ( axis.indexOf( 'Z' ) === - 1 ) this._offset.z = 0;\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._quaternionStart ).divide( this._parentScale );\n\n\t\t\t} else {\n\n\t\t\t\tthis._offset.applyQuaternion( this._parentQuaternionInv ).divide( this._parentScale );\n\n\t\t\t}\n\n\t\t\tobject.position.copy( this._offset ).add( this._positionStart );\n\n\t\t\t// Apply translation snap\n\n\t\t\tif ( this.translationSnap ) {\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\tobject.position.applyQuaternion( _tempQuaternion.copy( this._quaternionStart ).invert() );\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.position.applyQuaternion( this._quaternionStart );\n\n\t\t\t\t}\n\n\t\t\t\tif ( space === 'world' ) {\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.add( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.sub( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobject.position.x = Math.max( this.minX, Math.min( this.maxX, object.position.x ) );\n\t\t\tobject.position.y = Math.max( this.minY, Math.min( this.maxY, object.position.y ) );\n\t\t\tobject.position.z = Math.max( this.minZ, Math.min( this.maxZ, object.position.z ) );\n\n\t\t} else if ( mode === 'scale' ) {\n\n\t\t\tif ( axis.search( 'XYZ' ) !== - 1 ) {\n\n\t\t\t\tlet d = this.pointEnd.length() / this.pointStart.length();\n\n\t\t\t\tif ( this.pointEnd.dot( this.pointStart ) < 0 ) d *= - 1;\n\n\t\t\t\t_tempVector2.set( d, d, d );\n\n\t\t\t} else {\n\n\t\t\t\t_tempVector.copy( this.pointStart );\n\t\t\t\t_tempVector2.copy( this.pointEnd );\n\n\t\t\t\t_tempVector.applyQuaternion( this._worldQuaternionInv );\n\t\t\t\t_tempVector2.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t\t_tempVector2.divide( _tempVector );\n\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.x = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.y = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.z = 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Apply scale\n\n\t\t\tobject.scale.copy( this._scaleStart ).multiply( _tempVector2 );\n\n\t\t\tif ( this.scaleSnap ) {\n\n\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.x = Math.round( object.scale.x / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.y = Math.round( object.scale.y / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.z = Math.round( object.scale.z / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( mode === 'rotate' ) {\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tconst ROTATION_SPEED = 20 / this.worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\n\n\t\t\tlet _inPlaneRotation = false;\n\n\t\t\tif ( axis === 'XYZE' ) {\n\n\t\t\t\tthis.rotationAxis.copy( this._offset ).cross( this.eye ).normalize();\n\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.copy( this.rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\n\n\t\t\t} else if ( axis === 'X' || axis === 'Y' || axis === 'Z' ) {\n\n\t\t\t\tthis.rotationAxis.copy( _unit[ axis ] );\n\n\t\t\t\t_tempVector.copy( _unit[ axis ] );\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\t_tempVector.cross( this.eye );\n\n\t\t\t\t// When _tempVector is 0 after cross with this.eye the vectors are parallel and should use in-plane rotation logic.\n\t\t\t\tif ( _tempVector.length() === 0 ) {\n\n\t\t\t\t\t_inPlaneRotation = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.normalize() ) * ROTATION_SPEED;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tif ( axis === 'E' || _inPlaneRotation ) {\n\n\t\t\t\tthis.rotationAxis.copy( this.eye );\n\t\t\t\tthis.rotationAngle = this.pointEnd.angleTo( this.pointStart );\n\n\t\t\t\tthis._startNorm.copy( this.pointStart ).normalize();\n\t\t\t\tthis._endNorm.copy( this.pointEnd ).normalize();\n\n\t\t\t\tthis.rotationAngle *= ( this._endNorm.cross( this._startNorm ).dot( this.eye ) < 0 ? 1 : - 1 );\n\n\t\t\t}\n\n\t\t\t// Apply rotation snap\n\n\t\t\tif ( this.rotationSnap ) this.rotationAngle = Math.round( this.rotationAngle / this.rotationSnap ) * this.rotationSnap;\n\n\t\t\t// Apply rotate\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\n\n\t\t\t\tobject.quaternion.copy( this._quaternionStart );\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) ).normalize();\n\n\t\t\t} else {\n\n\t\t\t\tthis.rotationAxis.applyQuaternion( this._parentQuaternionInv );\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) );\n\t\t\t\tobject.quaternion.multiply( this._quaternionStart ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( _changeEvent );\n\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t}\n\n\tpointerUp( pointer ) {\n\n\t\tif ( pointer !== null && pointer.button !== 0 ) return;\n\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\n\n\t\t\t_mouseUpEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseUpEvent );\n\n\t\t}\n\n\t\tthis.dragging = false;\n\t\tthis.axis = null;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t\tthis._root.dispose();\n\n\t}\n\n\t/**\n\t * Sets the 3D object that should be transformed and ensures the controls UI is visible.\n\t *\n\t * @param {Object3D} object -  The 3D object that should be transformed.\n\t * @return {TransformControls} A reference to this controls.\n\t */\n\tattach( object ) {\n\n\t\tthis.object = object;\n\t\tthis._root.visible = true;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Removes the current 3D object from the controls and makes the helper UI invisible.\n\t *\n\t * @return {TransformControls} A reference to this controls.\n\t */\n\tdetach() {\n\n\t\tthis.object = undefined;\n\t\tthis.axis = null;\n\n\t\tthis._root.visible = false;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Resets the object's position, rotation and scale to when the current transform began.\n\t */\n\treset() {\n\n\t\tif ( ! this.enabled ) return;\n\n\t\tif ( this.dragging ) {\n\n\t\t\tthis.object.position.copy( this._positionStart );\n\t\t\tthis.object.quaternion.copy( this._quaternionStart );\n\t\t\tthis.object.scale.copy( this._scaleStart );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t\t\tthis.pointStart.copy( this.pointEnd );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the raycaster that is used for user interaction. This object is shared between all\n\t * instances of `TransformControls`.\n\t *\n\t * @returns {Raycaster} The internal raycaster.\n\t */\n\tgetRaycaster() {\n\n\t\treturn _raycaster;\n\n\t}\n\n\t/**\n\t * Returns the transformation mode.\n\t *\n\t * @returns {'translate'|'rotate'|'scale'} The transformation mode.\n\t */\n\tgetMode() {\n\n\t\treturn this.mode;\n\n\t}\n\n\t/**\n\t * Sets the given transformation mode.\n\t *\n\t * @param {'translate'|'rotate'|'scale'} mode - The transformation mode to set.\n\t */\n\tsetMode( mode ) {\n\n\t\tthis.mode = mode;\n\n\t}\n\n\t/**\n\t * Sets the translation snap.\n\t *\n\t * @param {?number} translationSnap - The translation snap to set.\n\t */\n\tsetTranslationSnap( translationSnap ) {\n\n\t\tthis.translationSnap = translationSnap;\n\n\t}\n\n\t/**\n\t * Sets the rotation snap.\n\t *\n\t * @param {?number} rotationSnap - The rotation snap to set.\n\t */\n\tsetRotationSnap( rotationSnap ) {\n\n\t\tthis.rotationSnap = rotationSnap;\n\n\t}\n\n\t/**\n\t * Sets the scale snap.\n\t *\n\t * @param {?number} scaleSnap - The scale snap to set.\n\t */\n\tsetScaleSnap( scaleSnap ) {\n\n\t\tthis.scaleSnap = scaleSnap;\n\n\t}\n\n\t/**\n\t * Sets the size of the helper UI.\n\t *\n\t * @param {number} size - The size to set.\n\t */\n\tsetSize( size ) {\n\n\t\tthis.size = size;\n\n\t}\n\n\t/**\n\t * Sets the coordinate space in which transformations are applied.\n\t *\n\t * @param {'world'|'local'} space - The space to set.\n\t */\n\tsetSpace( space ) {\n\n\t\tthis.space = space;\n\n\t}\n\n\t/**\n\t * Sets the colors of the control's gizmo.\n\t *\n\t * @param {number|Color|string} xAxis - The x-axis color.\n\t * @param {number|Color|string} yAxis - The y-axis color.\n\t * @param {number|Color|string} zAxis - The z-axis color.\n\t * @param {number|Color|string} active - The color for active elements.\n\t */\n\tsetColors( xAxis, yAxis, zAxis, active ) {\n\n\t\tconst materialLib = this._gizmo.materialLib;\n\n\t\tmaterialLib.xAxis.color.set( xAxis );\n\t\tmaterialLib.yAxis.color.set( yAxis );\n\t\tmaterialLib.zAxis.color.set( zAxis );\n\t\tmaterialLib.active.color.set( active );\n\t\tmaterialLib.xAxisTransparent.color.set( xAxis );\n\t\tmaterialLib.yAxisTransparent.color.set( yAxis );\n\t\tmaterialLib.zAxisTransparent.color.set( zAxis );\n\t\tmaterialLib.activeTransparent.color.set( active );\n\n\t\t// update color caches\n\n\t\tif ( materialLib.xAxis._color ) materialLib.xAxis._color.set( xAxis );\n\t\tif ( materialLib.yAxis._color ) materialLib.yAxis._color.set( yAxis );\n\t\tif ( materialLib.zAxis._color ) materialLib.zAxis._color.set( zAxis );\n\t\tif ( materialLib.active._color ) materialLib.active._color.set( active );\n\t\tif ( materialLib.xAxisTransparent._color ) materialLib.xAxisTransparent._color.set( xAxis );\n\t\tif ( materialLib.yAxisTransparent._color ) materialLib.yAxisTransparent._color.set( yAxis );\n\t\tif ( materialLib.zAxisTransparent._color ) materialLib.zAxisTransparent._color.set( zAxis );\n\t\tif ( materialLib.activeTransparent._color ) materialLib.activeTransparent._color.set( active );\n\n\t}\n\n}\n\n// mouse / touch event handlers\n\nfunction getPointer( event ) {\n\n\tif ( this.domElement.ownerDocument.pointerLockElement ) {\n\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tbutton: event.button\n\t\t};\n\n\t} else {\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\n\t\treturn {\n\t\t\tx: ( event.clientX - rect.left ) / rect.width * 2 - 1,\n\t\t\ty: - ( event.clientY - rect.top ) / rect.height * 2 + 1,\n\t\t\tbutton: event.button\n\t\t};\n\n\t}\n\n}\n\nfunction onPointerHover( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tswitch ( event.pointerType ) {\n\n\t\tcase 'mouse':\n\t\tcase 'pen':\n\t\t\tthis.pointerHover( this._getPointer( event ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tif ( ! document.pointerLockElement ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t}\n\n\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerHover( this._getPointer( event ) );\n\tthis.pointerDown( this._getPointer( event ) );\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.pointerMove( this._getPointer( event ) );\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerUp( this._getPointer( event ) );\n\n}\n\nfunction intersectObjectWithRay( object, raycaster, includeInvisible ) {\n\n\tconst allIntersections = raycaster.intersectObject( object, true );\n\n\tfor ( let i = 0; i < allIntersections.length; i ++ ) {\n\n\t\tif ( allIntersections[ i ].object.visible || includeInvisible ) {\n\n\t\t\treturn allIntersections[ i ];\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\n//\n\n// Reusable utility variables\n\nconst _tempEuler = new Euler();\nconst _alignVector = new Vector3( 0, 1, 0 );\nconst _zeroVector = new Vector3( 0, 0, 0 );\nconst _lookAtMatrix = new Matrix4();\nconst _tempQuaternion2 = new Quaternion();\nconst _identityQuaternion = new Quaternion();\nconst _dirVector = new Vector3();\nconst _tempMatrix = new Matrix4();\n\nconst _unitX = new Vector3( 1, 0, 0 );\nconst _unitY = new Vector3( 0, 1, 0 );\nconst _unitZ = new Vector3( 0, 0, 1 );\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nclass TransformControlsRoot extends Object3D {\n\n\tconstructor( controls ) {\n\n\t\tsuper();\n\n\t\tthis.isTransformControlsRoot = true;\n\n\t\tthis.controls = controls;\n\t\tthis.visible = false;\n\n\t}\n\n\t// updateMatrixWorld updates key transformation variables\n\tupdateMatrixWorld( force ) {\n\n\t\tconst controls = this.controls;\n\n\t\tif ( controls.object !== undefined ) {\n\n\t\t\tcontrols.object.updateMatrixWorld();\n\n\t\t\tif ( controls.object.parent === null ) {\n\n\t\t\t\tconsole.error( 'TransformControls: The attached 3D object must be a part of the scene graph.' );\n\n\t\t\t} else {\n\n\t\t\t\tcontrols.object.parent.matrixWorld.decompose( controls._parentPosition, controls._parentQuaternion, controls._parentScale );\n\n\t\t\t}\n\n\t\t\tcontrols.object.matrixWorld.decompose( controls.worldPosition, controls.worldQuaternion, controls._worldScale );\n\n\t\t\tcontrols._parentQuaternionInv.copy( controls._parentQuaternion ).invert();\n\t\t\tcontrols._worldQuaternionInv.copy( controls.worldQuaternion ).invert();\n\n\t\t}\n\n\t\tcontrols.camera.updateMatrixWorld();\n\t\tcontrols.camera.matrixWorld.decompose( controls.cameraPosition, controls.cameraQuaternion, controls._cameraScale );\n\n\t\tif ( controls.camera.isOrthographicCamera ) {\n\n\t\t\tcontrols.camera.getWorldDirection( controls.eye ).negate();\n\n\t\t} else {\n\n\t\t\tcontrols.eye.copy( controls.cameraPosition ).sub( controls.worldPosition ).normalize();\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.traverse( function ( child ) {\n\n\t\t\tif ( child.geometry ) child.geometry.dispose();\n\t\t\tif ( child.material ) child.material.dispose();\n\n\t\t} );\n\n\t}\n\n}\n\nclass TransformControlsGizmo extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isTransformControlsGizmo = true;\n\n\t\tthis.type = 'TransformControlsGizmo';\n\n\t\t// shared materials\n\n\t\tconst gizmoMaterial = new MeshBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tconst gizmoLineMaterial = new LineBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\t// Make unique material for each axis/color\n\n\t\tconst matInvisible = gizmoMaterial.clone();\n\t\tmatInvisible.opacity = 0.15;\n\n\t\tconst matHelper = gizmoLineMaterial.clone();\n\t\tmatHelper.opacity = 0.5;\n\n\t\tconst matRed = gizmoMaterial.clone();\n\t\tmatRed.color.setHex( 0xff0000 );\n\n\t\tconst matGreen = gizmoMaterial.clone();\n\t\tmatGreen.color.setHex( 0x00ff00 );\n\n\t\tconst matBlue = gizmoMaterial.clone();\n\t\tmatBlue.color.setHex( 0x0000ff );\n\n\t\tconst matRedTransparent = gizmoMaterial.clone();\n\t\tmatRedTransparent.color.setHex( 0xff0000 );\n\t\tmatRedTransparent.opacity = 0.5;\n\n\t\tconst matGreenTransparent = gizmoMaterial.clone();\n\t\tmatGreenTransparent.color.setHex( 0x00ff00 );\n\t\tmatGreenTransparent.opacity = 0.5;\n\n\t\tconst matBlueTransparent = gizmoMaterial.clone();\n\t\tmatBlueTransparent.color.setHex( 0x0000ff );\n\t\tmatBlueTransparent.opacity = 0.5;\n\n\t\tconst matWhiteTransparent = gizmoMaterial.clone();\n\t\tmatWhiteTransparent.opacity = 0.25;\n\n\t\tconst matYellowTransparent = gizmoMaterial.clone();\n\t\tmatYellowTransparent.color.setHex( 0xffff00 );\n\t\tmatYellowTransparent.opacity = 0.25;\n\n\t\tconst matYellow = gizmoMaterial.clone();\n\t\tmatYellow.color.setHex( 0xffff00 );\n\n\t\tconst matGray = gizmoMaterial.clone();\n\t\tmatGray.color.setHex( 0x787878 );\n\n\t\t// materials in the below property are configurable via setColors()\n\n\t\tthis.materialLib = {\n\t\t\txAxis: matRed,\n\t\t\tyAxis: matGreen,\n\t\t\tzAxis: matBlue,\n\t\t\tactive: matYellow,\n\t\t\txAxisTransparent: matRedTransparent,\n\t\t\tyAxisTransparent: matGreenTransparent,\n\t\t\tzAxisTransparent: matBlueTransparent,\n\t\t\tactiveTransparent: matYellowTransparent\n\t\t};\n\n\t\t// reusable geometry\n\n\t\tconst arrowGeometry = new CylinderGeometry( 0, 0.04, 0.1, 12 );\n\t\tarrowGeometry.translate( 0, 0.05, 0 );\n\n\t\tconst scaleHandleGeometry = new BoxGeometry( 0.08, 0.08, 0.08 );\n\t\tscaleHandleGeometry.translate( 0, 0.04, 0 );\n\n\t\tconst lineGeometry = new BufferGeometry();\n\t\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\n\n\t\tconst lineGeometry2 = new CylinderGeometry( 0.0075, 0.0075, 0.5, 3 );\n\t\tlineGeometry2.translate( 0, 0.25, 0 );\n\n\t\tfunction CircleGeometry( radius, arc ) {\n\n\t\t\tconst geometry = new TorusGeometry( radius, 0.0075, 3, 64, arc * Math.PI * 2 );\n\t\t\tgeometry.rotateY( Math.PI / 2 );\n\t\t\tgeometry.rotateX( Math.PI / 2 );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n\t\tfunction TranslateHelperGeometry() {\n\n\t\t\tconst geometry = new BufferGeometry();\n\n\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 1, 1, 1 ], 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n\t\tconst gizmoTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, - 0.5, 0 ], [ Math.PI, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), null, [ Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.1, 0 ), matWhiteTransparent ), [ 0, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.2, 0 ), matInvisible ) ]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperTranslate = {\n\t\t\tSTART: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tEND: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tDELTA: [\n\t\t\t\t[ new Line( TranslateHelperGeometry(), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 1 ), matGray ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matRed ) ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matGreen ), null, [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matBlue ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.75, 1 ), matYellowTransparent ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperRotate = {\n\t\t\tAXIS: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( new SphereGeometry( 0.25, 10, 8 ), matInvisible ) ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.75, 0.1, 2, 24 ), matInvisible ) ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, - 0.5, 0 ], [ 0, 0, Math.PI ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.1, 0.1, 0.1 ), matWhiteTransparent ) ],\n\t\t\t]\n\t\t};\n\n\t\tconst pickerScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]],\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]],\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 0, 0 ]],\n\t\t\t]\n\t\t};\n\n\t\tconst helperScale = {\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\t// Creates an Object3D with gizmos described in custom hierarchy definition.\n\n\t\tfunction setupGizmo( gizmoMap ) {\n\n\t\t\tconst gizmo = new Object3D();\n\n\t\t\tfor ( const name in gizmoMap ) {\n\n\t\t\t\tfor ( let i = gizmoMap[ name ].length; i --; ) {\n\n\t\t\t\t\tconst object = gizmoMap[ name ][ i ][ 0 ].clone();\n\t\t\t\t\tconst position = gizmoMap[ name ][ i ][ 1 ];\n\t\t\t\t\tconst rotation = gizmoMap[ name ][ i ][ 2 ];\n\t\t\t\t\tconst scale = gizmoMap[ name ][ i ][ 3 ];\n\t\t\t\t\tconst tag = gizmoMap[ name ][ i ][ 4 ];\n\n\t\t\t\t\t// name and tag properties are essential for picking and updating logic.\n\t\t\t\t\tobject.name = name;\n\t\t\t\t\tobject.tag = tag;\n\n\t\t\t\t\tif ( position ) {\n\n\t\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( rotation ) {\n\n\t\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scale ) {\n\n\t\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t\tconst tempGeometry = object.geometry.clone();\n\t\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\n\t\t\t\t\tobject.geometry = tempGeometry;\n\t\t\t\t\tobject.renderOrder = Infinity;\n\n\t\t\t\t\tobject.position.set( 0, 0, 0 );\n\t\t\t\t\tobject.rotation.set( 0, 0, 0 );\n\t\t\t\t\tobject.scale.set( 1, 1, 1 );\n\n\t\t\t\t\tgizmo.add( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn gizmo;\n\n\t\t}\n\n\t\t// Gizmo creation\n\n\t\tthis.gizmo = {};\n\t\tthis.picker = {};\n\t\tthis.helper = {};\n\n\t\tthis.add( this.gizmo[ 'translate' ] = setupGizmo( gizmoTranslate ) );\n\t\tthis.add( this.gizmo[ 'rotate' ] = setupGizmo( gizmoRotate ) );\n\t\tthis.add( this.gizmo[ 'scale' ] = setupGizmo( gizmoScale ) );\n\t\tthis.add( this.picker[ 'translate' ] = setupGizmo( pickerTranslate ) );\n\t\tthis.add( this.picker[ 'rotate' ] = setupGizmo( pickerRotate ) );\n\t\tthis.add( this.picker[ 'scale' ] = setupGizmo( pickerScale ) );\n\t\tthis.add( this.helper[ 'translate' ] = setupGizmo( helperTranslate ) );\n\t\tthis.add( this.helper[ 'rotate' ] = setupGizmo( helperRotate ) );\n\t\tthis.add( this.helper[ 'scale' ] = setupGizmo( helperScale ) );\n\n\t\t// Pickers should be hidden always\n\n\t\tthis.picker[ 'translate' ].visible = false;\n\t\tthis.picker[ 'rotate' ].visible = false;\n\t\tthis.picker[ 'scale' ].visible = false;\n\n\t}\n\n\t// updateMatrixWorld will update transformations and appearance of individual handles\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst space = ( this.mode === 'scale' ) ? 'local' : this.space; // scale always oriented to local rotation\n\n\t\tconst quaternion = ( space === 'local' ) ? this.worldQuaternion : _identityQuaternion;\n\n\t\t// Show only gizmos for current transform mode\n\n\t\tthis.gizmo[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.gizmo[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.gizmo[ 'scale' ].visible = this.mode === 'scale';\n\n\t\tthis.helper[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.helper[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.helper[ 'scale' ].visible = this.mode === 'scale';\n\n\n\t\tlet handles = [];\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\n\n\t\tfor ( let i = 0; i < handles.length; i ++ ) {\n\n\t\t\tconst handle = handles[ i ];\n\n\t\t\t// hide aligned to camera\n\n\t\t\thandle.visible = true;\n\t\t\thandle.rotation.set( 0, 0, 0 );\n\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\tlet factor;\n\n\t\t\tif ( this.camera.isOrthographicCamera ) {\n\n\t\t\t\tfactor = ( this.camera.top - this.camera.bottom ) / this.camera.zoom;\n\n\t\t\t} else {\n\n\t\t\t\tfactor = this.worldPosition.distanceTo( this.cameraPosition ) * Math.min( 1.9 * Math.tan( Math.PI * this.camera.fov / 360 ) / this.camera.zoom, 7 );\n\n\t\t\t}\n\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( factor * this.size / 4 );\n\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\n\n\t\t\tif ( handle.tag === 'helper' ) {\n\n\t\t\t\thandle.visible = false;\n\n\t\t\t\tif ( handle.name === 'AXIS' ) {\n\n\t\t\t\t\thandle.visible = !! this.axis;\n\n\t\t\t\t\tif ( this.axis === 'X' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Y' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, Math.PI / 2 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Z' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'XYZE' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\t_alignVector.copy( this.rotationAxis );\n\t\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( _zeroVector, _alignVector, _unitY ) );\n\t\t\t\t\t\thandle.quaternion.multiply( _tempQuaternion );\n\t\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'E' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if ( handle.name === 'START' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'END' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPosition );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\n\t\t\t\t\t_tempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternionStart.clone().invert() );\n\t\t\t\t\thandle.scale.copy( _tempVector );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\t\t\tif ( this.dragging ) {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis ) {\n\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// If updating helper, skip rest of the loop\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// Align handles to current local or world rotation\n\n\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\n\n\t\t\t\t// Hide translate and scale axis facing the camera\n\n\t\t\t\tconst AXIS_HIDE_THRESHOLD = 0.99;\n\t\t\t\tconst PLANE_HIDE_THRESHOLD = 0.2;\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XY' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'YZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.mode === 'rotate' ) {\n\n\t\t\t\t// Align handles to current local or world rotation\n\n\t\t\t\t_tempQuaternion2.copy( quaternion );\n\t\t\t\t_alignVector.copy( this.eye ).applyQuaternion( _tempQuaternion.copy( quaternion ).invert() );\n\n\t\t\t\tif ( handle.name.search( 'E' ) !== - 1 ) {\n\n\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( this.eye, _zeroVector, _unitY ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitX, Math.atan2( - _alignVector.y, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitY, Math.atan2( _alignVector.x, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitZ, Math.atan2( _alignVector.y, _alignVector.x ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Hide disabled axes\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'X' ) === - 1 || this.showX );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Y' ) === - 1 || this.showY );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Z' ) === - 1 || this.showZ );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'E' ) === - 1 || ( this.showX && this.showY && this.showZ ) );\n\n\t\t\t// highlight selected axis\n\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\n\n\t\t\thandle.material.color.copy( handle.material._color );\n\t\t\thandle.material.opacity = handle.material._opacity;\n\n\t\t\tif ( this.enabled && this.axis ) {\n\n\t\t\t\tif ( handle.name === this.axis ) {\n\n\t\t\t\t\thandle.material.color.copy( this.materialLib.active.color );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\n\n\t\t\t\t\treturn handle.name === a;\n\n\t\t\t\t} ) ) {\n\n\t\t\t\t\thandle.material.color.copy( this.materialLib.active.color );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n//\n\nclass TransformControlsPlane extends Mesh {\n\n\tconstructor() {\n\n\t\tsuper(\n\t\t\tnew PlaneGeometry( 100000, 100000, 2, 2 ),\n\t\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false } )\n\t\t);\n\n\t\tthis.isTransformControlsPlane = true;\n\n\t\tthis.type = 'TransformControlsPlane';\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tlet space = this.space;\n\n\t\tthis.position.copy( this.worldPosition );\n\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\n\n\t\t_v1.copy( _unitX ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v2.copy( _unitY ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v3.copy( _unitZ ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\n\t\t// Align the plane for current transform mode, axis and space.\n\n\t\t_alignVector.copy( _v2 );\n\n\t\tswitch ( this.mode ) {\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\t\t\t\tswitch ( this.axis ) {\n\n\t\t\t\t\tcase 'X':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v1 );\n\t\t\t\t\t\t_dirVector.copy( _v1 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Y':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v2 );\n\t\t\t\t\t\t_dirVector.copy( _v2 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v3 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XY':\n\t\t\t\t\t\t_dirVector.copy( _v3 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'YZ':\n\t\t\t\t\t\t_dirVector.copy( _v1 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XZ':\n\t\t\t\t\t\t_alignVector.copy( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v2 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XYZ':\n\t\t\t\t\tcase 'E':\n\t\t\t\t\t\t_dirVector.set( 0, 0, 0 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'rotate':\n\t\t\tdefault:\n\t\t\t\t// special case for rotate\n\t\t\t\t_dirVector.set( 0, 0, 0 );\n\n\t\t}\n\n\t\tif ( _dirVector.length() === 0 ) {\n\n\t\t\t// If in rotate mode, make the plane parallel to camera\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\n\n\t\t} else {\n\n\t\t\t_tempMatrix.lookAt( _tempVector.set( 0, 0, 0 ), _dirVector, _alignVector );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( _tempMatrix );\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n"],"names":[],"mappings":"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","ignoreList":[0]}}]
}