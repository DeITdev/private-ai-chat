{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/accordion.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\";\nimport { ChevronDown } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Accordion = AccordionPrimitive.Root;\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n));\nAccordionItem.displayName = \"AccordionItem\";\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n));\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName;\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n));\nAccordionContent.displayName = AccordionPrimitive.Content.displayName;\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent };\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,YAAY,6KAAuB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG;AAE5B,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,+KAAyB;QAAC,WAAU;kBACnC,cAAA,8OAAC,gLAA0B;YACzB,KAAK;YACL,WAAW,IAAA,kHAAE,EACX,kJACA;YAED,GAAG,KAAK;;gBAER;8BACD,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,iBAAiB,WAAW,GAAG,gLAA0B,CAAC,WAAW;AAErE,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,gLAA0B;QACzB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;kBAET,cAAA,8OAAC;YAAI,WAAW,IAAA,kHAAE,EAAC,aAAa;sBAAa;;;;;;;;;;;AAGjD,iBAAiB,WAAW,GAAG,gLAA0B,CAAC,WAAW"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,gSACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAW,IAAA,kHAAE,EAAC;sBAEd,cAAA,8OAAC,6MAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/slider.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,4DACA;QAED,GAAG,KAAK;;0BAET,8OAAC,2KAAqB;gBAAC,WAAU;0BAC/B,cAAA,8OAAC,2KAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,8OAAC,2KAAqB;gBAAC,WAAU;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,0KAAoB,CAAC,WAAW"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kUACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,mNAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6NAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,oLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,mOAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAChC,sLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,KAAK;YACL,WAAW,IAAA,kHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,+KAAyB;QACxB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG,+KAAyB,CAAC,WAAW"}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,2KAAqB;AAErC,MAAM,iBAAiB,8KAAwB;AAE/C,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,kHAAE,EACX,geACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW"}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/DatGUIControl.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Slider } from \"@/components/ui/slider\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\n\ninterface DatGUIControlProps {\n  // Display\n  background: boolean;\n  onBackgroundChange: (value: boolean) => void;\n  autoRotate: boolean;\n  onAutoRotateChange: (value: boolean) => void;\n  wireframe: boolean;\n  onWireframeChange: (value: boolean) => void;\n  skeleton: boolean;\n  onSkeletonChange: (value: boolean) => void;\n  grid: boolean;\n  onGridChange: (value: boolean) => void;\n  pointSize: number;\n  onPointSizeChange: (value: number) => void;\n  bgColor: string;\n  onBgColorChange: (value: string) => void;\n\n  // Lighting\n  toneMapping: string;\n  onToneMappingChange: (value: string) => void;\n  exposure: number;\n  onExposureChange: (value: number) => void;\n  punctualLights: boolean;\n  onPunctualLightsChange: (value: boolean) => void;\n  ambientIntensity: number;\n  onAmbientIntensityChange: (value: number) => void;\n  ambientColor: string;\n  onAmbientColorChange: (value: string) => void;\n  directIntensity: number;\n  onDirectIntensityChange: (value: number) => void;\n  directColor: string;\n  onDirectColorChange: (value: string) => void;\n\n  // Animation\n  playbackSpeed: number;\n  onPlaybackSpeedChange: (value: number) => void;\n  onPlayAllClips: () => void;\n}\n\nexport const DatGUIControl = ({\n  background,\n  onBackgroundChange,\n  autoRotate,\n  onAutoRotateChange,\n  wireframe,\n  onWireframeChange,\n  skeleton,\n  onSkeletonChange,\n  grid,\n  onGridChange,\n  pointSize,\n  onPointSizeChange,\n  bgColor,\n  onBgColorChange,\n  toneMapping,\n  onToneMappingChange,\n  exposure,\n  onExposureChange,\n  punctualLights,\n  onPunctualLightsChange,\n  ambientIntensity,\n  onAmbientIntensityChange,\n  ambientColor,\n  onAmbientColorChange,\n  directIntensity,\n  onDirectIntensityChange,\n  directColor,\n  onDirectColorChange,\n  playbackSpeed,\n  onPlaybackSpeedChange,\n  onPlayAllClips,\n}: DatGUIControlProps) => {\n  const [showControls, setShowControls] = useState(false);\n\n  // Local input values for free typing\n  const [pointSizeInput, setPointSizeInput] = useState(pointSize.toString());\n  const [exposureInput, setExposureInput] = useState(exposure.toString());\n  const [ambientIntensityInput, setAmbientIntensityInput] = useState(\n    ambientIntensity.toString()\n  );\n  const [directIntensityInput, setDirectIntensityInput] = useState(\n    directIntensity.toString()\n  );\n  const [playbackSpeedInput, setPlaybackSpeedInput] = useState(\n    playbackSpeed.toString()\n  );\n\n  // Sync local input values when props change (from slider or external updates)\n  useEffect(() => setPointSizeInput(pointSize.toString()), [pointSize]);\n  useEffect(() => setExposureInput(exposure.toString()), [exposure]);\n  useEffect(\n    () => setAmbientIntensityInput(ambientIntensity.toString()),\n    [ambientIntensity]\n  );\n  useEffect(\n    () => setDirectIntensityInput(directIntensity.toString()),\n    [directIntensity]\n  );\n  useEffect(\n    () => setPlaybackSpeedInput(playbackSpeed.toString()),\n    [playbackSpeed]\n  );\n\n  return (\n    <>\n      {showControls ? (\n        <div className=\"absolute top-20 right-4 w-[200px] md:w-[280px] lg:w-[320px] max-h-[calc(100%-100px)] overflow-y-auto bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/90 border rounded-lg shadow-lg z-[45]\">\n          <Accordion type=\"multiple\" defaultValue={[]} className=\"w-full\">\n            {/* Display Controls */}\n            <AccordionItem value=\"display\">\n              <AccordionTrigger className=\"px-4 py-3 text-sm font-semibold\">\n                Display\n              </AccordionTrigger>\n              <AccordionContent className=\"px-4 pb-4 space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"background\" className=\"text-sm\">\n                    Background\n                  </Label>\n                  <Checkbox\n                    id=\"background\"\n                    checked={background}\n                    onCheckedChange={(checked) => onBackgroundChange(!!checked)}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"autoRotate\" className=\"text-sm\">\n                    Auto Rotate\n                  </Label>\n                  <Checkbox\n                    id=\"autoRotate\"\n                    checked={autoRotate}\n                    onCheckedChange={(checked) => onAutoRotateChange(!!checked)}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"wireframe\" className=\"text-sm\">\n                    Wireframe\n                  </Label>\n                  <Checkbox\n                    id=\"wireframe\"\n                    checked={wireframe}\n                    onCheckedChange={(checked) => onWireframeChange(!!checked)}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"skeleton\" className=\"text-sm\">\n                    Skeleton\n                  </Label>\n                  <Checkbox\n                    id=\"skeleton\"\n                    checked={skeleton}\n                    onCheckedChange={(checked) => onSkeletonChange(!!checked)}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"grid\" className=\"text-sm\">\n                    Grid\n                  </Label>\n                  <Checkbox\n                    id=\"grid\"\n                    checked={grid}\n                    onCheckedChange={(checked) => onGridChange(!!checked)}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"pointSize\" className=\"text-sm\">\n                      Point Size\n                    </Label>\n                    <Input\n                      id=\"pointSizeInput\"\n                      type=\"text\"\n                      inputMode=\"decimal\"\n                      value={pointSizeInput}\n                      onChange={(e) => setPointSizeInput(e.target.value)}\n                      onBlur={() => {\n                        const value = parseFloat(\n                          pointSizeInput.replace(\",\", \".\")\n                        );\n                        if (!isNaN(value)) {\n                          const clamped = Math.max(1, Math.min(16, value));\n                          onPointSizeChange(clamped);\n                        } else {\n                          setPointSizeInput(pointSize.toString());\n                        }\n                      }}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\") {\n                          e.currentTarget.blur();\n                        }\n                      }}\n                      className=\"w-20 h-8 text-xs\"\n                    />\n                  </div>\n                  <Slider\n                    id=\"pointSize\"\n                    min={1}\n                    max={16}\n                    step={0.1}\n                    value={[pointSize]}\n                    onValueChange={([value]) => onPointSizeChange(value)}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"bgColor\" className=\"text-sm\">\n                    Background Color\n                  </Label>\n                  <Popover>\n                    <PopoverTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full justify-start text-left font-normal\"\n                      >\n                        <div\n                          className=\"w-4 h-4 rounded border mr-2\"\n                          style={{ backgroundColor: bgColor }}\n                        />\n                        <span className=\"text-xs\">{bgColor}</span>\n                      </Button>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-64\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"bgColorInput\" className=\"text-sm\">\n                          Choose Color\n                        </Label>\n                        <Input\n                          id=\"bgColorInput\"\n                          type=\"color\"\n                          value={bgColor}\n                          onChange={(e) => onBgColorChange(e.target.value)}\n                          className=\"h-10 cursor-pointer\"\n                        />\n                        <Input\n                          type=\"text\"\n                          value={bgColor}\n                          onChange={(e) => onBgColorChange(e.target.value)}\n                          className=\"font-mono text-xs\"\n                        />\n                      </div>\n                    </PopoverContent>\n                  </Popover>\n                </div>\n              </AccordionContent>\n            </AccordionItem>\n\n            {/* Lighting Controls */}\n            <AccordionItem value=\"lighting\">\n              <AccordionTrigger className=\"px-4 py-3 text-sm font-semibold\">\n                Lighting\n              </AccordionTrigger>\n              <AccordionContent className=\"px-4 pb-4 space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"toneMapping\" className=\"text-sm\">\n                    Tone Mapping\n                  </Label>\n                  <Select\n                    value={toneMapping}\n                    onValueChange={onToneMappingChange}\n                  >\n                    <SelectTrigger id=\"toneMapping\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Linear\">Linear</SelectItem>\n                      <SelectItem value=\"ACES Filmic\">ACES Filmic</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"exposure\" className=\"text-sm\">\n                      Exposure\n                    </Label>\n                    <Input\n                      id=\"exposureInput\"\n                      type=\"text\"\n                      inputMode=\"decimal\"\n                      value={exposureInput}\n                      onChange={(e) => setExposureInput(e.target.value)}\n                      onBlur={() => {\n                        const value = parseFloat(\n                          exposureInput.replace(\",\", \".\")\n                        );\n                        if (!isNaN(value)) {\n                          const clamped = Math.max(-10, Math.min(10, value));\n                          onExposureChange(clamped);\n                        } else {\n                          setExposureInput(exposure.toString());\n                        }\n                      }}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\") {\n                          e.currentTarget.blur();\n                        }\n                      }}\n                      className=\"w-20 h-8 text-xs\"\n                    />\n                  </div>\n                  <Slider\n                    id=\"exposure\"\n                    min={-10}\n                    max={10}\n                    step={0.01}\n                    value={[exposure]}\n                    onValueChange={([value]) => onExposureChange(value)}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"punctualLights\" className=\"text-sm\">\n                    Punctual Lights\n                  </Label>\n                  <Checkbox\n                    id=\"punctualLights\"\n                    checked={punctualLights}\n                    onCheckedChange={(checked) =>\n                      onPunctualLightsChange(!!checked)\n                    }\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"ambientIntensity\" className=\"text-sm\">\n                      Ambient Intensity\n                    </Label>\n                    <Input\n                      id=\"ambientIntensityInput\"\n                      type=\"text\"\n                      inputMode=\"decimal\"\n                      value={ambientIntensityInput}\n                      onChange={(e) => setAmbientIntensityInput(e.target.value)}\n                      onBlur={() => {\n                        const value = parseFloat(\n                          ambientIntensityInput.replace(\",\", \".\")\n                        );\n                        if (!isNaN(value)) {\n                          const clamped = Math.max(0, Math.min(2, value));\n                          onAmbientIntensityChange(clamped);\n                        } else {\n                          setAmbientIntensityInput(ambientIntensity.toString());\n                        }\n                      }}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\") {\n                          e.currentTarget.blur();\n                        }\n                      }}\n                      className=\"w-20 h-8 text-xs\"\n                    />\n                  </div>\n                  <Slider\n                    id=\"ambientIntensity\"\n                    min={0}\n                    max={2}\n                    step={0.01}\n                    value={[ambientIntensity]}\n                    onValueChange={([value]) => onAmbientIntensityChange(value)}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"ambientColor\" className=\"text-sm\">\n                    Ambient Color\n                  </Label>\n                  <Popover>\n                    <PopoverTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full justify-start text-left font-normal\"\n                      >\n                        <div\n                          className=\"w-4 h-4 rounded border mr-2\"\n                          style={{ backgroundColor: ambientColor }}\n                        />\n                        <span className=\"text-xs\">{ambientColor}</span>\n                      </Button>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-64\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"ambientColorInput\" className=\"text-sm\">\n                          Choose Color\n                        </Label>\n                        <Input\n                          id=\"ambientColorInput\"\n                          type=\"color\"\n                          value={ambientColor}\n                          onChange={(e) => onAmbientColorChange(e.target.value)}\n                          className=\"h-10 cursor-pointer\"\n                        />\n                        <Input\n                          type=\"text\"\n                          value={ambientColor}\n                          onChange={(e) => onAmbientColorChange(e.target.value)}\n                          className=\"font-mono text-xs\"\n                        />\n                      </div>\n                    </PopoverContent>\n                  </Popover>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"directIntensity\" className=\"text-sm\">\n                      Direct Intensity\n                    </Label>\n                    <Input\n                      id=\"directIntensityInput\"\n                      type=\"text\"\n                      inputMode=\"decimal\"\n                      value={directIntensityInput}\n                      onChange={(e) => setDirectIntensityInput(e.target.value)}\n                      onBlur={() => {\n                        const value = parseFloat(\n                          directIntensityInput.replace(\",\", \".\")\n                        );\n                        if (!isNaN(value)) {\n                          const clamped = Math.max(0, Math.min(4, value));\n                          onDirectIntensityChange(clamped);\n                        } else {\n                          setDirectIntensityInput(directIntensity.toString());\n                        }\n                      }}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\") {\n                          e.currentTarget.blur();\n                        }\n                      }}\n                      className=\"w-20 h-8 text-xs\"\n                    />\n                  </div>\n                  <Slider\n                    id=\"directIntensity\"\n                    min={0}\n                    max={4}\n                    step={0.01}\n                    value={[directIntensity]}\n                    onValueChange={([value]) => onDirectIntensityChange(value)}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"directColor\" className=\"text-sm\">\n                    Direct Color\n                  </Label>\n                  <Popover>\n                    <PopoverTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full justify-start text-left font-normal\"\n                      >\n                        <div\n                          className=\"w-4 h-4 rounded border mr-2\"\n                          style={{ backgroundColor: directColor }}\n                        />\n                        <span className=\"text-xs\">{directColor}</span>\n                      </Button>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-64\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"directColorInput\" className=\"text-sm\">\n                          Choose Color\n                        </Label>\n                        <Input\n                          id=\"directColorInput\"\n                          type=\"color\"\n                          value={directColor}\n                          onChange={(e) => onDirectColorChange(e.target.value)}\n                          className=\"h-10 cursor-pointer\"\n                        />\n                        <Input\n                          type=\"text\"\n                          value={directColor}\n                          onChange={(e) => onDirectColorChange(e.target.value)}\n                          className=\"font-mono text-xs\"\n                        />\n                      </div>\n                    </PopoverContent>\n                  </Popover>\n                </div>\n              </AccordionContent>\n            </AccordionItem>\n\n            {/* Animation Controls */}\n            <AccordionItem value=\"animation\">\n              <AccordionTrigger className=\"px-4 py-3 text-sm font-semibold\">\n                Animation\n              </AccordionTrigger>\n              <AccordionContent className=\"px-4 pb-4 space-y-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"playbackSpeed\" className=\"text-sm\">\n                      Playback Speed\n                    </Label>\n                    <Input\n                      id=\"playbackSpeedInput\"\n                      type=\"text\"\n                      inputMode=\"decimal\"\n                      value={playbackSpeedInput}\n                      onChange={(e) => setPlaybackSpeedInput(e.target.value)}\n                      onBlur={() => {\n                        const value = parseFloat(\n                          playbackSpeedInput.replace(\",\", \".\")\n                        );\n                        if (!isNaN(value)) {\n                          const clamped = Math.max(0, Math.min(1, value));\n                          onPlaybackSpeedChange(clamped);\n                        } else {\n                          setPlaybackSpeedInput(playbackSpeed.toString());\n                        }\n                      }}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\") {\n                          e.currentTarget.blur();\n                        }\n                      }}\n                      className=\"w-20 h-8 text-xs\"\n                    />\n                  </div>\n                  <Slider\n                    id=\"playbackSpeed\"\n                    min={0}\n                    max={1}\n                    step={0.01}\n                    value={[playbackSpeed]}\n                    onValueChange={([value]) => onPlaybackSpeedChange(value)}\n                  />\n                </div>\n\n                <Button\n                  onClick={onPlayAllClips}\n                  variant=\"outline\"\n                  className=\"w-full\"\n                >\n                  Play All\n                </Button>\n              </AccordionContent>\n            </AccordionItem>\n          </Accordion>\n\n          {/* Close Control Button */}\n          <div className=\"p-4 border-t\">\n            <Button\n              onClick={() => setShowControls(false)}\n              variant=\"outline\"\n              className=\"w-full\"\n            >\n              Close Control\n            </Button>\n          </div>\n        </div>\n      ) : (\n        /* Open Control Button */\n        <div className=\"absolute top-20 right-4 z-[45]\">\n          <Button\n            onClick={() => setShowControls(true)}\n            variant=\"default\"\n            size=\"sm\"\n          >\n            Open Control\n          </Button>\n        </div>\n      )}\n    </>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1500, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/GLTFViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  useEffect,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n  useCallback,\n  useState,\n} from \"react\";\nimport * as THREE from \"three\";\nimport { GLTFLoader, GLTF } from \"three/addons/loaders/GLTFLoader.js\";\nimport { OrbitControls } from \"three/addons/controls/OrbitControls.js\";\nimport { DRACOLoader } from \"three/addons/loaders/DRACOLoader.js\";\nimport { DatGUIControl } from \"@/components/DatGUIControl\";\n\nexport interface GLTFViewerRef {\n  loadGLTF: (\n    rootFile: File,\n    rootPath: string,\n    fileMap: Map<string, File>,\n    onProgress?: (progress: number) => void\n  ) => Promise<void>;\n  clearScene: () => void;\n  resetCharacterPosition: () => void;\n  setEnvironment: (envName: string) => void;\n  setWireframe: (enabled: boolean) => void;\n  playAnimation: (index: number) => void;\n}\n\ninterface GLTFViewerProps {\n  theme?: \"light\" | \"dark\";\n}\n\n// Basic neutral environment using RoomEnvironment-like setup\nconst createNeutralEnvironment = (\n  renderer: THREE.WebGLRenderer\n): THREE.Texture => {\n  const scene = new THREE.Scene();\n  const geometry = new THREE.BoxGeometry();\n  geometry.deleteAttribute(\"uv\");\n  const roomMaterial = new THREE.MeshStandardMaterial({\n    side: THREE.BackSide,\n    color: 0xffffff,\n  });\n  const room = new THREE.Mesh(geometry, roomMaterial);\n  room.scale.setScalar(10);\n  scene.add(room);\n\n  const mainLight = new THREE.PointLight(0xffffff, 50, 0, 2);\n  mainLight.position.set(0.418, 16.199, 0.3);\n  scene.add(mainLight);\n\n  const pmremGenerator = new THREE.PMREMGenerator(renderer);\n  const renderTarget = pmremGenerator.fromScene(scene, 0.04);\n  pmremGenerator.dispose();\n\n  return renderTarget.texture;\n};\n\n// Helper function to traverse materials\nconst traverseMaterials = (\n  object: THREE.Object3D,\n  callback: (material: THREE.Material) => void\n) => {\n  object.traverse((node) => {\n    const mesh = node as THREE.Mesh;\n    if (!mesh.geometry) return;\n    const materials = Array.isArray(mesh.material)\n      ? mesh.material\n      : [mesh.material];\n    materials.forEach(callback);\n  });\n};\n\nexport const GLTFViewer = forwardRef<GLTFViewerRef, GLTFViewerProps>(\n  ({ theme = \"dark\" }, ref) => {\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const sceneRef = useRef<THREE.Scene | null>(null);\n    const contentRef = useRef<THREE.Object3D | null>(null);\n    const cameraRef = useRef<THREE.PerspectiveCamera | null>(null);\n    const controlsRef = useRef<OrbitControls | null>(null);\n    const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\n    const loaderRef = useRef<GLTFLoader | null>(null);\n    const mixerRef = useRef<THREE.AnimationMixer | null>(null);\n    const clipsRef = useRef<THREE.AnimationClip[]>([]);\n    const lightsRef = useRef<THREE.Light[]>([]);\n    const neutralEnvRef = useRef<THREE.Texture | null>(null);\n    const blobUrlsRef = useRef<Set<string>>(new Set());\n    const gridHelperRef = useRef<THREE.GridHelper | null>(null);\n    const axesHelperRef = useRef<THREE.AxesHelper | null>(null);\n    const clockRef = useRef<THREE.Clock>(new THREE.Clock());\n    const skeletonHelpersRef = useRef<THREE.SkeletonHelper[]>([]);\n\n    // UI State\n    const [background, setBackground] = useState(false);\n    const [playbackSpeed, setPlaybackSpeed] = useState(1.0);\n    const [wireframe, setWireframe] = useState(false);\n    const [skeleton, setSkeleton] = useState(false);\n    const [grid, setGrid] = useState(true);\n    const [autoRotate, setAutoRotate] = useState(false);\n    const [punctualLights, setPunctualLights] = useState(true);\n    const [exposure, setExposure] = useState(0.0);\n    const [toneMapping, setToneMapping] = useState<string>(\"Linear\");\n    const [ambientIntensity, setAmbientIntensity] = useState(0.3);\n    const [ambientColor, setAmbientColor] = useState(\"#FFFFFF\");\n    const [directIntensity, setDirectIntensity] = useState(0.8 * Math.PI);\n    const [directColor, setDirectColor] = useState(\"#FFFFFF\");\n    const [bgColor, setBgColor] = useState(\n      theme === \"light\" ? \"#f2f2f2\" : \"#191919\"\n    );\n    const [pointSize, setPointSize] = useState(1.0);\n\n    const stateRef = useRef({\n      background: false,\n      playbackSpeed: 1.0,\n      wireframe: false,\n      skeleton: false,\n      grid: true,\n      autoRotate: false,\n      punctualLights: true,\n      exposure: 0.0,\n      toneMapping: THREE.LinearToneMapping as THREE.ToneMapping,\n      ambientIntensity: 0.3,\n      ambientColor: \"#FFFFFF\",\n      directIntensity: 0.8 * Math.PI,\n      directColor: \"#FFFFFF\",\n      bgColor: theme === \"light\" ? \"#f2f2f2\" : \"#191919\",\n      pointSize: 1.0,\n      screenSpacePanning: true,\n    });\n\n    // Sync state to stateRef for rendering\n    useEffect(() => {\n      stateRef.current.background = background;\n      stateRef.current.playbackSpeed = playbackSpeed;\n      stateRef.current.wireframe = wireframe;\n      stateRef.current.skeleton = skeleton;\n      stateRef.current.grid = grid;\n      stateRef.current.autoRotate = autoRotate;\n      stateRef.current.punctualLights = punctualLights;\n      stateRef.current.exposure = exposure;\n      stateRef.current.toneMapping =\n        toneMapping === \"ACES Filmic\"\n          ? THREE.ACESFilmicToneMapping\n          : THREE.LinearToneMapping;\n      stateRef.current.ambientIntensity = ambientIntensity;\n      stateRef.current.ambientColor = ambientColor;\n      stateRef.current.directIntensity = directIntensity;\n      stateRef.current.directColor = directColor;\n      stateRef.current.bgColor = bgColor;\n      stateRef.current.pointSize = pointSize;\n    }, [\n      background,\n      playbackSpeed,\n      wireframe,\n      skeleton,\n      grid,\n      autoRotate,\n      punctualLights,\n      exposure,\n      toneMapping,\n      ambientIntensity,\n      ambientColor,\n      directIntensity,\n      directColor,\n      bgColor,\n      pointSize,\n    ]);\n\n    const updateLights = useCallback(() => {\n      const state = stateRef.current;\n      const lights = lightsRef.current;\n      const renderer = rendererRef.current;\n\n      if (!renderer) return;\n\n      if (state.punctualLights && !lights.length) {\n        addLights();\n      } else if (!state.punctualLights && lights.length) {\n        removeLights();\n      }\n\n      renderer.toneMapping = state.toneMapping as THREE.ToneMapping;\n      renderer.toneMappingExposure = Math.pow(2, state.exposure);\n\n      if (lights.length === 2) {\n        lights[0].intensity = state.ambientIntensity;\n        (lights[0] as THREE.AmbientLight).color.set(state.ambientColor);\n        lights[1].intensity = state.directIntensity;\n        (lights[1] as THREE.DirectionalLight).color.set(state.directColor);\n      }\n    }, []);\n\n    const updateDisplay = useCallback(() => {\n      if (!contentRef.current || !sceneRef.current) return;\n\n      // Remove existing skeleton helpers\n      if (skeletonHelpersRef.current.length) {\n        skeletonHelpersRef.current.forEach((helper) =>\n          sceneRef.current?.remove(helper)\n        );\n        skeletonHelpersRef.current = [];\n      }\n\n      // Update materials\n      traverseMaterials(contentRef.current, (material) => {\n        if (\"wireframe\" in material) {\n          (material as THREE.MeshStandardMaterial).wireframe =\n            stateRef.current.wireframe;\n        }\n\n        if (material instanceof THREE.PointsMaterial) {\n          material.size = stateRef.current.pointSize;\n        }\n      });\n\n      // Add skeleton helpers if enabled\n      contentRef.current.traverse((node) => {\n        const mesh = node as THREE.SkinnedMesh;\n        if (mesh.geometry && mesh.skeleton && stateRef.current.skeleton) {\n          const helper = new THREE.SkeletonHelper(\n            mesh.skeleton.bones[0].parent!\n          );\n          (helper.material as THREE.LineBasicMaterial).linewidth = 3;\n          sceneRef.current?.add(helper);\n          skeletonHelpersRef.current.push(helper);\n        }\n      });\n\n      // Update grid and axes\n      if (stateRef.current.grid !== Boolean(gridHelperRef.current)) {\n        if (stateRef.current.grid) {\n          gridHelperRef.current = new THREE.GridHelper(10, 10);\n          axesHelperRef.current = new THREE.AxesHelper(5);\n          axesHelperRef.current.renderOrder = 999;\n          sceneRef.current.add(gridHelperRef.current);\n          sceneRef.current.add(axesHelperRef.current);\n        } else {\n          if (gridHelperRef.current)\n            sceneRef.current.remove(gridHelperRef.current);\n          if (axesHelperRef.current)\n            sceneRef.current.remove(axesHelperRef.current);\n          gridHelperRef.current = null;\n          axesHelperRef.current = null;\n        }\n      }\n\n      if (controlsRef.current) {\n        controlsRef.current.autoRotate = stateRef.current.autoRotate;\n      }\n    }, []);\n\n    const updateBackground = useCallback(() => {\n      if (!sceneRef.current) return;\n      sceneRef.current.background = new THREE.Color(stateRef.current.bgColor);\n    }, []);\n\n    const updateEnvironment = useCallback(() => {\n      if (!sceneRef.current || !neutralEnvRef.current) return;\n\n      const backgroundColor = new THREE.Color(stateRef.current.bgColor);\n      sceneRef.current.environment = neutralEnvRef.current;\n      sceneRef.current.background = stateRef.current.background\n        ? neutralEnvRef.current\n        : backgroundColor;\n    }, []);\n\n    const playAllClips = useCallback(() => {\n      if (!mixerRef.current) return;\n      clipsRef.current.forEach((clip) => {\n        const action = mixerRef.current!.clipAction(clip);\n        action.reset().play();\n      });\n    }, []);\n\n    useImperativeHandle(ref, () => ({\n      clearScene: () => {\n        if (!sceneRef.current || !contentRef.current) return;\n\n        sceneRef.current.remove(contentRef.current);\n\n        // Dispose geometry\n        contentRef.current.traverse((node) => {\n          const mesh = node as THREE.Mesh;\n          if (mesh.geometry) {\n            mesh.geometry.dispose();\n          }\n        });\n\n        // Dispose textures\n        contentRef.current.traverse((node) => {\n          const mesh = node as THREE.Mesh;\n          if (!mesh.material) return;\n          const materials = Array.isArray(mesh.material)\n            ? mesh.material\n            : [mesh.material];\n          materials.forEach((material) => {\n            for (const key in material) {\n              const prop = (material as unknown as Record<string, unknown>)[\n                key\n              ];\n              if (\n                key !== \"envMap\" &&\n                prop &&\n                typeof prop === \"object\" &&\n                prop !== null &&\n                \"isTexture\" in prop\n              ) {\n                (prop as THREE.Texture).dispose();\n              }\n            }\n          });\n        });\n\n        contentRef.current = null;\n        clipsRef.current = [];\n\n        if (mixerRef.current) {\n          mixerRef.current.stopAllAction();\n          mixerRef.current = null;\n        }\n\n        // Remove skeleton helpers\n        if (skeletonHelpersRef.current.length) {\n          skeletonHelpersRef.current.forEach((helper) =>\n            sceneRef.current?.remove(helper)\n          );\n          skeletonHelpersRef.current = [];\n        }\n\n        console.log(\" Scene cleared\");\n      },\n\n      resetCharacterPosition: () => {\n        // Stop any playing animation\n        if (mixerRef.current) {\n          mixerRef.current.stopAllAction();\n        }\n\n        // Reset model position and rotation to origin\n        if (contentRef.current) {\n          contentRef.current.position.set(0, 0, 0);\n          contentRef.current.rotation.set(0, 0, 0);\n          contentRef.current.scale.set(1, 1, 1);\n        }\n\n        console.log(\" Character position reset\");\n      },\n\n      setEnvironment: (envName: string) => {\n        console.log(\"Setting environment:\", envName);\n        updateEnvironment();\n      },\n\n      setWireframe: (enabled: boolean) => {\n        stateRef.current.wireframe = enabled;\n        updateDisplay();\n      },\n\n      playAnimation: (index: number) => {\n        if (!mixerRef.current || !clipsRef.current[index]) return;\n        mixerRef.current.stopAllAction();\n        const action = mixerRef.current.clipAction(clipsRef.current[index]);\n        action.reset().play();\n      },\n\n      loadGLTF: async (\n        rootFile: File,\n        rootPath: string,\n        fileMap: Map<string, File>,\n        onProgress?: (progress: number) => void\n      ) => {\n        return new Promise((resolve, reject) => {\n          if (!loaderRef.current || !sceneRef.current) {\n            reject(new Error(\"GLTF loader not initialized\"));\n            return;\n          }\n\n          // Clear previous blob URLs\n          blobUrlsRef.current.forEach((url) => URL.revokeObjectURL(url));\n          blobUrlsRef.current.clear();\n\n          // Create blob URLs for all files\n          const blobUrlMap = new Map<string, string>();\n          fileMap.forEach((file, path) => {\n            const blobUrl = URL.createObjectURL(file);\n            blobUrlsRef.current.add(blobUrl);\n            blobUrlMap.set(path, blobUrl);\n          });\n\n          // Get the main file blob URL\n          const mainPath = rootPath + rootFile.name;\n          const mainBlobUrl =\n            blobUrlMap.get(mainPath) || blobUrlMap.get(rootFile.name);\n\n          if (!mainBlobUrl) {\n            reject(new Error(\"Could not create blob URL for main file\"));\n            return;\n          }\n\n          // Set URL modifier to intercept asset loading\n          const manager = new THREE.LoadingManager();\n          manager.setURLModifier((url) => {\n            const decodedUrl = decodeURI(url);\n            const normalizedUrl = rootPath + decodedUrl.replace(/^(\\.?\\/)/, \"\");\n\n            // Try to find the file in the map\n            for (const [path, blobUrl] of blobUrlMap) {\n              if (\n                path === normalizedUrl ||\n                path.endsWith(decodedUrl) ||\n                path === decodedUrl\n              ) {\n                return blobUrl;\n              }\n            }\n\n            return url;\n          });\n\n          const loader = new GLTFLoader(manager);\n\n          // Setup DRACOLoader for compressed models\n          const dracoLoader = new DRACOLoader();\n          dracoLoader.setDecoderPath(\n            \"https://www.gstatic.com/draco/versioned/decoders/1.5.6/\"\n          );\n          dracoLoader.preload();\n          loader.setDRACOLoader(dracoLoader);\n\n          loader.load(\n            mainBlobUrl,\n            (gltf: GLTF) => {\n              handleGLTFLoad(gltf);\n              resolve();\n            },\n            (progressEvent) => {\n              if (progressEvent.lengthComputable) {\n                const percent = Math.round(\n                  (progressEvent.loaded / progressEvent.total) * 100\n                );\n                onProgress?.(percent);\n              }\n            },\n            (error) => {\n              console.error(\"Error loading GLTF:\", error);\n              reject(error);\n            }\n          );\n        });\n      },\n    }));\n\n    const handleGLTFLoad = (gltf: GLTF) => {\n      if (!sceneRef.current || !cameraRef.current || !controlsRef.current)\n        return;\n\n      const scene = gltf.scene || gltf.scenes[0];\n      const clips = gltf.animations || [];\n\n      if (!scene) {\n        throw new Error(\n          \"This model contains no scene, and cannot be viewed here.\"\n        );\n      }\n\n      scene.updateMatrixWorld();\n\n      // Calculate bounding box\n      const box = new THREE.Box3().setFromObject(scene);\n      const size = box.getSize(new THREE.Vector3()).length();\n      const center = box.getCenter(new THREE.Vector3());\n\n      // Reset controls\n      controlsRef.current.reset();\n\n      // Center the model\n      scene.position.x -= center.x;\n      scene.position.y -= center.y;\n      scene.position.z -= center.z;\n\n      // Update camera and controls\n      controlsRef.current.maxDistance = size * 10;\n      cameraRef.current.near = size / 100;\n      cameraRef.current.far = size * 100;\n      cameraRef.current.updateProjectionMatrix();\n\n      cameraRef.current.position.copy(center);\n      cameraRef.current.position.x += size / 2.0;\n      cameraRef.current.position.y += size / 5.0;\n      cameraRef.current.position.z += size / 2.0;\n      cameraRef.current.lookAt(center);\n\n      controlsRef.current.target.copy(new THREE.Vector3(0, 0, 0));\n      controlsRef.current.saveState();\n\n      sceneRef.current.add(scene);\n      contentRef.current = scene;\n      clipsRef.current = clips;\n\n      // Check if scene has lights\n      let hasLights = false;\n      scene.traverse((node) => {\n        if (node instanceof THREE.Light) {\n          hasLights = true;\n        }\n      });\n\n      // Update punctual lights state\n      stateRef.current.punctualLights = !hasLights;\n\n      // Add default lights if none present\n      if (!hasLights && lightsRef.current.length === 0) {\n        addLights();\n      }\n\n      // Setup animations\n      if (clips.length > 0) {\n        mixerRef.current = new THREE.AnimationMixer(scene);\n        // Auto-play first animation\n        const action = mixerRef.current.clipAction(clips[0]);\n        action.play();\n      }\n\n      // Update GUI and display\n      updateLights();\n      updateDisplay();\n      updateEnvironment();\n\n      console.log(\" GLTF model loaded:\", {\n        animations: clips.length,\n        hasLights,\n        size: size.toFixed(2),\n      });\n    };\n\n    const addLights = () => {\n      if (!cameraRef.current) return;\n\n      const ambientLight = new THREE.AmbientLight(\n        stateRef.current.ambientColor,\n        stateRef.current.ambientIntensity\n      );\n      ambientLight.name = \"ambient_light\";\n      cameraRef.current.add(ambientLight);\n\n      const directionalLight = new THREE.DirectionalLight(\n        stateRef.current.directColor,\n        stateRef.current.directIntensity\n      );\n      directionalLight.position.set(0.5, 0, 0.866);\n      directionalLight.name = \"main_light\";\n      cameraRef.current.add(directionalLight);\n\n      lightsRef.current.push(ambientLight, directionalLight);\n    };\n\n    const removeLights = () => {\n      lightsRef.current.forEach((light) => {\n        if (light.parent) {\n          light.parent.remove(light);\n        }\n      });\n      lightsRef.current = [];\n    };\n\n    useEffect(() => {\n      if (!canvasRef.current) return;\n\n      const container = canvasRef.current.parentElement;\n      if (!container) return;\n\n      // Capture blob URLs for cleanup\n      const blobUrlsToCleanup = blobUrlsRef.current;\n\n      // Check WebGL support\n      const testCanvas = document.createElement(\"canvas\");\n      const gl =\n        testCanvas.getContext(\"webgl\") ||\n        (testCanvas.getContext(\n          \"experimental-webgl\"\n        ) as WebGLRenderingContext | null);\n\n      if (!gl) {\n        console.error(\" WebGL not supported!\");\n        return;\n      }\n\n      console.log(\" WebGL supported\");\n\n      // Setup renderer\n      const renderer = new THREE.WebGLRenderer({\n        canvas: canvasRef.current,\n        antialias: true,\n      });\n      renderer.setSize(container.clientWidth, container.clientHeight);\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.outputColorSpace = THREE.SRGBColorSpace;\n      renderer.toneMapping = stateRef.current.toneMapping as THREE.ToneMapping;\n      renderer.toneMappingExposure = Math.pow(2, stateRef.current.exposure);\n      rendererRef.current = renderer;\n\n      // Setup camera\n      const camera = new THREE.PerspectiveCamera(\n        60,\n        container.clientWidth / container.clientHeight,\n        0.01,\n        1000\n      );\n      camera.position.set(0, 1, 5);\n      cameraRef.current = camera;\n\n      // Setup scene\n      const scene = new THREE.Scene();\n      scene.background = new THREE.Color(stateRef.current.bgColor);\n      sceneRef.current = scene;\n\n      // Add camera to scene (required for lights attached to camera)\n      scene.add(camera);\n\n      // Create neutral environment\n      const neutralEnv = createNeutralEnvironment(renderer);\n      neutralEnvRef.current = neutralEnv;\n      scene.environment = neutralEnv;\n\n      // Setup controls\n      const controls = new OrbitControls(camera, renderer.domElement);\n      controls.screenSpacePanning = true;\n      controls.target.set(0, 0, 0);\n      controls.enableDamping = true;\n      controls.dampingFactor = 0.05;\n\n      // Fix for touch events error\n      controls.touches = {\n        ONE: THREE.TOUCH.ROTATE,\n        TWO: THREE.TOUCH.DOLLY_PAN,\n      };\n\n      controls.update();\n      controlsRef.current = controls;\n\n      // Add default lights (before model loads)\n      addLights();\n\n      // Add grid and axes helpers (initially visible)\n      const gridHelper = new THREE.GridHelper(10, 10);\n      gridHelperRef.current = gridHelper;\n      scene.add(gridHelper);\n\n      const axesHelper = new THREE.AxesHelper(5);\n      axesHelperRef.current = axesHelper;\n      scene.add(axesHelper);\n\n      // Setup loader\n      const loader = new GLTFLoader();\n      const dracoLoader = new DRACOLoader();\n      dracoLoader.setDecoderPath(\n        \"https://www.gstatic.com/draco/versioned/decoders/1.5.6/\"\n      );\n      dracoLoader.preload();\n      loader.setDRACOLoader(dracoLoader);\n      loaderRef.current = loader;\n\n      // Animation loop\n      const animate = () => {\n        requestAnimationFrame(animate);\n\n        const delta = clockRef.current.getDelta();\n\n        // Update mixer\n        if (mixerRef.current) {\n          mixerRef.current.update(delta);\n        }\n\n        controls.update();\n        renderer.render(scene, camera);\n      };\n      animate();\n\n      // Handle resize\n      const handleResize = () => {\n        if (!container) return;\n        camera.aspect = container.clientWidth / container.clientHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize(container.clientWidth, container.clientHeight);\n      };\n      window.addEventListener(\"resize\", handleResize);\n\n      // Cleanup\n      return () => {\n        window.removeEventListener(\"resize\", handleResize);\n        renderer.dispose();\n        controls.dispose();\n        scene.clear();\n        removeLights();\n\n        // Revoke blob URLs\n        blobUrlsToCleanup.forEach((url) => URL.revokeObjectURL(url));\n\n        // Dispose neutral environment\n        if (neutralEnvRef.current) {\n          neutralEnvRef.current.dispose();\n        }\n      };\n    }, []);\n\n    // Update background color when theme changes\n    useEffect(() => {\n      const newBgColor = theme === \"light\" ? \"#f2f2f2\" : \"#191919\";\n      setBgColor(newBgColor);\n      stateRef.current.bgColor = newBgColor;\n\n      if (sceneRef.current) {\n        sceneRef.current.background = new THREE.Color(newBgColor);\n      }\n    }, [theme]);\n\n    return (\n      <div className=\"relative w-full h-full\">\n        <canvas\n          ref={canvasRef}\n          className=\"w-full h-full\"\n          style={{ display: \"block\" }}\n        />\n\n        {/* shadcn UI Controls Panel */}\n        <DatGUIControl\n          background={background}\n          onBackgroundChange={(value) => {\n            setBackground(value);\n            updateEnvironment();\n          }}\n          autoRotate={autoRotate}\n          onAutoRotateChange={(value) => {\n            setAutoRotate(value);\n            updateDisplay();\n          }}\n          wireframe={wireframe}\n          onWireframeChange={(value) => {\n            setWireframe(value);\n            updateDisplay();\n          }}\n          skeleton={skeleton}\n          onSkeletonChange={(value) => {\n            setSkeleton(value);\n            updateDisplay();\n          }}\n          grid={grid}\n          onGridChange={(value) => {\n            setGrid(value);\n            updateDisplay();\n          }}\n          pointSize={pointSize}\n          onPointSizeChange={(value) => {\n            setPointSize(value);\n            updateDisplay();\n          }}\n          bgColor={bgColor}\n          onBgColorChange={(value) => {\n            setBgColor(value);\n            updateBackground();\n          }}\n          toneMapping={toneMapping}\n          onToneMappingChange={(value) => {\n            setToneMapping(value);\n            updateLights();\n          }}\n          exposure={exposure}\n          onExposureChange={(value) => {\n            setExposure(value);\n            updateLights();\n          }}\n          punctualLights={punctualLights}\n          onPunctualLightsChange={(value) => {\n            setPunctualLights(value);\n            updateLights();\n          }}\n          ambientIntensity={ambientIntensity}\n          onAmbientIntensityChange={(value) => {\n            setAmbientIntensity(value);\n            updateLights();\n          }}\n          ambientColor={ambientColor}\n          onAmbientColorChange={(value) => {\n            setAmbientColor(value);\n            updateLights();\n          }}\n          directIntensity={directIntensity}\n          onDirectIntensityChange={(value) => {\n            setDirectIntensity(value);\n            updateLights();\n          }}\n          directColor={directColor}\n          onDirectColorChange={(value) => {\n            setDirectColor(value);\n            updateLights();\n          }}\n          playbackSpeed={playbackSpeed}\n          onPlaybackSpeedChange={(value) => {\n            setPlaybackSpeed(value);\n            if (mixerRef.current) mixerRef.current.timeScale = value;\n          }}\n          onPlayAllClips={playAllClips}\n        />\n      </div>\n    );\n  }\n);\n\nGLTFViewer.displayName = \"GLTFViewer\";\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2145, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/shadcn-io/dock/index.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  motion,\n  MotionValue,\n  useMotionValue,\n  useSpring,\n  useTransform,\n  type SpringOptions,\n  AnimatePresence,\n} from \"framer-motion\";\nimport {\n  Children,\n  cloneElement,\n  createContext,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst DOCK_HEIGHT = 128;\nconst DEFAULT_MAGNIFICATION = 80;\nconst DEFAULT_DISTANCE = 150;\nconst DEFAULT_PANEL_HEIGHT = 80;\n\ntype DockProps = {\n  children: React.ReactNode;\n  className?: string;\n  distance?: number;\n  panelHeight?: number;\n  magnification?: number;\n  spring?: SpringOptions;\n};\ntype DockItemProps = {\n  className?: string;\n  children: React.ReactNode;\n};\ntype DockLabelProps = {\n  className?: string;\n  children: React.ReactNode;\n};\ntype DockIconProps = {\n  className?: string;\n  children: React.ReactNode;\n};\n\ntype DocContextType = {\n  mouseX: MotionValue;\n  spring: SpringOptions;\n  magnification: number;\n  distance: number;\n};\ntype DockProviderProps = {\n  children: React.ReactNode;\n  value: DocContextType;\n};\n\nconst DockContext = createContext<DocContextType | undefined>(undefined);\n\nfunction DockProvider({ children, value }: DockProviderProps) {\n  return <DockContext.Provider value={value}>{children}</DockContext.Provider>;\n}\n\nfunction useDock() {\n  const context = useContext(DockContext);\n  if (!context) {\n    throw new Error(\"useDock must be used within an DockProvider\");\n  }\n  return context;\n}\n\nfunction Dock({\n  children,\n  className,\n  spring = { mass: 0.1, stiffness: 150, damping: 12 },\n  magnification = DEFAULT_MAGNIFICATION,\n  distance = DEFAULT_DISTANCE,\n  panelHeight = DEFAULT_PANEL_HEIGHT,\n}: DockProps) {\n  const mouseX = useMotionValue(Infinity);\n  const isHovered = useMotionValue(0);\n\n  const maxHeight = useMemo(() => {\n    return Math.max(DOCK_HEIGHT, magnification + magnification / 2 + 4);\n  }, [magnification]);\n\n  const heightRow = useTransform(isHovered, [0, 1], [panelHeight, maxHeight]);\n  const height = useSpring(heightRow, spring);\n\n  return (\n    <motion.div\n      style={{\n        height: height,\n        scrollbarWidth: \"none\",\n      }}\n      className=\"mx-2 flex max-w-full items-end overflow-x-auto\"\n    >\n      <motion.div\n        onMouseMove={({ pageX }) => {\n          isHovered.set(1);\n          mouseX.set(pageX);\n        }}\n        onMouseLeave={() => {\n          isHovered.set(0);\n          mouseX.set(Infinity);\n        }}\n        className={cn(\n          \"mx-auto flex w-fit gap-4 rounded-2xl bg-gray-50 px-4 dark:bg-neutral-900\",\n          className\n        )}\n        style={{ height: panelHeight }}\n        role=\"toolbar\"\n        aria-label=\"Application dock\"\n      >\n        <DockProvider value={{ mouseX, spring, distance, magnification }}>\n          {children}\n        </DockProvider>\n      </motion.div>\n    </motion.div>\n  );\n}\n\nfunction DockItem({ children, className }: DockItemProps) {\n  const ref = useRef<HTMLDivElement>(null);\n\n  const { distance, magnification, mouseX, spring } = useDock();\n\n  const isHovered = useMotionValue(0);\n\n  const mouseDistance = useTransform(mouseX, (val) => {\n    const domRect = ref.current?.getBoundingClientRect() ?? { x: 0, width: 0 };\n    return val - domRect.x - domRect.width / 2;\n  });\n\n  const widthTransform = useTransform(\n    mouseDistance,\n    [-distance, 0, distance],\n    [56, magnification, 56]\n  );\n\n  const width = useSpring(widthTransform, spring);\n\n  return (\n    <motion.div\n      ref={ref}\n      style={{ width }}\n      onHoverStart={() => isHovered.set(1)}\n      onHoverEnd={() => isHovered.set(0)}\n      onFocus={() => isHovered.set(1)}\n      onBlur={() => isHovered.set(0)}\n      className={cn(\n        \"relative inline-flex items-center justify-center\",\n        className\n      )}\n      tabIndex={0}\n      role=\"button\"\n      aria-haspopup=\"true\"\n    >\n      {Children.map(children, (child) =>\n        cloneElement(child as React.ReactElement<any>, { width, isHovered })\n      )}\n    </motion.div>\n  );\n}\n\nfunction DockLabel({ children, className, ...rest }: DockLabelProps) {\n  const restProps = rest as Record<string, unknown>;\n  const isHovered = restProps[\"isHovered\"] as MotionValue<number>;\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const unsubscribe = isHovered.on(\"change\", (latest) => {\n      setIsVisible(latest === 1);\n    });\n\n    return () => unsubscribe();\n  }, [isHovered]);\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 0, y: 0 }}\n          animate={{ opacity: 1, y: -10 }}\n          exit={{ opacity: 0, y: 0 }}\n          transition={{ duration: 0.2 }}\n          className={cn(\n            \"absolute -top-6 left-1/2 w-fit whitespace-pre rounded-md border border-gray-200 bg-gray-100 px-2 py-0.5 text-xs text-neutral-700 dark:border-neutral-900 dark:bg-neutral-800 dark:text-white\",\n            className\n          )}\n          role=\"tooltip\"\n          style={{ x: \"-50%\" }}\n        >\n          {children}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\nfunction DockIcon({ children, className, ...rest }: DockIconProps) {\n  const restProps = rest as Record<string, unknown>;\n  const width = restProps[\"width\"] as MotionValue<number>;\n\n  const widthTransform = useTransform(width, (val) => val / 2);\n\n  return (\n    <motion.div\n      style={{ width: widthTransform }}\n      className={cn(\"flex items-center justify-center\", className)}\n    >\n      {children}\n    </motion.div>\n  );\n}\n\nexport { Dock, DockIcon, DockItem, DockLabel };\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2366, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/dropdown-menu.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { Check } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm font-medium outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName;\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName;\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n));\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n));\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName;\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n));\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => (\n  <span\n    className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n    {...props}\n  />\n);\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\";\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,eAAe,oLAA0B;AAE/C,MAAM,sBAAsB,uLAA6B;AAEzD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,kBAAkB,mLAAyB;AAEjD,MAAM,yBAAyB,0LAAgC;AAE/D,MAAM,uCAAyB,mNAAgB,CAK7C,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,oJACA,SAAS,QACT;QAED,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kcACA;QAED,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,oCAAsB,mNAAgB,CAG1C,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,8OAAC,sLAA4B;kBAC3B,cAAA,8OAAC,uLAA6B;YAC5B,KAAK;YACL,YAAY;YACZ,WAAW,IAAA,kHAAE,EACX,kcACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,oBAAoB,WAAW,GAAG,uLAA6B,CAAC,WAAW;AAE3E,MAAM,iCAAmB,mNAAgB,CAKvC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mOACA,SAAS,QACT;QAED,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,yCAA2B,mNAAgB,CAG/C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBAC7C,8OAAC,4LAAkC;QACjC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,wOACA;QAEF,SAAS;QACR,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,6LAAmC;8BAClC,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;YAGpB;;;;;;;AAGL,yBAAyB,WAAW,GAClC,4LAAkC,CAAC,WAAW;AAEhD,MAAM,sCAAwB,mNAAgB,CAG5C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,yLAA+B;QAC9B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mOACA;QAED,GAAG,KAAK;kBAER;;;;;;AAGL,sBAAsB,WAAW,GAAG,yLAA+B,CAAC,WAAW;AAE/E,MAAM,kCAAoB,mNAAgB,CAKxC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qCACA,SAAS,QACT;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,sCAAwB,mNAAgB,CAG5C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yLAA+B;QAC9B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,sBAAsB,WAAW,GAAG,yLAA+B,CAAC,WAAW;AAE/E,MAAM,uBAAuB,CAAC,EAC5B,SAAS,EACT,GAAG,OACmC,iBACtC,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,8CAA8C;QAC3D,GAAG,KAAK;;;;;;AAGb,qBAAqB,WAAW,GAAG"}},
    {"offset": {"line": 2540, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/assets/index.tsx"],"sourcesContent":["interface IconProps {\n  className?: string;\n}\n\nexport const ChatIcon = ({ className }: IconProps) => (\n  <svg\n    viewBox=\"0 0 511.998 511.998\"\n    className={className}\n    fill=\"currentColor\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M418.643,21.318H221.353c-51.547,0-93.355,41.807-93.355,93.355v13.312H93.355C41.807,127.984,0,169.792,0,221.339\n\t\t\t\tv88.683c0,55.289,26.377,95.296,76.864,95.296h8.469v64c0,22.932,31.239,29.714,40.747,8.845\n\t\t\t\tc7.211-15.827,19.353-30.833,35.143-44.611c9.913-8.65,20.621-16.265,31.321-22.725c3.835-2.315,7.11-4.157,9.649-5.509h75.14\n\t\t\t\tc52.857,0,106.667-44.46,106.667-95.296v-11.371h51.134c50.487,0,76.864-40.007,76.864-95.296v-88.683\n\t\t\t\tC511.998,63.119,470.206,21.318,418.643,21.318z M277.333,362.651H197.12c-3.133,0-6.227,0.69-9.063,2.021\n\t\t\t\tc-3.758,1.764-9.867,4.982-17.563,9.628c-12.7,7.667-25.394,16.695-37.322,27.103c-1.756,1.533-3.481,3.081-5.172,4.647v-22.065\n\t\t\t\tc0-11.782-9.551-21.333-21.333-21.333H76.864c-22.276,0-34.197-18.081-34.197-52.629v-88.683\n\t\t\t\tc0-27.983,22.705-50.688,50.688-50.688h55.977h141.312c1.198,0,2.383,0.057,3.56,0.138c21.165,1.471,38.766,15.936,44.849,35.478\n\t\t\t\tc1.481,4.761,2.279,9.823,2.279,15.072v55.979c0,0.015,0.002,0.029,0.002,0.044v32.661\n\t\t\t\tC341.333,335.302,308.233,362.651,277.333,362.651z M469.331,203.355c0,34.548-11.921,52.629-34.197,52.629H384v-34.645\n\t\t\t\tc0-9.74-1.495-19.131-4.264-27.959c-11.505-36.697-45.057-63.637-85.143-65.306c-1.31-0.055-2.625-0.089-3.948-0.089h-0.002\n\t\t\t\tH170.665v-13.312c0-27.983,22.705-50.688,50.688-50.688h197.291c27.996,0,50.688,22.696,50.688,50.688V203.355z\"\n    />\n    <path\n      d=\"M192,234.651c-11.776,0-21.333,9.557-21.333,21.333c0,11.776,9.557,21.333,21.333,21.333s21.333-9.557,21.333-21.333\n\t\t\t\tC213.333,244.208,203.776,234.651,192,234.651z\"\n    />\n    <path\n      d=\"M277.333,234.651c-11.776,0-21.333,9.557-21.333,21.333c0,11.776,9.557,21.333,21.333,21.333s21.333-9.557,21.333-21.333\n\t\t\t\tC298.667,244.208,289.109,234.651,277.333,234.651z\"\n    />\n    <path\n      d=\"M106.667,234.651c-11.776,0-21.333,9.557-21.333,21.333c0,11.776,9.557,21.333,21.333,21.333S128,267.76,128,255.984\n\t\t\t\tC128,244.208,118.443,234.651,106.667,234.651z\"\n    />\n  </svg>\n);\n\nexport const ThreeDIcon = ({ className }: IconProps) => (\n  <svg\n    viewBox=\"0 0 24 24\"\n    className={className}\n    fill=\"currentColor\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M11.5144 1.12584C11.8164 0.958052 12.1836 0.958052 12.4856 1.12584L21.4845 6.12522C21.4921 6.12942 21.4996 6.13372 21.5071 6.13813C21.8125 6.31781 22 6.64568 22 7V17C22 17.3632 21.8031 17.6978 21.4856 17.8742L12.4856 22.8742C12.1791 23.0445 11.8059 23.0416 11.5022 22.8673L2.51436 17.874C2.19689 17.6977 2 17.3631 2 16.9999V7C2 6.64568 2.18749 6.3177 2.49287 6.13802L2.5073 6.13784L2.51436 6.12584L11.5144 1.12584ZM12.0001 10.856L5.05923 6.99995L12 3.14396L18.9409 7L12.0001 10.856ZM4 8.69951V16.4115L11 20.3004V12.5884L4 8.69951ZM13 12.5884V20.3005L20 16.4116V8.69951L13 12.5884Z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;;;AAIO,MAAM,WAAW,CAAC,EAAE,SAAS,EAAa,iBAC/C,8OAAC;QACC,SAAQ;QACR,WAAW;QACX,MAAK;QACL,OAAM;;0BAEN,8OAAC;gBACC,GAAE;;;;;;0BAaJ,8OAAC;gBACC,GAAE;;;;;;0BAGJ,8OAAC;gBACC,GAAE;;;;;;0BAGJ,8OAAC;gBACC,GAAE;;;;;;;;;;;;AAMD,MAAM,aAAa,CAAC,EAAE,SAAS,EAAa,iBACjD,8OAAC;QACC,SAAQ;QACR,WAAW;QACX,MAAK;QACL,OAAM;kBAEN,cAAA,8OAAC;YACC,UAAS;YACT,UAAS;YACT,GAAE"}},
    {"offset": {"line": 2611, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/DockMenu.tsx"],"sourcesContent":["import {\n  Dock,\n  DockIcon,\n  DockItem,\n  DockLabel,\n} from \"@/components/ui/shadcn-io/dock\";\nimport { Mic, Home, ChevronDown } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n  DropdownMenuRadioItem,\n} from \"@/components/ui/dropdown-menu\";\nimport { ChatIcon, ThreeDIcon } from \"@/assets\";\n\ninterface DockMenuProps {\n  isRecording?: boolean;\n  audioInputs?: MediaDeviceInfo[];\n  onToggleRecording?: () => void;\n  onSelectAudioInput?: (deviceId: string) => void;\n  onNavigateHome?: () => void;\n  onOpenChatPrompt?: () => void;\n  onOpenAvatarModal?: () => void;\n}\n\nexport const DockMenu = ({\n  isRecording = false,\n  audioInputs = [],\n  onToggleRecording,\n  onSelectAudioInput,\n  onNavigateHome,\n  onOpenChatPrompt,\n  onOpenAvatarModal,\n}: DockMenuProps) => {\n  return (\n    <footer className=\"absolute bottom-0 left-0 right-0 z-10 flex justify-center items-end pb-4 lg:left-64\">\n      {/* Dock with Action Buttons */}\n      <Dock magnification={100} distance={140}>\n        {/* Home Button */}\n        <DockItem>\n          <DockLabel>Home</DockLabel>\n          <DockIcon>\n            <button\n              onClick={onNavigateHome}\n              className=\"h-full w-full flex items-center justify-center\"\n            >\n              <Home className=\"h-full w-full text-foreground\" />\n            </button>\n          </DockIcon>\n        </DockItem>\n\n        {/* Record Button with Microphone Selector */}\n        {onToggleRecording && (\n          <DockItem className={isRecording ? \"animate-pulse\" : \"\"}>\n            <DockLabel>{isRecording ? \"Stop\" : \"Record\"}</DockLabel>\n            <DockIcon>\n              <div className=\"h-full w-full flex items-center justify-center relative\">\n                <button\n                  onClick={onToggleRecording}\n                  className=\"h-full w-full flex items-center justify-center\"\n                >\n                  <Mic\n                    className={`h-full w-full ${\n                      isRecording ? \"text-red-500\" : \"text-foreground\"\n                    }`}\n                  />\n                </button>\n                {/* Microphone Selector Dropdown */}\n                {audioInputs.length > 0 && (\n                  <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                      <button className=\"absolute right-0 top-1/2 -translate-y-1/2 translate-x-[calc(50%+8px)] flex items-center justify-center hover:opacity-70\">\n                        <ChevronDown className=\"h-4 w-4 text-foreground\" />\n                      </button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"start\">\n                      {audioInputs.map((device) => (\n                        <DropdownMenuRadioItem\n                          key={device.deviceId}\n                          value={device.deviceId}\n                          onClick={() => onSelectAudioInput?.(device.deviceId)}\n                        >\n                          {device.label ||\n                            `Microphone (${device.deviceId.slice(0, 5)})`}\n                        </DropdownMenuRadioItem>\n                      ))}\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n                )}\n              </div>\n            </DockIcon>\n          </DockItem>\n        )}\n\n        {/* Chat Button */}\n        {onOpenChatPrompt && (\n          <DockItem>\n            <DockLabel>Chat</DockLabel>\n            <DockIcon>\n              <button\n                onClick={onOpenChatPrompt}\n                className=\"h-full w-full flex items-center justify-center\"\n              >\n                <ChatIcon className=\"h-full w-full text-foreground\" />\n              </button>\n            </DockIcon>\n          </DockItem>\n        )}\n\n        {/* 3D Model Button */}\n        {onOpenAvatarModal && (\n          <DockItem>\n            <DockLabel>3D Avatar</DockLabel>\n            <DockIcon>\n              <button\n                onClick={onOpenAvatarModal}\n                className=\"h-full w-full flex items-center justify-center\"\n              >\n                <ThreeDIcon className=\"h-full w-full text-foreground\" />\n              </button>\n            </DockIcon>\n          </DockItem>\n        )}\n      </Dock>\n    </footer>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAMA;AAAA;AAAA;AACA;AAMA;;;;;;AAYO,MAAM,WAAW,CAAC,EACvB,cAAc,KAAK,EACnB,cAAc,EAAE,EAChB,iBAAiB,EACjB,kBAAkB,EAClB,cAAc,EACd,gBAAgB,EAChB,iBAAiB,EACH;IACd,qBACE,8OAAC;QAAO,WAAU;kBAEhB,cAAA,8OAAC,0JAAI;YAAC,eAAe;YAAK,UAAU;;8BAElC,8OAAC,8JAAQ;;sCACP,8OAAC,+JAAS;sCAAC;;;;;;sCACX,8OAAC,8JAAQ;sCACP,cAAA,8OAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8OAAC,2MAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;gBAMrB,mCACC,8OAAC,8JAAQ;oBAAC,WAAW,cAAc,kBAAkB;;sCACnD,8OAAC,+JAAS;sCAAE,cAAc,SAAS;;;;;;sCACnC,8OAAC,8JAAQ;sCACP,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,WAAU;kDAEV,cAAA,8OAAC,uMAAG;4CACF,WAAW,CAAC,cAAc,EACxB,cAAc,iBAAiB,mBAC/B;;;;;;;;;;;oCAIL,YAAY,MAAM,GAAG,mBACpB,8OAAC,qJAAY;;0DACX,8OAAC,4JAAmB;gDAAC,OAAO;0DAC1B,cAAA,8OAAC;oDAAO,WAAU;8DAChB,cAAA,8OAAC,mOAAW;wDAAC,WAAU;;;;;;;;;;;;;;;;0DAG3B,8OAAC,4JAAmB;gDAAC,OAAM;0DACxB,YAAY,GAAG,CAAC,CAAC,uBAChB,8OAAC,8JAAqB;wDAEpB,OAAO,OAAO,QAAQ;wDACtB,SAAS,IAAM,qBAAqB,OAAO,QAAQ;kEAElD,OAAO,KAAK,IACX,CAAC,YAAY,EAAE,OAAO,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;uDAL1C,OAAO,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAiBrC,kCACC,8OAAC,8JAAQ;;sCACP,8OAAC,+JAAS;sCAAC;;;;;;sCACX,8OAAC,8JAAQ;sCACP,cAAA,8OAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8OAAC,4HAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;gBAO3B,mCACC,8OAAC,8JAAQ;;sCACP,8OAAC,+JAAS;sCAAC;;;;;;sCACX,8OAAC,8JAAQ;sCACP,cAAA,8OAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8OAAC,8HAAU;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQtC"}},
    {"offset": {"line": 2849, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,6QACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 2876, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/shadcn-io/ai/prompt-input.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { cn } from \"@/lib/utils\";\nimport type { ChatStatus } from \"ai\";\nimport { Loader2Icon, SendIcon, SquareIcon, XIcon } from \"lucide-react\";\nimport type {\n  ComponentProps,\n  HTMLAttributes,\n  KeyboardEventHandler,\n} from \"react\";\nimport { Children, useRef, useEffect } from \"react\";\n\nexport type PromptInputProps = HTMLAttributes<HTMLFormElement>;\n\nexport const PromptInput = ({ className, ...props }: PromptInputProps) => (\n  <form\n    className={cn(\n      \"w-full divide-y overflow-hidden rounded-xl border bg-background shadow-sm\",\n      className\n    )}\n    {...(props as any)}\n  />\n);\n\nexport type PromptInputTextareaProps = ComponentProps<typeof Textarea> & {\n  minHeight?: number;\n  maxHeight?: number;\n};\n\nexport const PromptInputTextarea = ({\n  onChange,\n  className,\n  placeholder = \"What would you like to know?\",\n  minHeight = 48,\n  maxHeight = 164,\n  ...props\n}: PromptInputTextareaProps) => {\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleKeyDown: KeyboardEventHandler<HTMLTextAreaElement> = (e) => {\n    if (e.key === \"Enter\") {\n      if (e.shiftKey) {\n        // Allow newline\n        return;\n      }\n\n      // Submit on Enter (without Shift)\n      e.preventDefault();\n      const form = e.currentTarget.form;\n      if (form) {\n        form.requestSubmit();\n      }\n    }\n  };\n\n  // Auto-resize textarea based on content\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (!textarea) return;\n\n    const adjustHeight = () => {\n      textarea.style.height = \"auto\";\n      const newHeight = Math.min(\n        Math.max(textarea.scrollHeight, minHeight),\n        maxHeight\n      );\n      textarea.style.height = `${newHeight}px`;\n    };\n\n    adjustHeight();\n  }, [props.value, minHeight, maxHeight]);\n\n  return (\n    <Textarea\n      ref={textareaRef}\n      className={cn(\n        \"w-full resize-none rounded-none border-none p-3 shadow-none outline-none ring-0\",\n        \"field-sizing-content max-h-[6lh] bg-transparent dark:bg-transparent\",\n        \"focus-visible:ring-0\",\n        className\n      )}\n      name=\"message\"\n      onChange={(e) => {\n        onChange?.(e);\n      }}\n      onKeyDown={handleKeyDown}\n      placeholder={placeholder}\n      {...(props as any)}\n    />\n  );\n};\n\nexport type PromptInputToolbarProps = HTMLAttributes<HTMLDivElement>;\n\nexport const PromptInputToolbar = ({\n  className,\n  ...props\n}: PromptInputToolbarProps) => (\n  <div\n    className={cn(\"flex items-center justify-between p-1\", className)}\n    {...(props as any)}\n  />\n);\n\nexport type PromptInputToolsProps = HTMLAttributes<HTMLDivElement>;\n\nexport const PromptInputTools = ({\n  className,\n  ...props\n}: PromptInputToolsProps) => (\n  <div\n    className={cn(\n      \"flex items-center gap-1\",\n      \"[&_button:first-child]:rounded-bl-xl\",\n      className\n    )}\n    {...(props as any)}\n  />\n);\n\nexport type PromptInputButtonProps = ComponentProps<typeof Button>;\n\nexport const PromptInputButton = ({\n  variant = \"ghost\",\n  className,\n  size,\n  ...props\n}: PromptInputButtonProps) => {\n  const newSize =\n    size ?? Children.count(props.children) > 1 ? \"default\" : \"icon\";\n\n  return (\n    <Button\n      className={cn(\n        \"shrink-0 gap-1.5 rounded-lg\",\n        variant === \"ghost\" && \"text-muted-foreground\",\n        newSize === \"default\" && \"px-3\",\n        className\n      )}\n      size={newSize}\n      type=\"button\"\n      variant={variant}\n      {...(props as any)}\n    />\n  );\n};\n\nexport type PromptInputSubmitProps = ComponentProps<typeof Button> & {\n  status?: ChatStatus;\n};\n\nexport const PromptInputSubmit = ({\n  className,\n  variant = \"default\",\n  size = \"icon\",\n  status,\n  children,\n  ...props\n}: PromptInputSubmitProps) => {\n  let Icon = <SendIcon className=\"size-4\" />;\n\n  if (status === \"submitted\") {\n    Icon = <Loader2Icon className=\"size-4 animate-spin\" />;\n  } else if (status === \"streaming\") {\n    Icon = <SquareIcon className=\"size-4\" />;\n  } else if (status === \"error\") {\n    Icon = <XIcon className=\"size-4\" />;\n  }\n\n  return (\n    <Button\n      className={cn(\"gap-1.5 rounded-lg\", className)}\n      size={size}\n      type=\"submit\"\n      variant={variant}\n      {...(props as any)}\n    >\n      {children ?? Icon}\n    </Button>\n  );\n};\n\nexport type PromptInputModelSelectProps = ComponentProps<typeof Select>;\n\nexport const PromptInputModelSelect = (props: PromptInputModelSelectProps) => (\n  <Select {...(props as any)} />\n);\n\nexport type PromptInputModelSelectTriggerProps = ComponentProps<\n  typeof SelectTrigger\n>;\n\nexport const PromptInputModelSelectTrigger = ({\n  className,\n  ...props\n}: PromptInputModelSelectTriggerProps) => (\n  <SelectTrigger\n    className={cn(\n      \"border-none bg-transparent font-medium text-muted-foreground shadow-none transition-colors\",\n      'hover:bg-accent hover:text-foreground [&[aria-expanded=\"true\"]]:bg-accent [&[aria-expanded=\"true\"]]:text-foreground',\n      className\n    )}\n    {...(props as any)}\n  />\n);\n\nexport type PromptInputModelSelectContentProps = ComponentProps<\n  typeof SelectContent\n>;\n\nexport const PromptInputModelSelectContent = ({\n  className,\n  ...props\n}: PromptInputModelSelectContentProps) => (\n  <SelectContent className={cn(className)} {...(props as any)} />\n);\n\nexport type PromptInputModelSelectItemProps = ComponentProps<typeof SelectItem>;\n\nexport const PromptInputModelSelectItem = ({\n  className,\n  ...props\n}: PromptInputModelSelectItemProps) => (\n  <SelectItem className={cn(className)} {...(props as any)} />\n);\n\nexport type PromptInputModelSelectValueProps = ComponentProps<\n  typeof SelectValue\n>;\n\nexport const PromptInputModelSelectValue = ({\n  className,\n  ...props\n}: PromptInputModelSelectValueProps) => (\n  <SelectValue className={cn(className)} {...(props as any)} />\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3092, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ChatPrompt.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef, type FormEventHandler } from \"react\";\nimport {\n  PromptInput,\n  PromptInputButton,\n  PromptInputModelSelect,\n  PromptInputModelSelectContent,\n  PromptInputModelSelectItem,\n  PromptInputModelSelectTrigger,\n  PromptInputModelSelectValue,\n  PromptInputSubmit,\n  PromptInputTextarea,\n  PromptInputToolbar,\n  PromptInputTools,\n} from \"@/components/ui/shadcn-io/ai/prompt-input\";\nimport { Paperclip, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface ChatPromptProps {\n  open: boolean;\n  onClose: () => void;\n  onAudioGenerated?: (audioUrl: string) => void;\n}\n\nexport const ChatPrompt = ({\n  open,\n  onClose,\n  onAudioGenerated,\n}: ChatPromptProps) => {\n  const [text, setText] = useState(\"\");\n  const [selectedModel, setSelectedModel] = useState(\"mistral:7b\");\n  const [availableModels, setAvailableModels] = useState<string[]>([]);\n  const [status, setStatus] = useState<\n    \"submitted\" | \"streaming\" | \"ready\" | \"error\"\n  >(\"ready\");\n  const [attachments, setAttachments] = useState<File[]>([]);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Fetch available Ollama models\n  useEffect(() => {\n    const fetchModels = async () => {\n      try {\n        const response = await fetch(\"http://localhost:5004/models\");\n        if (!response.ok) {\n          throw new Error(`Server returned ${response.status}`);\n        }\n        const data = await response.json();\n        if (data.models && Array.isArray(data.models)) {\n          const modelNames = data.models.map(\n            (model: { name: string }) => model.name\n          );\n          if (modelNames.length > 0) {\n            setAvailableModels(modelNames);\n            setSelectedModel(modelNames[0]);\n          } else {\n            // No models returned, use fallback\n            setAvailableModels([\"mistral:7b\"]);\n          }\n        } else {\n          // Invalid response format, use fallback\n          setAvailableModels([\"mistral:7b\"]);\n        }\n      } catch (error) {\n        console.warn(\"Failed to fetch models (backend may be offline):\", error);\n        // Fallback to default model - don't crash the UI\n        setAvailableModels([\"mistral:7b\"]);\n      }\n    };\n\n    if (open) {\n      fetchModels();\n    }\n  }, [open]);\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    setAttachments((prev) => [...prev, ...files]);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const handleRemoveAttachment = (index: number) => {\n    setAttachments((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const handleSubmit: FormEventHandler<HTMLFormElement> = async (event) => {\n    event.preventDefault();\n    if (!text.trim()) {\n      return;\n    }\n\n    setStatus(\"submitted\");\n\n    try {\n      const userMessage = text.trim();\n\n      // Clear input immediately for better UX\n      setText(\"\");\n      setAttachments([]);\n\n      setTimeout(() => {\n        setStatus(\"streaming\");\n      }, 200);\n\n      // Step 1: Query RAG system for relevant context\n      console.log(\" Querying RAG system for context...\");\n      let ragContext = \"\";\n      try {\n        const ragResponse = await fetch(\"http://localhost:5003/query\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ query: userMessage }),\n        });\n\n        if (ragResponse.ok) {\n          const ragData = await ragResponse.json();\n          if (ragData.has_context) {\n            ragContext = ragData.context;\n            console.log(\n              \" RAG Context retrieved:\",\n              ragData.contexts?.length || 0,\n              \"chunks\"\n            );\n          } else {\n            console.log(\" No relevant context found in documents\");\n          }\n        } else {\n          console.warn(\" RAG server unavailable, continuing without context\");\n        }\n      } catch (error) {\n        console.warn(\" RAG query failed:\", error);\n        console.log(\"  Continuing without document context...\");\n      }\n\n      // Step 2: Build system prompt with context\n      let systemPrompt =\n        \"Kamu adalah asisten AI yang membantu. Selalu jawab dalam Bahasa Indonesia yang sopan dan jelas. Berikan jawaban yang SINGKAT dan LANGSUNG KE INTI. Jangan memberikan penjelasan panjang kecuali diminta. Untuk pertanyaan sederhana, jawab dengan 1-2 kalimat saja.\";\n\n      if (ragContext) {\n        systemPrompt += `\\n\\nGunakan informasi berikut sebagai referensi untuk menjawab pertanyaan:\\n\\n${ragContext}\\n\\nJawab berdasarkan informasi di atas jika relevan dengan pertanyaan. Jika informasi tidak cukup atau tidak relevan, jawab berdasarkan pengetahuan umum.`;\n      }\n\n      // Step 3: Send to backend chat server\n      console.log(\" Sending to LLM...\");\n      \n      const chatMessages = [\n        { role: \"system\", content: systemPrompt },\n        { role: \"user\", content: userMessage },\n      ];\n\n      const response = await fetch(\"http://localhost:5004/chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          model: selectedModel,\n          messages: chatMessages,\n          stream: true,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Chat server error\");\n      }\n\n      const reader = response.body?.getReader();\n      const decoder = new TextDecoder();\n      let fullResponse = \"\";\n\n      while (reader) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        const chunk = decoder.decode(value);\n        const lines = chunk.split(\"\\n\").filter((line) => line.trim());\n\n        for (const line of lines) {\n          try {\n            const json = JSON.parse(line);\n            if (json.message?.content) {\n              fullResponse += json.message.content;\n            }\n          } catch {\n            // Skip invalid JSON\n          }\n        }\n      }\n      console.log(\" LLM Response:\", fullResponse);\n\n      // Step 4: Send LLM response to TTS server\n      console.log(\" Sending to TTS for speech synthesis...\");\n      const ttsResponse = await fetch(\"http://localhost:5002/synthesize\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ text: fullResponse }),\n      });\n\n      if (!ttsResponse.ok) {\n        throw new Error(\"TTS synthesis failed\");\n      }\n\n      const ttsAudioBlob = await ttsResponse.blob();\n      const audioUrl = URL.createObjectURL(ttsAudioBlob);\n      console.log(\" TTS audio generated\");\n\n      // Step 5: Trigger avatar to speak through callback\n      if (onAudioGenerated) {\n        onAudioGenerated(audioUrl);\n      }\n\n      setStatus(\"ready\");\n    } catch (error) {\n      console.error(\" Failed to process chat message:\", error);\n      setStatus(\"error\");\n      setTimeout(() => {\n        setStatus(\"ready\");\n      }, 2000);\n    }\n  };\n\n  return (\n    <div\n      className={`\n      fixed inset-0 z-50 flex items-end justify-center pointer-events-none\n      transition-opacity duration-300\n      ${open ? \"opacity-100\" : \"opacity-0 pointer-events-none\"}\n    `}\n    >\n      <div\n        ref={containerRef}\n        className={`\n          pointer-events-auto mb-32 w-[95vw] sm:w-[500px] md:w-[600px] lg:w-[700px] lg:translate-x-32\n          transition-all duration-300 ease-out\n          ${open ? \"translate-y-0 opacity-100\" : \"translate-y-8 opacity-0\"}\n        `}\n      >\n        <PromptInput onSubmit={handleSubmit}>\n          {attachments.length > 0 && (\n            <div className=\"flex flex-wrap gap-2 p-3 border-b\">\n              {attachments.map((file, index) => (\n                <div\n                  key={index}\n                  className=\"flex items-center gap-2 bg-muted rounded-md px-3 py-1.5 text-sm\"\n                >\n                  <span className=\"truncate max-w-[200px]\">{file.name}</span>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveAttachment(index)}\n                    className=\"hover:bg-background rounded-sm p-0.5\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n          <PromptInputTextarea\n            onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\n              setText(e.target.value)\n            }\n            value={text}\n            placeholder=\"Type your message...\"\n          />\n          <PromptInputToolbar>\n            <PromptInputTools>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                multiple\n                onChange={handleFileSelect}\n                className=\"hidden\"\n              />\n              <PromptInputButton\n                type=\"button\"\n                onClick={() => fileInputRef.current?.click()}\n              >\n                <Paperclip className=\"h-4 w-4\" />\n              </PromptInputButton>\n              <PromptInputModelSelect\n                onValueChange={setSelectedModel}\n                value={selectedModel}\n              >\n                <PromptInputModelSelectTrigger>\n                  <PromptInputModelSelectValue />\n                </PromptInputModelSelectTrigger>\n                <PromptInputModelSelectContent>\n                  {availableModels.map((model) => (\n                    <PromptInputModelSelectItem key={model} value={model}>\n                      {model}\n                    </PromptInputModelSelectItem>\n                  ))}\n                </PromptInputModelSelectContent>\n              </PromptInputModelSelect>\n            </PromptInputTools>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onClose}\n                className=\"text-muted-foreground hover:text-foreground\"\n              >\n                Close Chat\n              </Button>\n              <PromptInputSubmit disabled={!text} status={status} />\n            </div>\n          </PromptInputToolbar>\n        </PromptInput>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3484, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/switch.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAqB;QACpB,WAAW,IAAA,kHAAE,EACX,+XACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,2KAAsB;YACrB,WAAW,IAAA,kHAAE,EACX;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,0KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 3518, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 3572, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/constants/index.tsx"],"sourcesContent":["export const predefinedAvatars = [\n  {\n    name: \"Hatsune Miku\",\n    path: \"/models/vrm/HatsuneMikuNT.vrm\",\n    thumbnail: \"/images/hatsune-icon.png\",\n  },\n  {\n    name: \"Evernight\",\n    path: \"/models/vrm/Evernight.vrm\",\n    thumbnail: \"/images/evernight-icon.png\",\n  },\n  {\n    name: \"Larasdyah\",\n    path: \"/models/glb/Larasdyah_Character2.glb\",\n    thumbnail: \"/images/larasdyah-icon.png\",\n  },\n  {\n    name: \"Carlotta\",\n    path: \"/models/vrm/carlotta_wuwa.vrm\",\n    thumbnail: \"/images/carlotta-icon.png\",\n  },\n  {\n    name: \"Phoebe\",\n    path: \"/models/vrm/phoebe_wuwa.vrm\",\n    thumbnail: \"/images/phoebe-icon.png\",\n  },\n  {\n    name: \"Zani\",\n    path: \"/models/vrm/zani_wuwa.vrm\",\n    thumbnail: \"/images/zani-icon.png\",\n  },\n  {\n    name: \"Firefly\",\n    path: \"/models/vrm/firefly_hsr.vrm\",\n    thumbnail: \"/images/firefly-icon.png\",\n  },\n  {\n    name: \"Orpheus\",\n    path: \"/models/vrm/orpheus_zzz.vrm\",\n    thumbnail: \"/images/orpheus-icon.png\",\n  },\n];\n\nexport const predefinedAnimations = [\n  {\n    name: \"Breathing Idle\",\n    path: \"/models/animations/Breathing_Idle.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Standing Idle\",\n    path: \"/models/animations/Standing_Idle.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Swing Dancing\",\n    path: \"/models/animations/Swing_Dancing.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Thriller Dance\",\n    path: \"/models/animations/Thriller_Part_2.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Talking\",\n    path: \"/models/animations/Talking.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Walking\",\n    path: \"/models/animations/Walking.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Angry\",\n    path: \"/models/animations/Angry.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Rumba Dance\",\n    path: \"/models/animations/Rumba_Dancing.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Explaining\",\n    path: \"/models/animations/Explaining.fbx\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n];\n\nexport const predefinedPoses = [\n  {\n    name: \"T-shape\",\n    path: \"/models/poses/T-shape.json\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"A-shape\",\n    path: \"/models/poses/A-shape.json\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Standing\",\n    path: \"/models/poses/Standing.json\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n  {\n    name: \"Double Peace\",\n    path: \"/models/poses/Double Peace.json\",\n    thumbnail: \"/images/default-thumbnail-3davatar.png\",\n  },\n];\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,oBAAoB;IAC/B;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;CACD;AAEM,MAAM,uBAAuB;IAClC;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;CACD;AAEM,MAAM,kBAAkB;IAC7B;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,WAAW;IACb;CACD"}},
    {"offset": {"line": 3695, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/components/SelectionModal.tsx"],"sourcesContent":["import {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\n\ninterface SelectionItem {\n  name: string;\n  path: string;\n  thumbnail: string;\n}\n\ninterface SelectionModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  title: string;\n  description: string;\n  items: SelectionItem[];\n  selectedItem: string;\n  onSelectItem: (path: string) => void;\n  descriptionId: string;\n}\n\nexport const SelectionModal = ({\n  open,\n  onOpenChange,\n  title,\n  description,\n  items,\n  selectedItem,\n  onSelectItem,\n  descriptionId,\n}: SelectionModalProps) => {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className=\"sm:max-w-[600px]\"\n        aria-describedby={descriptionId}\n      >\n        <DialogHeader>\n          <DialogTitle>{title}</DialogTitle>\n          <DialogDescription id={descriptionId}>\n            {description}\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"max-h-[60vh] overflow-y-auto\">\n          <div className=\"grid grid-cols-3 gap-4 p-4\">\n            {items.map((item) => (\n              <button\n                key={item.path}\n                onClick={() => onSelectItem(item.path)}\n                className=\"group relative flex flex-col items-center gap-2 transition-transform hover:-translate-y-2\"\n              >\n                <div\n                  className={`w-full aspect-square rounded-2xl overflow-hidden border-2 transition-colors ${\n                    selectedItem === item.path\n                      ? \"border-primary\"\n                      : \"border-transparent group-hover:border-primary/50\"\n                  }`}\n                >\n                  <img\n                    src={item.thumbnail}\n                    alt={item.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n                <span className=\"text-sm font-medium text-center\">\n                  {item.name}\n                </span>\n              </button>\n            ))}\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;;;AAyBO,MAAM,iBAAiB,CAAC,EAC7B,IAAI,EACJ,YAAY,EACZ,KAAK,EACL,WAAW,EACX,KAAK,EACL,YAAY,EACZ,YAAY,EACZ,aAAa,EACO;IACpB,qBACE,8OAAC,qIAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,4IAAa;YACZ,WAAU;YACV,oBAAkB;;8BAElB,8OAAC,2IAAY;;sCACX,8OAAC,0IAAW;sCAAE;;;;;;sCACd,8OAAC,gJAAiB;4BAAC,IAAI;sCACpB;;;;;;;;;;;;8BAGL,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;gCAEC,SAAS,IAAM,aAAa,KAAK,IAAI;gCACrC,WAAU;;kDAEV,8OAAC;wCACC,WAAW,CAAC,4EAA4E,EACtF,iBAAiB,KAAK,IAAI,GACtB,mBACA,oDACJ;kDAEF,cAAA,8OAAC;4CACC,KAAK,KAAK,SAAS;4CACnB,KAAK,KAAK,IAAI;4CACd,WAAU;;;;;;;;;;;kDAGd,8OAAC;wCAAK,WAAU;kDACb,KAAK,IAAI;;;;;;;+BAlBP,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;AA2B9B"}},
    {"offset": {"line": 3798, "column": 0}, "map": {"version":3,"sources":["file:///home/danarit/Projects/private-ai-chat/app/avatar-gltf/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { GLTFViewer, GLTFViewerRef } from \"@/components/GLTFViewer\";\nimport { DockMenu } from \"@/components/DockMenu\";\nimport { ChatPrompt } from \"@/components/ChatPrompt\";\nimport { Upload, Menu, Settings as SettingsIcon } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n  DropdownMenuRadioItem,\n} from \"@/components/ui/dropdown-menu\";\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { predefinedAvatars } from \"@/constants\";\nimport { SelectionModal } from \"@/components/SelectionModal\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useSidebar } from \"@/components/ui/sidebar\";\nimport { useTheme } from \"@/components/ThemeProvider\";\n\nexport default function AvatarGLTFPage() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [isGLTFLoaded, setIsGLTFLoaded] = useState(false);\n  const [loadingProgress, setLoadingProgress] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [enableSmoothCamera, setEnableSmoothCamera] = useState(true);\n  const [cameraFollowCharacter, setCameraFollowCharacter] = useState(false);\n  const [viewerMode, setViewerMode] = useState<\"vrm\" | \"gltf\">(\"gltf\");\n  const [showChatPrompt, setShowChatPrompt] = useState(false);\n  const [showAvatarModal, setShowAvatarModal] = useState(false);\n  const [selectedAvatar, setSelectedAvatar] = useState(\n    \"/models/glb/Larasdyah_Character2.glb\"\n  );\n  const [audioInputs, setAudioInputs] = useState<MediaDeviceInfo[]>([]);\n  const [selectedInputId, setSelectedInputId] = useState<string>(\"\");\n  const [hasLoadedFromNavigation, setHasLoadedFromNavigation] = useState(false);\n\n  const gltfViewerRef = useRef<GLTFViewerRef>(null);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const dragCounterRef = useRef(0);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const { toggleSidebar } = useSidebar();\n  const { theme } = useTheme();\n\n  // Handle audio playback from chat input\n  const handleChatAudioGenerated = (audioUrl: string) => {\n    console.log(\" Playing audio from chat input...\");\n\n    if (audioRef.current) {\n      audioRef.current.src = audioUrl;\n      audioRef.current.play();\n    }\n  };\n\n  const handleUploadModel = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileSelected = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const files = event.target.files;\n    if (files && files.length > 0) {\n      await processFiles(files);\n      // Reset file input after successful upload\n      event.target.value = \"\";\n    }\n  };\n\n  const handleViewerModeChange = (mode: string) => {\n    if (mode === \"vrm\") {\n      router.push(\"/avatar-vrm\");\n    } else {\n      setViewerMode(\"gltf\");\n    }\n  };\n\n  const handleAvatarSelect = async (avatarPath: string) => {\n    try {\n      console.log(\" Switching to avatar:\", avatarPath);\n      setShowAvatarModal(false);\n\n      // Convert VRM path to GLTF path\n      let gltfPath = avatarPath;\n      if (avatarPath === \"/models/glb/Larasdyah_Character2.glb\") {\n        gltfPath = \"/models/glb/Larasdyah_Character2.glb\";\n      } else if (avatarPath.endsWith(\".vrm\")) {\n        // For other VRM models, navigate to VRM viewer\n        router.push(\"/avatar-vrm\");\n        return;\n      }\n\n      // Clear existing model first\n      if (gltfViewerRef.current) {\n        gltfViewerRef.current.clearScene();\n        setIsGLTFLoaded(false);\n      }\n\n      await new Promise((resolve) => setTimeout(resolve, 150));\n\n      setIsLoading(true);\n      setLoadingProgress(0);\n\n      // Fetch the model file\n      const response = await fetch(gltfPath);\n      const blob = await response.blob();\n      const file = new File([blob], gltfPath.split(\"/\").pop() || \"model.glb\", {\n        type: \"model/gltf-binary\",\n      });\n\n      const fileMap = new Map<string, File>();\n      fileMap.set(file.name, file);\n\n      if (gltfViewerRef.current) {\n        await gltfViewerRef.current.loadGLTF(file, \"\", fileMap, (progress) => {\n          setLoadingProgress(progress);\n        });\n        setIsLoading(false);\n        setIsGLTFLoaded(true);\n        setSelectedAvatar(gltfPath);\n        console.log(\" Avatar loaded successfully!\");\n      }\n    } catch (error) {\n      console.error(\" Failed to switch avatar:\", error);\n      setIsLoading(false);\n      setIsGLTFLoaded(false);\n    }\n  };\n\n  const handleResetCharacter = () => {\n    if (gltfViewerRef.current) {\n      // Stop any playing animation (if animation support exists)\n      // TODO: Implement animation stop for GLTF viewer if needed\n\n      // Reset character position to origin\n      if (gltfViewerRef.current.resetCharacterPosition) {\n        gltfViewerRef.current.resetCharacterPosition();\n      }\n\n      console.log(\" Character reset to origin position\");\n    }\n  };\n\n  const processFiles = async (files: FileList) => {\n    try {\n      console.log(\" Files selected:\", files.length);\n\n      // Find the main GLTF/GLB file\n      let rootFile: File | null = null;\n      let rootPath = \"\";\n      const fileMap = new Map<string, File>();\n\n      Array.from(files).forEach((file) => {\n        if (file.name.match(/\\.(gltf|glb)$/i)) {\n          rootFile = file;\n          rootPath = file.webkitRelativePath\n            ? file.webkitRelativePath.replace(file.name, \"\")\n            : \"\";\n        }\n        const path = file.webkitRelativePath || file.name;\n        fileMap.set(path, file);\n      });\n\n      if (!rootFile) {\n        alert(\"No .gltf or .glb file found. Please select a valid GLTF model.\");\n        return;\n      }\n\n      // Type assertion to help TypeScript\n      const modelFile: File = rootFile;\n\n      console.log(\n        \" Loading GLTF model:\",\n        modelFile.name,\n        `(${(modelFile.size / 1024 / 1024).toFixed(2)} MB)`\n      );\n\n      // Step 1: Clear existing model first\n      console.log(\" Clearing existing model...\");\n      if (gltfViewerRef.current) {\n        gltfViewerRef.current.clearScene();\n        setIsGLTFLoaded(false);\n      }\n\n      // Step 2: Small delay to ensure cleanup is complete\n      await new Promise((resolve) => setTimeout(resolve, 150));\n\n      // Step 3: Load the new model\n      setIsLoading(true);\n      setLoadingProgress(0);\n\n      if (gltfViewerRef.current) {\n        await gltfViewerRef.current.loadGLTF(\n          modelFile,\n          rootPath,\n          fileMap,\n          (progress) => {\n            setLoadingProgress(progress);\n          }\n        );\n        setIsLoading(false);\n        setIsGLTFLoaded(true);\n        console.log(\" GLTF model loaded successfully!\");\n      }\n    } catch (error) {\n      console.error(\" Failed to load GLTF file:\", error);\n      setError(\n        error instanceof Error\n          ? error.message\n          : \"Failed to load GLTF file. Please make sure it's a valid GLTF model.\"\n      );\n      setIsLoading(false);\n      setIsGLTFLoaded(false);\n    }\n  };\n\n  // Drag and drop handlers\n  const handleDragEnter = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    dragCounterRef.current++;\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n      setIsDragging(true);\n    }\n  };\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    dragCounterRef.current--;\n    if (dragCounterRef.current === 0) {\n      setIsDragging(false);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n    dragCounterRef.current = 0;\n\n    const items = e.dataTransfer.items;\n    if (items) {\n      const files: File[] = [];\n\n      // Process all items\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i];\n        if (item.kind === \"file\") {\n          const entry = item.webkitGetAsEntry?.();\n          if (entry) {\n            await traverseFileTree(entry, \"\", files);\n          } else {\n            const file = item.getAsFile();\n            if (file) files.push(file);\n          }\n        }\n      }\n\n      if (files.length > 0) {\n        // Create a FileList-like object\n        const dt = new DataTransfer();\n        files.forEach((file) => dt.items.add(file));\n        await processFiles(dt.files);\n      }\n    }\n  };\n\n  // Recursive function to traverse directory structure\n  const traverseFileTree = async (\n    item: FileSystemEntry,\n    path: string,\n    files: File[]\n  ): Promise<void> => {\n    return new Promise((resolve) => {\n      if (item.isFile) {\n        (item as FileSystemFileEntry).file((file) => {\n          // Create a new file with webkitRelativePath\n          const newFile = new File([file], file.name, { type: file.type });\n          Object.defineProperty(newFile, \"webkitRelativePath\", {\n            value: path + file.name,\n            writable: false,\n          });\n          files.push(newFile);\n          resolve();\n        });\n      } else if (item.isDirectory) {\n        const dirReader = (item as FileSystemDirectoryEntry).createReader();\n        dirReader.readEntries(async (entries) => {\n          for (const entry of entries) {\n            await traverseFileTree(entry, path + item.name + \"/\", files);\n          }\n          resolve();\n        });\n      }\n    });\n  };\n\n  // Global error handling\n  useEffect(() => {\n    const handleError = (event: ErrorEvent) => {\n      console.error(\" Global error:\", event.error);\n      setError(event.message || \"An error occurred\");\n    };\n\n    const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\n      console.error(\" Unhandled rejection:\", event.reason);\n      setError(String(event.reason));\n    };\n\n    window.addEventListener(\"error\", handleError);\n    window.addEventListener(\"unhandledrejection\", handleUnhandledRejection);\n\n    return () => {\n      window.removeEventListener(\"error\", handleError);\n      window.removeEventListener(\n        \"unhandledrejection\",\n        handleUnhandledRejection\n      );\n    };\n  }, []);\n\n  // Enumerate audio devices\n  useEffect(() => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      console.warn(\" MediaDevices API not available on this device\");\n      return;\n    }\n\n    const enumerateDevices = async () => {\n      try {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        const audioDevices = devices.filter(\n          (device) => device.kind === \"audioinput\"\n        );\n        setAudioInputs(audioDevices);\n        if (audioDevices.length > 0 && !selectedInputId) {\n          setSelectedInputId(audioDevices[0].deviceId);\n        }\n      } catch (error) {\n        console.error(\"Error enumerating devices:\", error);\n      }\n    };\n\n    enumerateDevices();\n\n    if (navigator.mediaDevices.addEventListener) {\n      navigator.mediaDevices.addEventListener(\"devicechange\", enumerateDevices);\n    }\n\n    return () => {\n      if (navigator.mediaDevices?.removeEventListener) {\n        navigator.mediaDevices.removeEventListener(\n          \"devicechange\",\n          enumerateDevices\n        );\n      }\n    };\n  }, [selectedInputId]);\n\n  // Load model from search params\n  useEffect(() => {\n    const loadModel = searchParams.get(\"loadModel\");\n\n    // Prevent duplicate loads\n    if (loadModel && gltfViewerRef.current && !hasLoadedFromNavigation) {\n      const modelPath = loadModel;\n\n      setHasLoadedFromNavigation(true);\n\n      const loadModelFromPath = async () => {\n        try {\n          setIsLoading(true);\n          setLoadingProgress(0);\n\n          // Fetch the model file\n          const response = await fetch(modelPath);\n          if (!response.ok) {\n            throw new Error(`Failed to fetch model: ${response.statusText}`);\n          }\n\n          const blob = await response.blob();\n          const file = new File(\n            [blob],\n            modelPath.split(\"/\").pop() || \"model.glb\",\n            {\n              type: \"model/gltf-binary\",\n            }\n          );\n\n          const fileMap = new Map<string, File>();\n          fileMap.set(file.name, file);\n\n          if (gltfViewerRef.current) {\n            await gltfViewerRef.current.loadGLTF(\n              file,\n              \"\",\n              fileMap,\n              (progress) => {\n                setLoadingProgress(progress);\n              }\n            );\n            setIsLoading(false);\n            setIsGLTFLoaded(true);\n            setSelectedAvatar(modelPath);\n            console.log(\" GLTF model loaded from search params!\");\n          }\n        } catch (error) {\n          console.error(\" Failed to load GLTF from search params:\", error);\n          setError(\n            error instanceof Error ? error.message : \"Failed to load GLTF file.\"\n          );\n          setIsLoading(false);\n          setHasLoadedFromNavigation(false); // Reset on error\n        }\n      };\n\n      loadModelFromPath();\n    }\n  }, [searchParams, hasLoadedFromNavigation]);\n\n  return (\n    <div\n      className=\"flex flex-col w-full fixed inset-0 overflow-hidden lg:pl-64\"\n      style={{ height: \"calc(var(--vh, 1vh) * 100)\" }}\n      onDragEnter={handleDragEnter}\n      onDragLeave={handleDragLeave}\n      onDragOver={handleDragOver}\n      onDrop={handleDrop}\n    >\n      {/* Error Display */}\n      {error && (\n        <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center lg:left-64\">\n          <div className=\"text-center space-y-4 p-8 bg-background/90 rounded-lg max-w-md\">\n            <h2 className=\"text-2xl font-bold text-red-500\">Error</h2>\n            <p className=\"text-sm text-foreground\">{error}</p>\n            <Button onClick={() => setError(null)} variant=\"outline\">\n              Dismiss\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {/* Loading Overlay */}\n      {isLoading && (\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center lg:left-64\">\n          <div className=\"text-center space-y-4\">\n            <div className=\"text-6xl font-bold text-white\">\n              {loadingProgress}%\n            </div>\n            <div className=\"text-xl text-white/80\">Loading 3D Model...</div>\n            <div className=\"w-64 h-2 bg-white/20 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-primary transition-all duration-300\"\n                style={{ width: `${loadingProgress}%` }}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Drag & Drop Overlay */}\n      {isDragging && (\n        <div className=\"absolute inset-0 bg-primary/20 backdrop-blur-sm z-40 flex items-center justify-center lg:left-64 border-4 border-dashed border-primary\">\n          <div className=\"text-center space-y-4\">\n            <Upload className=\"w-24 h-24 mx-auto text-primary\" />\n            <div className=\"text-3xl font-bold text-primary\">\n              Drop GLTF/GLB file here\n            </div>\n          </div>\n        </div>\n      )}\n\n      <header className=\"absolute top-0 left-0 right-0 flex items-center justify-between px-4 h-16 border-b bg-background/80 backdrop-blur-sm z-10 lg:left-64\">\n        <div className=\"flex items-center gap-2 lg:gap-2 w-full lg:w-auto\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={toggleSidebar}\n            className=\"lg:hidden\"\n          >\n            <Menu className=\"h-6 w-6\" />\n          </Button>\n          <h1 className=\"text-xl font-bold absolute left-1/2 -translate-x-1/2 lg:static lg:translate-x-0\">\n            3D Avatar Viewer\n          </h1>\n        </div>\n\n        {/* Desktop Settings Dropdown - Hidden on Mobile */}\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"text-base font-semibold max-md:w-10 max-md:h-10 max-md:p-0\"\n            >\n              <span className=\"max-md:hidden\">Settings</span>\n              <SettingsIcon className=\"md:ml-2 h-4 w-4\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\" className=\"w-56\">\n            {/* Smooth Camera Toggle */}\n            <div className=\"flex items-center justify-between px-2 py-3 cursor-pointer hover:bg-accent rounded-sm\">\n              <span className=\"text-sm font-medium\">Smooth Camera</span>\n              <Switch\n                checked={enableSmoothCamera}\n                onCheckedChange={setEnableSmoothCamera}\n              />\n            </div>\n            {/* Camera Follow Character Toggle */}\n            <div className=\"flex items-center justify-between px-2 py-3 cursor-pointer hover:bg-accent rounded-sm\">\n              <span className=\"text-sm font-medium\">\n                Camera Follow Character\n              </span>\n              <Switch\n                checked={cameraFollowCharacter}\n                onCheckedChange={setCameraFollowCharacter}\n              />\n            </div>\n            {/* Separator */}\n            <Separator className=\"my-1\" />\n            {/* Viewer Mode Tabs */}\n            <div className=\"px-2 py-3\">\n              <p className=\"text-sm font-medium mb-2\">Viewer Mode</p>\n              <Tabs value={viewerMode} onValueChange={handleViewerModeChange}>\n                <TabsList className=\"w-full\">\n                  <TabsTrigger value=\"vrm\" className=\"flex-1\">\n                    VRM\n                  </TabsTrigger>\n                  <TabsTrigger value=\"gltf\" className=\"flex-1\">\n                    GLTF\n                  </TabsTrigger>\n                </TabsList>\n              </Tabs>\n            </div>\n            {/* Separator */}\n            <Separator className=\"my-1\" />\n            {/* Reset Camera Position Button */}\n            <DropdownMenuRadioItem\n              value=\"reset\"\n              onClick={() => {\n                // TODO: Implement reset camera for GLTF viewer\n                console.log(\"Reset camera position\");\n              }}\n              className=\"flex items-center justify-center py-3 cursor-pointer hover:bg-accent\"\n            >\n              <span className=\"text-sm font-medium\">Reset Camera Position</span>\n            </DropdownMenuRadioItem>\n            {/* Reset Character Button */}\n            <DropdownMenuRadioItem\n              value=\"reset-character\"\n              onClick={handleResetCharacter}\n              className=\"flex items-center justify-center py-3 cursor-pointer hover:bg-accent\"\n            >\n              <span className=\"text-sm font-medium\">Reset Character</span>\n            </DropdownMenuRadioItem>\n            {/* Upload 3D Model */}\n            <DropdownMenuRadioItem\n              value=\"upload\"\n              onClick={(e) => {\n                e.preventDefault();\n                handleUploadModel();\n              }}\n              className=\"flex flex-col items-center justify-center py-6 cursor-pointer hover:bg-accent\"\n            >\n              <Upload className=\"h-8 w-8 mb-2\" />\n              <span className=\"text-sm font-medium\">\n                Upload 3D Model (GLTF)\n              </span>\n            </DropdownMenuRadioItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </header>\n\n      <main className=\"flex-1 w-full overflow-hidden relative\">\n        {!isGLTFLoaded && !isLoading && (\n          <div className=\"absolute inset-0 flex items-center justify-center z-10 pointer-events-none\">\n            <div className=\"text-center space-y-6 bg-background/90 p-8 rounded-lg max-w-md pointer-events-auto\">\n              <div className=\"text-6xl\"></div>\n              <div>\n                <h2 className=\"text-2xl font-bold mb-2\">\n                  Drag glTF 2.0 file or folder here\n                </h2>\n                <p className=\"text-muted-foreground\">\n                  Or click the button below to upload\n                </p>\n              </div>\n              <Button onClick={handleUploadModel} size=\"lg\">\n                <Upload className=\"mr-2 h-5 w-5\" />\n                Choose file\n              </Button>\n            </div>\n          </div>\n        )}\n        <GLTFViewer\n          ref={gltfViewerRef}\n          theme={theme === \"system\" ? \"dark\" : theme}\n        />\n      </main>\n\n      <DockMenu\n        audioInputs={audioInputs}\n        onSelectAudioInput={setSelectedInputId}\n        onNavigateHome={() => router.push(\"/\")}\n        onOpenChatPrompt={() => setShowChatPrompt((prev) => !prev)}\n        onOpenAvatarModal={() => setShowAvatarModal(true)}\n      />\n\n      {/* Chat Prompt */}\n      <ChatPrompt\n        open={showChatPrompt}\n        onClose={() => setShowChatPrompt(false)}\n        onAudioGenerated={handleChatAudioGenerated}\n      />\n\n      {/* 3D Avatar Selection Modal */}\n      <SelectionModal\n        open={showAvatarModal}\n        onOpenChange={setShowAvatarModal}\n        title=\"Select 3D Avatar\"\n        description=\"Choose from the available 3D avatars below\"\n        items={predefinedAvatars}\n        selectedItem={selectedAvatar}\n        onSelectItem={handleAvatarSelect}\n        descriptionId=\"avatar-dialog-description\"\n      />\n\n      <audio ref={audioRef} className=\"hidden\" />\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\".gltf,.glb\"\n        onChange={handleFileSelected}\n        className=\"hidden\"\n        multiple\n        // @ts-expect-error - webkitdirectory is not in the types\n        webkitdirectory=\"\"\n        directory=\"\"\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}